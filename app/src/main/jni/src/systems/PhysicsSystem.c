/** updated by adriac */
/* PhysicsSystem.c generated by valac 0.36.4-dirty, the Vala compiler
 * generated from PhysicsSystem.vala, do not modify */

/*[Adriac:Systems::PhysicsSystem:SystemsPhysicsSystem:systems_physics_system]*/

#include <glib.h>
#include <glib-object.h>
#include <float.h>
#include <math.h>
#include <stdlib.h>
#include <string.h>
#include <SDL_rect.h>

typedef struct _EntitasSystem EntitasSystem;
typedef EntitasSystem SystemsPhysicsSystem;
typedef struct _SdxAbstractGame SdxAbstractGame;
typedef SdxAbstractGame Game;
typedef struct _EntitasWorld EntitasWorld;
typedef EntitasWorld Factory;
typedef struct _EntitasGroup EntitasGroup;
// symtbl.1 sdx_abstract_game
void sdx_abstract_game_release (SdxAbstractGame* self);
void sdx_abstract_game_free (SdxAbstractGame* self);
SdxAbstractGame* sdx_abstract_game_retain (SdxAbstractGame* self);
#define _sdx_abstract_game_release0(var) ((var == NULL) ? NULL : (var = (sdx_abstract_game_release (var), NULL)))
// symtbl.1 entitas_world
void entitas_world_release (EntitasWorld* self);
void entitas_world_free (EntitasWorld* self);
EntitasWorld* entitas_world_retain (EntitasWorld* self);
#define _entitas_world_release0(var) ((var == NULL) ? NULL : (var = (entitas_world_release (var), NULL)))
typedef struct _Block34Data Block34Data;
// symtbl.1 entitas_group
void entitas_group_release (EntitasGroup* self);
void entitas_group_free (EntitasGroup* self);
EntitasGroup* entitas_group_retain (EntitasGroup* self);
#define _entitas_group_release0(var) ((var == NULL) ? NULL : (var = (entitas_group_release (var), NULL)))
// symtbl.1 entitas_system
void entitas_system_release (EntitasSystem* self);
void entitas_system_free (EntitasSystem* self);
EntitasSystem* entitas_system_retain (EntitasSystem* self);
#define _entitas_system_release0(var) ((var == NULL) ? NULL : (var = (entitas_system_release (var), NULL)))
typedef struct _EntitasMatcher EntitasMatcher;

#define ENTITAS_TYPE_COMPONENTS (entitas_components_get_type ())
// symtbl.1 entitas_matcher
void entitas_matcher_release (EntitasMatcher* self);
void entitas_matcher_free (EntitasMatcher* self);
EntitasMatcher* entitas_matcher_retain (EntitasMatcher* self);
#define _entitas_matcher_release0(var) ((var == NULL) ? NULL : (var = (entitas_matcher_release (var), NULL)))
typedef struct _Block35Data Block35Data;

#define ENTITAS_TYPE_ENTITY (entitas_entity_get_type ())

#define ENTITAS_TYPE_TRANSFORM (entitas_transform_get_type ())

#define SDX_MATH_TYPE_VECTOR2 (sdx_math_vector2_get_type ())
typedef struct _SdxMathVector2 SdxMathVector2;
typedef struct _SdxGraphicsSprite SdxGraphicsSprite;
typedef struct _EntitasTransform EntitasTransform;
typedef struct _EntitasEventEntityChanged EntitasEventEntityChanged;
typedef struct _EntitasEventEntityReleased EntitasEventEntityReleased;
typedef struct _EntitasEventComponentReplaced EntitasEventComponentReplaced;

#define ENTITAS_TYPE_BACKGROUND (entitas_background_get_type ())
typedef struct _EntitasBackground EntitasBackground;

#define ENTITAS_TYPE_BULLET (entitas_bullet_get_type ())
typedef struct _EntitasBullet EntitasBullet;

#define ENTITAS_TYPE_ENEMY1 (entitas_enemy1_get_type ())
typedef struct _EntitasEnemy1 EntitasEnemy1;

#define ENTITAS_TYPE_ENEMY2 (entitas_enemy2_get_type ())
typedef struct _EntitasEnemy2 EntitasEnemy2;

#define ENTITAS_TYPE_ENEMY3 (entitas_enemy3_get_type ())
typedef struct _EntitasEnemy3 EntitasEnemy3;

#define ENTITAS_TYPE_EXPIRES (entitas_expires_get_type ())
typedef struct _EntitasExpires EntitasExpires;

#define ENTITAS_TYPE_HEALTH (entitas_health_get_type ())
typedef struct _EntitasHealth EntitasHealth;

#define ENTITAS_TYPE_HUD (entitas_hud_get_type ())
typedef struct _EntitasHud EntitasHud;

#define ENTITAS_TYPE_LAYER (entitas_layer_get_type ())
typedef struct _EntitasLayer EntitasLayer;

#define ENTITAS_TYPE_PLAYER (entitas_player_get_type ())
typedef struct _EntitasPlayer EntitasPlayer;

#define ENTITAS_TYPE_SHOW (entitas_show_get_type ())
typedef struct _EntitasShow EntitasShow;

#define ENTITAS_TYPE_SOUND (entitas_sound_get_type ())
typedef struct _SdxAudioSound SdxAudioSound;
typedef struct _EntitasSound EntitasSound;

#define ENTITAS_TYPE_TEXT (entitas_text_get_type ())
typedef SdxGraphicsSprite SdxGraphicsSpriteTextSprite;
typedef struct _EntitasText EntitasText;

#define ENTITAS_TYPE_TINT (entitas_tint_get_type ())
typedef struct _EntitasTint EntitasTint;

#define ENTITAS_TYPE_TWEEN (entitas_tween_get_type ())
typedef struct _EntitasTween EntitasTween;

#define ENTITAS_TYPE_VELOCITY (entitas_velocity_get_type ())
typedef struct _EntitasVelocity EntitasVelocity;
typedef struct _EntitasEntity EntitasEntity;
typedef struct _EntitasEventGroupChanged EntitasEventGroupChanged;
typedef struct _EntitasEventGroupUpdated EntitasEventGroupUpdated;

#define TYPE_POOL (pool_get_type ())

typedef void (*EntitasSystemInitialize) (void* user_data);
typedef void (*EntitasSystemExecute) (gfloat delta, void* user_data);
struct _EntitasSystem {
	gint ref_count;
	EntitasSystemInitialize Initialize;
	gpointer Initialize_target;
	GDestroyNotify Initialize_target_destroy_notify;
	EntitasSystemExecute Execute;
	gpointer Execute_target;
	GDestroyNotify Execute_target_destroy_notify;
};

struct _Block34Data {
	int _ref_count_;
	SystemsPhysicsSystem* self;
	EntitasGroup* physics;
	Game* game;
	Factory* world;
};

typedef enum  {
	ENTITAS_COMPONENTS_UnknownComponent,
	ENTITAS_COMPONENTS_BackgroundComponent,
	ENTITAS_COMPONENTS_BulletComponent,
	ENTITAS_COMPONENTS_Enemy1Component,
	ENTITAS_COMPONENTS_Enemy2Component,
	ENTITAS_COMPONENTS_Enemy3Component,
	ENTITAS_COMPONENTS_ExpiresComponent,
	ENTITAS_COMPONENTS_HealthComponent,
	ENTITAS_COMPONENTS_HudComponent,
	ENTITAS_COMPONENTS_LayerComponent,
	ENTITAS_COMPONENTS_PlayerComponent,
	ENTITAS_COMPONENTS_ShowComponent,
	ENTITAS_COMPONENTS_SoundComponent,
	ENTITAS_COMPONENTS_TextComponent,
	ENTITAS_COMPONENTS_TintComponent,
	ENTITAS_COMPONENTS_TweenComponent,
	ENTITAS_COMPONENTS_VelocityComponent
} EntitasComponents;

struct _Block35Data {
	int _ref_count_;
	Block34Data * _data34_;
	gfloat delta;
};

struct _SdxMathVector2 {
	gfloat x;
	gfloat y;
};

struct _EntitasTransform {
	SdxMathVector2* scale;
	SdxMathVector2* position;
	SDL_Rect* aabb;
	SdxGraphicsSprite* sprite;
};

struct _EntitasBackground {
	gboolean active;
};

struct _EntitasBullet {
	gboolean active;
};

struct _EntitasEnemy1 {
	gboolean active;
};

struct _EntitasEnemy2 {
	gboolean active;
};

struct _EntitasEnemy3 {
	gboolean active;
};

struct _EntitasExpires {
	gfloat value;
};

struct _EntitasHealth {
	gfloat current;
	gfloat maximum;
};

struct _EntitasHud {
	gboolean active;
};

struct _EntitasLayer {
	gint value;
};

struct _EntitasPlayer {
	gboolean active;
};

struct _EntitasShow {
	gboolean active;
};

struct _EntitasSound {
	SdxAudioSound* sound;
};

struct _EntitasText {
	gchar* text;
	SdxGraphicsSpriteTextSprite* sprite;
};

struct _EntitasTint {
	gint r;
	gint g;
	gint b;
	gint a;
};

struct _EntitasTween {
	gfloat min;
	gfloat max;
	gfloat speed;
	gboolean repeat;
	gboolean active;
};

struct _EntitasVelocity {
	gfloat x;
	gfloat y;
};

struct _EntitasEntity {
	gint id;
	gchar* name;
	gint pool;
	guint64 mask;
	EntitasTransform transform;
	EntitasEventEntityChanged* onComponentAdded;
	EntitasEventEntityChanged* onComponentRemoved;
	EntitasEventEntityReleased* onEntityReleased;
	EntitasEventComponentReplaced* onComponentReplaced;
	EntitasBackground* background;
	EntitasBullet* bullet;
	EntitasEnemy1* enemy1;
	EntitasEnemy2* enemy2;
	EntitasEnemy3* enemy3;
	EntitasExpires* expires;
	EntitasHealth* health;
	EntitasHud* hud;
	EntitasLayer* layer;
	EntitasPlayer* player;
	EntitasShow* show;
	EntitasSound* sound;
	EntitasText* text;
	EntitasTint* tint;
	EntitasTween* tween;
	EntitasVelocity* velocity;
};

struct _EntitasGroup {
	gint ref_count;
	GList* entities;
	EntitasMatcher* matcher;
	EntitasEventGroupChanged* onEntityAdded;
	EntitasEventGroupChanged* onEntityRemoved;
	EntitasEventGroupUpdated* onEntityUpdated;
};

typedef enum  {
	POOL_BACKGROUND,
	POOL_ENEMY1,
	POOL_ENEMY2,
	POOL_ENEMY3,
	POOL_PLAYER,
	POOL_BULLET,
	POOL_EXPLOSION,
	POOL_BANG,
	POOL_PARTICLE,
	POOL_HUD,
	POOL_Count
} Pool;

typedef void (*SdxAbstractGameAbstractUpdate) (void* user_data);
typedef void (*SdxAbstractGameAbstractDraw) (void* user_data);
struct _SdxAbstractGame {
	gint ref_count;
	gint width;
	gint height;
	SdxAbstractGameAbstractUpdate Update;
	gpointer Update_target;
	GDestroyNotify Update_target_destroy_notify;
	SdxAbstractGameAbstractDraw Draw;
	gpointer Draw_target;
	GDestroyNotify Draw_target_destroy_notify;
};



void entitas_system_free (EntitasSystem * self);
void sdx_abstract_game_free (SdxAbstractGame * self);
void entitas_world_free (EntitasWorld * self);
SystemsPhysicsSystem* systems_physics_system_new (Game* game, Factory* world);
void entitas_group_free (EntitasGroup * self);
static Block34Data* block34_data_ref (Block34Data* _data34_);
static void block34_data_unref (void * _userdata_);
EntitasSystem* entitas_system_new (void);
void entitas_matcher_free (EntitasMatcher * self);
EntitasGroup* entitas_world_GetGroup (EntitasWorld* self, EntitasMatcher* matcher);
EntitasMatcher* entitas_matcher_AllOf (gint* components, int components_length1);
GType entitas_components_get_type (void) G_GNUC_CONST;
static void __lambda126_ (Block34Data* _data34_, gfloat delta);
static Block35Data* block35_data_ref (Block35Data* _data35_);
static void block35_data_unref (void * _userdata_);
GType entitas_entity_get_type (void) G_GNUC_CONST;
GType entitas_transform_get_type (void) G_GNUC_CONST;
GType sdx_math_vector2_get_type (void) G_GNUC_CONST;
SdxMathVector2* sdx_math_vector2_dup (const SdxMathVector2* self);
void sdx_math_vector2_free (SdxMathVector2* self);
void sdx_graphics_sprite_free (SdxGraphicsSprite * self);
EntitasTransform* entitas_transform_dup (const EntitasTransform* self);
void entitas_transform_free (EntitasTransform* self);
void entitas_transform_copy (const EntitasTransform* self, EntitasTransform* dest);
void entitas_transform_destroy (EntitasTransform* self);
void entitas_event_entity_changed_free (EntitasEventEntityChanged * self);
void entitas_event_entity_released_free (EntitasEventEntityReleased * self);
void entitas_event_component_replaced_free (EntitasEventComponentReplaced * self);
GType entitas_background_get_type (void) G_GNUC_CONST;
EntitasBackground* entitas_background_dup (const EntitasBackground* self);
void entitas_background_free (EntitasBackground* self);
GType entitas_bullet_get_type (void) G_GNUC_CONST;
EntitasBullet* entitas_bullet_dup (const EntitasBullet* self);
void entitas_bullet_free (EntitasBullet* self);
GType entitas_enemy1_get_type (void) G_GNUC_CONST;
EntitasEnemy1* entitas_enemy1_dup (const EntitasEnemy1* self);
void entitas_enemy1_free (EntitasEnemy1* self);
GType entitas_enemy2_get_type (void) G_GNUC_CONST;
EntitasEnemy2* entitas_enemy2_dup (const EntitasEnemy2* self);
void entitas_enemy2_free (EntitasEnemy2* self);
GType entitas_enemy3_get_type (void) G_GNUC_CONST;
EntitasEnemy3* entitas_enemy3_dup (const EntitasEnemy3* self);
void entitas_enemy3_free (EntitasEnemy3* self);
GType entitas_expires_get_type (void) G_GNUC_CONST;
EntitasExpires* entitas_expires_dup (const EntitasExpires* self);
void entitas_expires_free (EntitasExpires* self);
GType entitas_health_get_type (void) G_GNUC_CONST;
EntitasHealth* entitas_health_dup (const EntitasHealth* self);
void entitas_health_free (EntitasHealth* self);
GType entitas_hud_get_type (void) G_GNUC_CONST;
EntitasHud* entitas_hud_dup (const EntitasHud* self);
void entitas_hud_free (EntitasHud* self);
GType entitas_layer_get_type (void) G_GNUC_CONST;
EntitasLayer* entitas_layer_dup (const EntitasLayer* self);
void entitas_layer_free (EntitasLayer* self);
GType entitas_player_get_type (void) G_GNUC_CONST;
EntitasPlayer* entitas_player_dup (const EntitasPlayer* self);
void entitas_player_free (EntitasPlayer* self);
GType entitas_show_get_type (void) G_GNUC_CONST;
EntitasShow* entitas_show_dup (const EntitasShow* self);
void entitas_show_free (EntitasShow* self);
GType entitas_sound_get_type (void) G_GNUC_CONST;
void sdx_audio_sound_free (SdxAudioSound * self);
EntitasSound* entitas_sound_dup (const EntitasSound* self);
void entitas_sound_free (EntitasSound* self);
void entitas_sound_copy (const EntitasSound* self, EntitasSound* dest);
void entitas_sound_destroy (EntitasSound* self);
GType entitas_text_get_type (void) G_GNUC_CONST;
EntitasText* entitas_text_dup (const EntitasText* self);
void entitas_text_free (EntitasText* self);
void entitas_text_copy (const EntitasText* self, EntitasText* dest);
void entitas_text_destroy (EntitasText* self);
GType entitas_tint_get_type (void) G_GNUC_CONST;
EntitasTint* entitas_tint_dup (const EntitasTint* self);
void entitas_tint_free (EntitasTint* self);
GType entitas_tween_get_type (void) G_GNUC_CONST;
EntitasTween* entitas_tween_dup (const EntitasTween* self);
void entitas_tween_free (EntitasTween* self);
GType entitas_velocity_get_type (void) G_GNUC_CONST;
EntitasVelocity* entitas_velocity_dup (const EntitasVelocity* self);
void entitas_velocity_free (EntitasVelocity* self);
EntitasEntity* entitas_entity_dup (const EntitasEntity* self);
void entitas_entity_free (EntitasEntity* self);
void entitas_entity_copy (const EntitasEntity* self, EntitasEntity* dest);
void entitas_entity_destroy (EntitasEntity* self);
void entitas_event_group_changed_free (EntitasEventGroupChanged * self);
void entitas_event_group_updated_free (EntitasEventGroupUpdated * self);
static void __lambda127_ (Block35Data* _data35_, EntitasEntity* it);
gboolean entitas_entity_IsActive (EntitasEntity *self);
EntitasEntity* entitas_entity_SetPosition (EntitasEntity *self, gfloat x, gfloat y);
GType pool_get_type (void) G_GNUC_CONST;
void entitas_world_DeleteEntity (EntitasWorld* self, EntitasEntity* entity);
EntitasEntity* entitas_entity_SetShow (EntitasEntity *self, gboolean value);
static void ___lambda127__gfunc (gconstpointer data, gpointer self);
static void ___lambda126__entitas_system_execute (gfloat delta, gpointer self);


static gpointer _sdx_abstract_game_retain0 (gpointer self) {
	return self ? sdx_abstract_game_retain (self) : NULL;
}


static gpointer _entitas_world_retain0 (gpointer self) {
	return self ? entitas_world_retain (self) : NULL;
}


static Block34Data* block34_data_ref (Block34Data* _data34_) {
	g_atomic_int_inc (&_data34_->_ref_count_);
	return _data34_;
}


static void block34_data_unref (void * _userdata_) {
	Block34Data* _data34_;
	_data34_ = (Block34Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data34_->_ref_count_)) {
		SystemsPhysicsSystem* self;
		self = _data34_->self;
		_entitas_group_release0 (_data34_->physics);
		_sdx_abstract_game_release0 (_data34_->game);
		_entitas_world_release0 (_data34_->world);
		_entitas_system_release0 (self);
		g_slice_free (Block34Data, _data34_);
	}
}


static Block35Data* block35_data_ref (Block35Data* _data35_) {
	g_atomic_int_inc (&_data35_->_ref_count_);
	return _data35_;
}


static void block35_data_unref (void * _userdata_) {
	Block35Data* _data35_;
	_data35_ = (Block35Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data35_->_ref_count_)) {
		SystemsPhysicsSystem* self;
		self = _data35_->_data34_->self;
		block34_data_unref (_data35_->_data34_);
		_data35_->_data34_ = NULL;
		g_slice_free (Block35Data, _data35_);
	}
}


static void __lambda127_ (Block35Data* _data35_, EntitasEntity* it) {
	Block34Data* _data34_;
	SystemsPhysicsSystem* self;
	gboolean _tmp0_;
	_data34_ = _data35_->_data34_;
	self = _data34_->self;
	_tmp0_ = entitas_entity_IsActive (it);
	if (_tmp0_) {
		gfloat x = 0.0F;
		EntitasEntity* _tmp1_;
		EntitasTransform _tmp2_;
		SdxMathVector2* _tmp3_;
		gfloat _tmp4_;
		EntitasEntity* _tmp5_;
		EntitasVelocity* _tmp6_;
		gfloat _tmp7_;
		gfloat _tmp8_;
		gfloat y = 0.0F;
		EntitasEntity* _tmp9_;
		EntitasTransform _tmp10_;
		SdxMathVector2* _tmp11_;
		gfloat _tmp12_;
		EntitasEntity* _tmp13_;
		EntitasVelocity* _tmp14_;
		gfloat _tmp15_;
		gfloat _tmp16_;
		gfloat _tmp17_;
		gfloat _tmp18_;
		EntitasEntity* _tmp19_;
		gint _tmp20_;
		_tmp1_ = it;
		_tmp2_ = (*_tmp1_).transform;
		_tmp3_ = _tmp2_.position;
		_tmp4_ = (*_tmp3_).x;
		_tmp5_ = it;
		_tmp6_ = (*_tmp5_).velocity;
		_tmp7_ = (*_tmp6_).x;
		_tmp8_ = _data35_->delta;
		x = _tmp4_ + (_tmp7_ * _tmp8_);
		_tmp9_ = it;
		_tmp10_ = (*_tmp9_).transform;
		_tmp11_ = _tmp10_.position;
		_tmp12_ = (*_tmp11_).y;
		_tmp13_ = it;
		_tmp14_ = (*_tmp13_).velocity;
		_tmp15_ = (*_tmp14_).y;
		_tmp16_ = _data35_->delta;
		y = _tmp12_ + (_tmp15_ * _tmp16_);
		_tmp17_ = x;
		_tmp18_ = y;
		entitas_entity_SetPosition (it, _tmp17_, _tmp18_);
		_tmp19_ = it;
		_tmp20_ = (*_tmp19_).pool;
		switch (_tmp20_) {
			case POOL_ENEMY1:
			{
				EntitasEntity* _tmp21_;
				EntitasTransform _tmp22_;
				SdxMathVector2* _tmp23_;
				gfloat _tmp24_;
				Game* _tmp25_;
				gint _tmp26_;
				_tmp21_ = it;
				_tmp22_ = (*_tmp21_).transform;
				_tmp23_ = _tmp22_.position;
				_tmp24_ = (*_tmp23_).y;
				_tmp25_ = _data34_->game;
				_tmp26_ = ((SdxAbstractGame*) _tmp25_)->height;
				if (_tmp24_ > ((gfloat) _tmp26_)) {
					Factory* _tmp27_;
					EntitasEntity* _tmp28_;
					_tmp27_ = _data34_->world;
					_tmp28_ = entitas_entity_SetShow (it, FALSE);
					entitas_world_DeleteEntity ((EntitasWorld*) _tmp27_, _tmp28_);
				}
				break;
			}
			case POOL_ENEMY2:
			{
				EntitasEntity* _tmp29_;
				EntitasTransform _tmp30_;
				SdxMathVector2* _tmp31_;
				gfloat _tmp32_;
				Game* _tmp33_;
				gint _tmp34_;
				_tmp29_ = it;
				_tmp30_ = (*_tmp29_).transform;
				_tmp31_ = _tmp30_.position;
				_tmp32_ = (*_tmp31_).y;
				_tmp33_ = _data34_->game;
				_tmp34_ = ((SdxAbstractGame*) _tmp33_)->height;
				if (_tmp32_ > ((gfloat) _tmp34_)) {
					Factory* _tmp35_;
					EntitasEntity* _tmp36_;
					_tmp35_ = _data34_->world;
					_tmp36_ = entitas_entity_SetShow (it, FALSE);
					entitas_world_DeleteEntity ((EntitasWorld*) _tmp35_, _tmp36_);
				}
				break;
			}
			case POOL_ENEMY3:
			{
				EntitasEntity* _tmp37_;
				EntitasTransform _tmp38_;
				SdxMathVector2* _tmp39_;
				gfloat _tmp40_;
				Game* _tmp41_;
				gint _tmp42_;
				_tmp37_ = it;
				_tmp38_ = (*_tmp37_).transform;
				_tmp39_ = _tmp38_.position;
				_tmp40_ = (*_tmp39_).y;
				_tmp41_ = _data34_->game;
				_tmp42_ = ((SdxAbstractGame*) _tmp41_)->height;
				if (_tmp40_ > ((gfloat) _tmp42_)) {
					Factory* _tmp43_;
					EntitasEntity* _tmp44_;
					_tmp43_ = _data34_->world;
					_tmp44_ = entitas_entity_SetShow (it, FALSE);
					entitas_world_DeleteEntity ((EntitasWorld*) _tmp43_, _tmp44_);
				}
				break;
			}
			case POOL_BULLET:
			{
				EntitasEntity* _tmp45_;
				EntitasTransform _tmp46_;
				SdxMathVector2* _tmp47_;
				gfloat _tmp48_;
				_tmp45_ = it;
				_tmp46_ = (*_tmp45_).transform;
				_tmp47_ = _tmp46_.position;
				_tmp48_ = (*_tmp47_).y;
				if (_tmp48_ < ((gfloat) 0)) {
					Factory* _tmp49_;
					EntitasEntity* _tmp50_;
					_tmp49_ = _data34_->world;
					_tmp50_ = entitas_entity_SetShow (it, FALSE);
					entitas_world_DeleteEntity ((EntitasWorld*) _tmp49_, _tmp50_);
				}
				break;
			}
			default:
			break;
		}
	}
}


static void ___lambda127__gfunc (gconstpointer data, gpointer self) {
	__lambda127_ (self, data);
}


static void __lambda126_ (Block34Data* _data34_, gfloat delta) {
	SystemsPhysicsSystem* self;
	Block35Data* _data35_;
	gfloat _tmp0_;
	GList* _tmp1_;
	self = _data34_->self;
	_data35_ = g_slice_new0 (Block35Data);
	_data35_->_ref_count_ = 1;
	_data35_->_data34_ = block34_data_ref (_data34_);
	_tmp0_ = delta;
	_data35_->delta = _tmp0_;
	_tmp1_ = _data34_->physics->entities;
	g_list_foreach (_tmp1_, ___lambda127__gfunc, _data35_);
	block35_data_unref (_data35_);
	_data35_ = NULL;
}


static void ___lambda126__entitas_system_execute (gfloat delta, gpointer self) {
	__lambda126_ (self, delta);
}


SystemsPhysicsSystem* systems_physics_system_new (Game* game, Factory* world) {
	SystemsPhysicsSystem* self;
	Block34Data* _data34_;
	Game* _tmp0_;
	Game* _tmp1_;
	Factory* _tmp2_;
	Factory* _tmp3_;
	Factory* _tmp4_;
	gint* _tmp5_;
	gint* _tmp6_;
	gint _tmp6__length1;
	EntitasMatcher* _tmp7_;
	EntitasMatcher* _tmp8_;
	EntitasGroup* _tmp9_;
	EntitasGroup* _tmp10_;
	g_return_val_if_fail (game != NULL, NULL);
	g_return_val_if_fail (world != NULL, NULL);
	_data34_ = g_slice_new0 (Block34Data);
	_data34_->_ref_count_ = 1;
	_tmp0_ = game;
	_tmp1_ = _sdx_abstract_game_retain0 (_tmp0_);
	_sdx_abstract_game_release0 (_data34_->game);
	_data34_->game = _tmp1_;
	_tmp2_ = world;
	_tmp3_ = _entitas_world_retain0 (_tmp2_);
	_entitas_world_release0 (_data34_->world);
	_data34_->world = _tmp3_;
	self = (SystemsPhysicsSystem*) entitas_system_new ();
	_data34_->self = entitas_system_retain (self);
	_tmp4_ = _data34_->world;
	_tmp5_ = g_new0 (gint, 1);
	_tmp5_[0] = (gint) ENTITAS_COMPONENTS_VelocityComponent;
	_tmp6_ = _tmp5_;
	_tmp6__length1 = 1;
	_tmp7_ = entitas_matcher_AllOf (_tmp6_, 1);
	_tmp8_ = _tmp7_;
	_tmp9_ = entitas_world_GetGroup ((EntitasWorld*) _tmp4_, _tmp8_);
	_tmp10_ = _tmp9_;
	_entitas_matcher_release0 (_tmp8_);
	_tmp6_ = (g_free (_tmp6_), NULL);
	_data34_->physics = _tmp10_;
	(((EntitasSystem*) self)->Execute_target_destroy_notify == NULL) ? NULL : (((EntitasSystem*) self)->Execute_target_destroy_notify (((EntitasSystem*) self)->Execute_target), NULL);
	((EntitasSystem*) self)->Execute = NULL;
	((EntitasSystem*) self)->Execute_target = NULL;
	((EntitasSystem*) self)->Execute_target_destroy_notify = NULL;
	((EntitasSystem*) self)->Execute = ___lambda126__entitas_system_execute;
	((EntitasSystem*) self)->Execute_target = block34_data_ref (_data34_);
	((EntitasSystem*) self)->Execute_target_destroy_notify = block34_data_unref;
	block34_data_unref (_data34_);
	_data34_ = NULL;
	return self;
}




