/** updated by adriac */
/* Sprite.c generated by valac 0.36.4-dirty, the Vala compiler
 * generated from Sprite.vala, do not modify */

/*[Adriac:Sdx.Graphics::Sprite:SdxGraphicsSprite:sdx_graphics_sprite]*/
/*[Adriac:Sdx.Graphics:Sprite:CompositeSprite:SdxGraphicsSpriteCompositeSprite:sdx_graphics_sprite_compositesprite]*/
/*[Adriac:Sdx.Graphics:Sprite:TextureSprite:SdxGraphicsSpriteTextureSprite:sdx_graphics_sprite_texturesprite]*/
/*[Adriac:Sdx.Graphics:Sprite:NineSliceSprite:SdxGraphicsSpriteNineSliceSprite:sdx_graphics_sprite_nineslicesprite]*/
/*[Adriac:Sdx.Graphics:Sprite:AnimatedSprite:SdxGraphicsSpriteAnimatedSprite:sdx_graphics_sprite_animatedsprite]*/
/*[Adriac:Sdx.Graphics:Sprite:UISprite:SdxGraphicsSpriteUISprite:sdx_graphics_sprite_uisprite]*/
/*[Adriac:Sdx.Graphics:Sprite:AtlasSprite:SdxGraphicsSpriteAtlasSprite:sdx_graphics_sprite_atlassprite]*/
/*[Adriac:Sdx.Graphics:Sprite:TextSprite:SdxGraphicsSpriteTextSprite:sdx_graphics_sprite_textsprite]*/
/* ******************************************************************************
 * Copyright 2017 darkoverlordofdata.
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *   http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/

#include <glib.h>
#include <glib-object.h>
#include <SDL_render.h>
#include <float.h>
#include <math.h>
#include <SDL_pixels.h>
#include <SDL_rect.h>
#include <stdlib.h>
#include <string.h>
#include <SDL_surface.h>
#include <SDL_video.h>

typedef struct _SdxGraphicsSprite SdxGraphicsSprite;
typedef struct _Class Class;

#define SDX_GRAPHICS_SPRITE_TYPE_KIND (sdx_graphics_sprite_kind_get_type ())

#define SDX_MATH_TYPE_SCALE (sdx_math_scale_get_type ())
typedef struct _SdxMathScale SdxMathScale;
#define _SDL_DestroyTexture0(var) ((var == NULL) ? NULL : (var = (SDL_DestroyTexture (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
typedef SdxGraphicsSprite SdxGraphicsSpriteAnimatedSprite;
typedef struct _SdxGraphicsSurface SdxGraphicsSurface;
#define _SDL_FreeSurface0(var) ((var == NULL) ? NULL : (var = (SDL_FreeSurface (var), NULL)))
typedef SdxGraphicsSprite SdxGraphicsSpriteTextureSprite;
typedef SdxGraphicsSprite SdxGraphicsSpriteAtlasSprite;
typedef struct _SdxGraphicsTextureRegion SdxGraphicsTextureRegion;
typedef SdxGraphicsTextureRegion SdxGraphicsTextureRegionFromTexture;
typedef SdxGraphicsTextureRegionFromTexture SdxGraphicsAtlasRegion;
typedef SdxGraphicsSurface SdxGraphicsSurfaceTextureSurface;
typedef SdxGraphicsSprite SdxGraphicsSpriteCompositeSprite;

#define SDX_GRAPHICS_TYPE_BLIT (sdx_graphics_blit_get_type ())
typedef struct _SdxGraphicsBlit SdxGraphicsBlit;
typedef SdxGraphicsSprite SdxGraphicsSpriteNineSliceSprite;
typedef struct _SdxGraphicsNinePatch SdxGraphicsNinePatch;
typedef SdxGraphicsSprite SdxGraphicsSpriteUISprite;
typedef struct _SdxFont SdxFont;
typedef SdxGraphicsSprite SdxGraphicsSpriteTextSprite;

typedef enum  {
	SDX_GRAPHICS_SPRITE_KIND_AnimatedSprite,
	SDX_GRAPHICS_SPRITE_KIND_TextureSprite,
	SDX_GRAPHICS_SPRITE_KIND_AtlasSprite,
	SDX_GRAPHICS_SPRITE_KIND_NineSliceSprite,
	SDX_GRAPHICS_SPRITE_KIND_CompositeSprite,
	SDX_GRAPHICS_SPRITE_KIND_TextSprite
} SdxGraphicsSpriteKind;

struct _SdxMathScale {
	gfloat x;
	gfloat y;
};

struct _SdxGraphicsSprite {
	gint ref_count;
	Class* klass;
	SdxGraphicsSpriteKind kind;
	gint id;
	SDL_Texture* texture;
	gint width;
	gint height;
	gint x;
	gint y;
	gint index;
	gint frame;
	gdouble angle;
	SdxMathScale scale;
	SDL_Color color;
	SDL_RendererFlip flip;
	SDL_Point center;
	gboolean centered;
	gint layer;
	gchar* path;
};

struct _SdxGraphicsSurface {
	gint ref_count;
	SDL_Surface* surface;
	gint id;
	gchar* path;
};

typedef enum  {
	SDX_SDL_EXCEPTION_Initialization,
	SDX_SDL_EXCEPTION_ImageInitialization,
	SDX_SDL_EXCEPTION_TtfInitialization,
	SDX_SDL_EXCEPTION_TextureFilteringNotEnabled,
	SDX_SDL_EXCEPTION_OpenWindow,
	SDX_SDL_EXCEPTION_CreateRenderer,
	SDX_SDL_EXCEPTION_InvalidForPlatform,
	SDX_SDL_EXCEPTION_UnableToLoadResource,
	SDX_SDL_EXCEPTION_UnableToLoadSurface,
	SDX_SDL_EXCEPTION_UnableToLoadTexture,
	SDX_SDL_EXCEPTION_NullPointer,
	SDX_SDL_EXCEPTION_NoSuchElement,
	SDX_SDL_EXCEPTION_IllegalStateException,
	SDX_SDL_EXCEPTION_IllegalArgumentException,
	SDX_SDL_EXCEPTION_RuntimeException,
	SDX_SDL_EXCEPTION_NotReached
} SdxSdlException;
#define SDX_SDL_EXCEPTION sdx_sdl_exception_quark ()
struct _SdxGraphicsTextureRegion {
	gint ref_count;
	SdxGraphicsSurfaceTextureSurface* texture;
	gint top;
	gint left;
	gint width;
	gint height;
	gint regionWidth;
	gint regionHeight;
	gfloat u;
	gfloat v;
	gfloat u2;
	gfloat v2;
	gint index;
	gchar* name;
	gint offsetX;
	gint offsetY;
	gint packedWidth;
	gint packedHeight;
	gint originalWidth;
	gint originalHeight;
	gboolean rotate;
	gint* splits;
	gint splits_length1;
	gint* pads;
	gint pads_length1;
};

struct _SdxGraphicsBlit {
	SDL_Rect source;
	SDL_Rect dest;
	SDL_RendererFlip flip;
};

typedef SdxGraphicsBlit* (*SdxGraphicsCompositor) (gint x, gint y, int* result_length1, void* user_data);
struct _SdxGraphicsNinePatch {
	gint ref_count;
	SdxGraphicsSurfaceTextureSurface* texture;
	gint bottomLeft;
	gint bottomCenter;
	gint bottomRight;
	gint middleLeft;
	gint middleCenter;
	gint middleRight;
	gint topLeft;
	gint topCenter;
	gint topRight;
	gint top;
	gint left;
	gint right;
	gint bottom;
	gfloat leftWidth;
	gfloat rightWidth;
	gfloat middleWidth;
	gfloat middleHeight;
	gfloat topHeight;
	gfloat bottomHeight;
	SdxGraphicsBlit slice[9];
	gint idx;
	SDL_Color color;
	gfloat padLeft;
	gfloat padRight;
	gfloat padTop;
	gfloat padBottom;
	gint sourceTop;
	gint sourceLeft;
};


extern gint sdx_graphics_sprite_uniqueId;
gint sdx_graphics_sprite_uniqueId = 0;
extern SDL_Renderer* sdx_renderer;
extern SdxGraphicsSurface** sdx_graphics_surface_cached_surface_cache;
extern gint sdx_graphics_surface_cached_surface_cache_length1;

void sdx_graphics_sprite_free (SdxGraphicsSprite * self);
void class_free (Class * self);
GType sdx_graphics_sprite_kind_get_type (void) G_GNUC_CONST;
GType sdx_math_scale_get_type (void) G_GNUC_CONST;
SdxMathScale* sdx_math_scale_dup (const SdxMathScale* self);
void sdx_math_scale_free (SdxMathScale* self);
static void sdx_graphics_sprite_instance_init (SdxGraphicsSprite * self);
Class* class_Register (const gchar* name, const gchar* guid);
SdxGraphicsSprite* sdx_graphics_sprite_retain (SdxGraphicsSprite* self);
void sdx_graphics_sprite_release (SdxGraphicsSprite* self);
void sdx_graphics_sprite_free (SdxGraphicsSprite* self);
void sdx_graphics_sprite_Render (SdxGraphicsSprite* self, gint x, gint y, SDL_Rect* clip);
void sdx_graphics_sprite_Copy (SdxGraphicsSprite* self, SDL_Rect* src, SDL_Rect* dest);
SdxGraphicsSprite* sdx_graphics_sprite_SetColor (SdxGraphicsSprite* self, SDL_Color color);
SdxGraphicsSprite* sdx_graphics_sprite_SetScale (SdxGraphicsSprite* self, gfloat x, gfloat y);
SdxGraphicsSprite* sdx_graphics_sprite_SetPosition (SdxGraphicsSprite* self, gint x, gint y);
SdxGraphicsSprite* sdx_graphics_sprite_SetCentered (SdxGraphicsSprite* self, gboolean value);
SdxGraphicsSprite* sdx_graphics_sprite_new (void);
gint sdx_graphics_sprite_get_Width (SdxGraphicsSprite* self);
void sdx_graphics_sprite_set_Width (SdxGraphicsSprite* self, gint value);
SdxGraphicsSpriteAnimatedSprite* sdx_graphics_sprite_animated_sprite_new (const gchar* path, gint width, gint height);
gint sdx_graphics_surface_cached_surface_IndexOfPath (const gchar* path);
void sdx_graphics_sprite_animated_sprite_SetFrame (SdxGraphicsSpriteAnimatedSprite* self, gint frame);
void sdx_graphics_surface_free (SdxGraphicsSurface * self);
SdxGraphicsSpriteTextureSprite* sdx_graphics_sprite_texture_sprite_new (const gchar* path);
GQuark sdx_sdl_exception_quark (void);
gint sdx_graphics_surface_get_width (SdxGraphicsSurface* self);
gint sdx_graphics_surface_get_height (SdxGraphicsSurface* self);
void sdx_graphics_texture_region_free (SdxGraphicsTextureRegion * self);
SdxGraphicsSpriteAtlasSprite* sdx_graphics_sprite_atlas_sprite_new (SdxGraphicsAtlasRegion* region);
GType sdx_graphics_blit_get_type (void) G_GNUC_CONST;
SdxGraphicsBlit* sdx_graphics_blit_dup (const SdxGraphicsBlit* self);
void sdx_graphics_blit_free (SdxGraphicsBlit* self);
SdxGraphicsSpriteCompositeSprite* sdx_graphics_sprite_composite_sprite_new (const gchar* path, SdxGraphicsCompositor builder, void* builder_target, gint x, gint y);
void sdx_graphics_nine_patch_free (SdxGraphicsNinePatch * self);
SdxGraphicsSpriteNineSliceSprite* sdx_graphics_sprite_nine_slice_sprite_new (SdxGraphicsNinePatch* patch, gint width, gint height);
gfloat sdx_graphics_nine_patch_GetTotalWidth (SdxGraphicsNinePatch* self);
gfloat sdx_graphics_nine_patch_GetTotalHeight (SdxGraphicsNinePatch* self);
void sdx_font_free (SdxFont * self);
SdxGraphicsSpriteUISprite* sdx_graphics_sprite_ui_sprite_new (SdxGraphicsNinePatch* patch, const gchar* text, SdxFont* font, SDL_Color color, gint width, gint height);
SDL_Surface* sdx_font_Render (SdxFont* self, const gchar* text, SDL_Color fg, SDL_Color* bg);
SdxGraphicsSpriteTextSprite* sdx_graphics_sprite_text_sprite_new (const gchar* text, SdxFont* font, SDL_Color fg, SDL_Color* bg);
void sdx_graphics_sprite_text_sprite_SetText (SdxGraphicsSpriteTextSprite* self, const gchar* text, SdxFont* font, SDL_Color fg, SDL_Color* bg);

extern const SDL_Color SDX_COLOR_White;

GType sdx_graphics_sprite_kind_get_type (void) {
	static volatile gsize sdx_graphics_sprite_kind_type_id__volatile = 0;
	if (g_once_init_enter (&sdx_graphics_sprite_kind_type_id__volatile)) {
		static const GEnumValue values[] = {{SDX_GRAPHICS_SPRITE_KIND_AnimatedSprite, "SDX_GRAPHICS_SPRITE_KIND_AnimatedSprite", "animatedsprite"}, {SDX_GRAPHICS_SPRITE_KIND_TextureSprite, "SDX_GRAPHICS_SPRITE_KIND_TextureSprite", "texturesprite"}, {SDX_GRAPHICS_SPRITE_KIND_AtlasSprite, "SDX_GRAPHICS_SPRITE_KIND_AtlasSprite", "atlassprite"}, {SDX_GRAPHICS_SPRITE_KIND_NineSliceSprite, "SDX_GRAPHICS_SPRITE_KIND_NineSliceSprite", "nineslicesprite"}, {SDX_GRAPHICS_SPRITE_KIND_CompositeSprite, "SDX_GRAPHICS_SPRITE_KIND_CompositeSprite", "compositesprite"}, {SDX_GRAPHICS_SPRITE_KIND_TextSprite, "SDX_GRAPHICS_SPRITE_KIND_TextSprite", "textsprite"}, {0, NULL, NULL}};
		GType sdx_graphics_sprite_kind_type_id;
		sdx_graphics_sprite_kind_type_id = g_enum_register_static ("SdxGraphicsSpriteKind", values);
		g_once_init_leave (&sdx_graphics_sprite_kind_type_id__volatile, sdx_graphics_sprite_kind_type_id);
	}
	return sdx_graphics_sprite_kind_type_id__volatile;
}


SdxGraphicsSprite* sdx_graphics_sprite_retain (SdxGraphicsSprite* self) {
	SdxGraphicsSprite* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_atomic_int_add ((volatile gint *) (&self->ref_count), 1);
	result = self;
	return result;
}


void sdx_graphics_sprite_release (SdxGraphicsSprite* self) {
	gboolean _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = g_atomic_int_dec_and_test ((volatile gint *) (&self->ref_count));
	if (_tmp0_) {
		sdx_graphics_sprite_free (self);
	}
}


/**
 *  Render the sprite on the Video.Renderer context
 *
 * @param x display coordinate
 * @param y display coordinate
 * @param clip optional clipping rectangle
 */
void sdx_graphics_sprite_Render (SdxGraphicsSprite* self, gint x, gint y, SDL_Rect* clip) {
	guint _tmp0_ = 0U;
	SDL_Rect* _tmp1_;
	gint w = 0;
	SdxMathScale _tmp5_;
	gfloat _tmp6_;
	guint _tmp7_ = 0U;
	SDL_Rect* _tmp8_;
	gint h = 0;
	SdxMathScale _tmp12_;
	gfloat _tmp13_;
	gint _tmp14_ = 0;
	gboolean _tmp15_;
	gint _tmp19_ = 0;
	gboolean _tmp20_;
	SDL_Texture* _tmp24_;
	SDL_Color _tmp25_;
	guint8 _tmp26_;
	SDL_Color _tmp27_;
	guint8 _tmp28_;
	SDL_Color _tmp29_;
	guint8 _tmp30_;
	SDL_Texture* _tmp31_;
	SDL_Color _tmp32_;
	guint8 _tmp33_;
	SDL_Renderer* _tmp34_;
	SDL_Texture* _tmp35_;
	SDL_Rect* _tmp36_;
	gint _tmp37_;
	gint _tmp38_;
	gint _tmp39_;
	gint _tmp40_;
	SDL_Rect _tmp41_ = {0};
	gdouble _tmp42_;
	SDL_Point _tmp43_;
	SDL_RendererFlip _tmp44_;
	g_return_if_fail (self != NULL);
	_tmp1_ = clip;
	if (_tmp1_ == NULL) {
		gint _tmp2_;
		_tmp2_ = self->width;
		_tmp0_ = (guint) _tmp2_;
	} else {
		SDL_Rect* _tmp3_;
		guint _tmp4_;
		_tmp3_ = clip;
		_tmp4_ = (*_tmp3_).w;
		_tmp0_ = _tmp4_;
	}
	_tmp5_ = self->scale;
	_tmp6_ = _tmp5_.x;
	w = (gint) (_tmp0_ * _tmp6_);
	_tmp8_ = clip;
	if (_tmp8_ == NULL) {
		gint _tmp9_;
		_tmp9_ = self->height;
		_tmp7_ = (guint) _tmp9_;
	} else {
		SDL_Rect* _tmp10_;
		guint _tmp11_;
		_tmp10_ = clip;
		_tmp11_ = (*_tmp10_).h;
		_tmp7_ = _tmp11_;
	}
	_tmp12_ = self->scale;
	_tmp13_ = _tmp12_.y;
	h = (gint) (_tmp7_ * _tmp13_);
	_tmp15_ = self->centered;
	if (_tmp15_) {
		gint _tmp16_;
		gint _tmp17_;
		_tmp16_ = x;
		_tmp17_ = w;
		_tmp14_ = _tmp16_ - (_tmp17_ / 2);
	} else {
		gint _tmp18_;
		_tmp18_ = x;
		_tmp14_ = _tmp18_;
	}
	x = _tmp14_;
	_tmp20_ = self->centered;
	if (_tmp20_) {
		gint _tmp21_;
		gint _tmp22_;
		_tmp21_ = y;
		_tmp22_ = h;
		_tmp19_ = _tmp21_ - (_tmp22_ / 2);
	} else {
		gint _tmp23_;
		_tmp23_ = y;
		_tmp19_ = _tmp23_;
	}
	y = _tmp19_;
	_tmp24_ = self->texture;
	_tmp25_ = self->color;
	_tmp26_ = _tmp25_.r;
	_tmp27_ = self->color;
	_tmp28_ = _tmp27_.g;
	_tmp29_ = self->color;
	_tmp30_ = _tmp29_.b;
	SDL_SetTextureColorMod (_tmp24_, _tmp26_, _tmp28_, _tmp30_);
	_tmp31_ = self->texture;
	_tmp32_ = self->color;
	_tmp33_ = _tmp32_.a;
	SDL_SetTextureAlphaMod (_tmp31_, _tmp33_);
	_tmp34_ = sdx_renderer;
	_tmp35_ = self->texture;
	_tmp36_ = clip;
	_tmp37_ = x;
	_tmp38_ = y;
	_tmp39_ = w;
	_tmp40_ = h;
	_tmp41_.x = _tmp37_;
	_tmp41_.y = _tmp38_;
	_tmp41_.w = (guint) _tmp39_;
	_tmp41_.h = (guint) _tmp40_;
	_tmp42_ = self->angle;
	_tmp43_ = self->center;
	_tmp44_ = self->flip;
	SDL_RenderCopyEx (_tmp34_, _tmp35_, _tmp36_, &_tmp41_, _tmp42_, &_tmp43_, _tmp44_);
}


void sdx_graphics_sprite_Copy (SdxGraphicsSprite* self, SDL_Rect* src, SDL_Rect* dest) {
	SDL_Renderer* _tmp0_;
	SDL_Texture* _tmp1_;
	SDL_Rect* _tmp2_;
	SDL_Rect* _tmp3_;
	g_return_if_fail (self != NULL);
	_tmp0_ = sdx_renderer;
	_tmp1_ = self->texture;
	_tmp2_ = src;
	_tmp3_ = dest;
	SDL_RenderCopy (_tmp0_, _tmp1_, _tmp2_, _tmp3_);
}


static gpointer _sdx_graphics_sprite_retain0 (gpointer self) {
	return self ? sdx_graphics_sprite_retain (self) : NULL;
}


SdxGraphicsSprite* sdx_graphics_sprite_SetColor (SdxGraphicsSprite* self, SDL_Color color) {
	SdxGraphicsSprite* result = NULL;
	SDL_Color _tmp0_;
	SdxGraphicsSprite* _tmp1_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = color;
	self->color = _tmp0_;
	_tmp1_ = _sdx_graphics_sprite_retain0 (self);
	result = _tmp1_;
	return result;
}


SdxGraphicsSprite* sdx_graphics_sprite_SetScale (SdxGraphicsSprite* self, gfloat x, gfloat y) {
	SdxGraphicsSprite* result = NULL;
	gfloat _tmp0_;
	gfloat _tmp1_;
	SdxMathScale _tmp2_ = {0};
	SdxGraphicsSprite* _tmp3_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = x;
	_tmp1_ = y;
	_tmp2_.x = _tmp0_;
	_tmp2_.y = _tmp1_;
	self->scale = _tmp2_;
	_tmp3_ = _sdx_graphics_sprite_retain0 (self);
	result = _tmp3_;
	return result;
}


SdxGraphicsSprite* sdx_graphics_sprite_SetPosition (SdxGraphicsSprite* self, gint x, gint y) {
	SdxGraphicsSprite* result = NULL;
	gint _tmp0_;
	gint _tmp1_;
	SdxGraphicsSprite* _tmp2_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = x;
	self->x = _tmp0_;
	_tmp1_ = y;
	self->y = _tmp1_;
	_tmp2_ = _sdx_graphics_sprite_retain0 (self);
	result = _tmp2_;
	return result;
}


SdxGraphicsSprite* sdx_graphics_sprite_SetCentered (SdxGraphicsSprite* self, gboolean value) {
	SdxGraphicsSprite* result = NULL;
	gboolean _tmp0_;
	gboolean _tmp1_;
	SdxGraphicsSprite* _tmp6_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = value;
	self->centered = _tmp0_;
	_tmp1_ = self->centered;
	if (_tmp1_) {
		gint _tmp2_;
		gint _tmp3_;
		SDL_Point _tmp4_ = {0};
		_tmp2_ = self->width;
		_tmp3_ = self->height;
		_tmp4_.x = _tmp2_ / 2;
		_tmp4_.y = _tmp3_ / 2;
		self->center = _tmp4_;
	} else {
		SDL_Point _tmp5_ = {0};
		_tmp5_.x = 0;
		_tmp5_.y = 0;
		self->center = _tmp5_;
	}
	_tmp6_ = _sdx_graphics_sprite_retain0 (self);
	result = _tmp6_;
	return result;
}


SdxGraphicsSprite* sdx_graphics_sprite_new (void) {
	SdxGraphicsSprite* self;
	self = g_slice_new0 (SdxGraphicsSprite);
	sdx_graphics_sprite_instance_init (self);
	return self;
}


gint sdx_graphics_sprite_get_Width (SdxGraphicsSprite* self) {
	gint result;
	gint _tmp0_;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = self->width;
	result = _tmp0_;
	return result;
}


void sdx_graphics_sprite_set_Width (SdxGraphicsSprite* self, gint value) {
	gint _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	self->width = _tmp0_;
}


/**
 * Animated Sprite
 * 
 * For each cell in spritesheet, draw the image from a cell
 * 
 * @param path to sprite sheet
 * @param width count of sprites horizontally on sheet
 * @param height count of sprites vertially on sheet
 */
SdxGraphicsSpriteAnimatedSprite* sdx_graphics_sprite_animated_sprite_new (const gchar* path, gint width, gint height) {
	SdxGraphicsSpriteAnimatedSprite* self;
	const gchar* _tmp0_;
	gint _tmp1_;
	gint _tmp2_;
	gint _tmp3_;
	gint _tmp4_;
	gint _tmp5_;
	SDL_Point _tmp6_ = {0};
	const gchar* _tmp7_;
	gchar* _tmp8_;
	g_return_val_if_fail (path != NULL, NULL);
	self = (SdxGraphicsSpriteAnimatedSprite*) sdx_graphics_sprite_new ();
	_tmp0_ = path;
	_tmp1_ = sdx_graphics_surface_cached_surface_IndexOfPath (_tmp0_);
	((SdxGraphicsSprite*) self)->index = _tmp1_;
	_tmp2_ = height;
	((SdxGraphicsSprite*) self)->height = _tmp2_;
	_tmp3_ = width;
	((SdxGraphicsSprite*) self)->width = _tmp3_;
	_tmp4_ = width;
	_tmp5_ = height;
	_tmp6_.x = _tmp4_ / 2;
	_tmp6_.y = _tmp5_ / 2;
	((SdxGraphicsSprite*) self)->center = _tmp6_;
	_tmp7_ = path;
	_tmp8_ = g_strdup (_tmp7_);
	_g_free0 (((SdxGraphicsSprite*) self)->path);
	((SdxGraphicsSprite*) self)->path = _tmp8_;
	((SdxGraphicsSprite*) self)->kind = SDX_GRAPHICS_SPRITE_KIND_AnimatedSprite;
	sdx_graphics_sprite_animated_sprite_SetFrame (self, 0);
	return self;
}


/**
 * setFrame
 * 
 * @param frame index of frame to draw
 */
void sdx_graphics_sprite_animated_sprite_SetFrame (SdxGraphicsSpriteAnimatedSprite* self, gint frame) {
	gint _tmp0_;
	gint _tmp1_;
	gint _tmp2_;
	guint32 rmask = 0U;
	guint32 gmask = 0U;
	guint32 bmask = 0U;
	guint32 amask = 0U;
	gint wf = 0;
	SdxGraphicsSurface** _tmp3_;
	gint _tmp3__length1;
	gint _tmp4_;
	SdxGraphicsSurface* _tmp5_;
	SDL_Surface* _tmp6_;
	gint _tmp7_;
	gint _tmp8_;
	gint hf = 0;
	SdxGraphicsSurface** _tmp9_;
	gint _tmp9__length1;
	gint _tmp10_;
	SdxGraphicsSurface* _tmp11_;
	SDL_Surface* _tmp12_;
	gint _tmp13_;
	gint _tmp14_;
	gint _tmp15_;
	gint _tmp16_;
	gint _tmp17_;
	gint _tmp18_;
	gint _tmp19_;
	gint _tmp20_;
	SDL_Surface* surface = NULL;
	gint _tmp21_;
	gint _tmp22_;
	guint32 _tmp23_;
	guint32 _tmp24_;
	guint32 _tmp25_;
	guint32 _tmp26_;
	SDL_Surface* _tmp27_;
	SdxGraphicsSurface** _tmp28_;
	gint _tmp28__length1;
	gint _tmp29_;
	SdxGraphicsSurface* _tmp30_;
	SDL_Surface* _tmp31_;
	gint _tmp32_;
	gint _tmp33_;
	gint _tmp34_;
	gint _tmp35_;
	SDL_Rect _tmp36_ = {0};
	SDL_Surface* _tmp37_;
	gint _tmp38_;
	gint _tmp39_;
	SDL_Rect _tmp40_ = {0};
	SDL_Renderer* _tmp41_;
	SDL_Surface* _tmp42_;
	SDL_Texture* _tmp43_;
	g_return_if_fail (self != NULL);
	_tmp0_ = frame;
	_tmp1_ = ((SdxGraphicsSprite*) self)->frame;
	if (_tmp0_ == _tmp1_) {
		return;
	}
	_tmp2_ = frame;
	((SdxGraphicsSprite*) self)->frame = _tmp2_;
	rmask = (guint32) 0x000000ff;
	gmask = (guint32) 0x0000ff00;
	bmask = (guint32) 0x00ff0000;
	amask = (guint32) 0xff000000LL;
	_tmp3_ = sdx_graphics_surface_cached_surface_cache;
	_tmp3__length1 = sdx_graphics_surface_cached_surface_cache_length1;
	_tmp4_ = ((SdxGraphicsSprite*) self)->index;
	_tmp5_ = _tmp3_[_tmp4_];
	_tmp6_ = _tmp5_->surface;
	_tmp7_ = _tmp6_->w;
	_tmp8_ = ((SdxGraphicsSprite*) self)->width;
	wf = _tmp7_ / _tmp8_;
	_tmp9_ = sdx_graphics_surface_cached_surface_cache;
	_tmp9__length1 = sdx_graphics_surface_cached_surface_cache_length1;
	_tmp10_ = ((SdxGraphicsSprite*) self)->index;
	_tmp11_ = _tmp9_[_tmp10_];
	_tmp12_ = _tmp11_->surface;
	_tmp13_ = _tmp12_->h;
	_tmp14_ = ((SdxGraphicsSprite*) self)->height;
	hf = _tmp13_ / _tmp14_;
	_tmp15_ = frame;
	_tmp16_ = wf;
	_tmp17_ = ((SdxGraphicsSprite*) self)->width;
	((SdxGraphicsSprite*) self)->x = (_tmp15_ % _tmp16_) * _tmp17_;
	_tmp18_ = frame;
	_tmp19_ = wf;
	_tmp20_ = ((SdxGraphicsSprite*) self)->height;
	((SdxGraphicsSprite*) self)->y = ((gint) (_tmp18_ / _tmp19_)) * _tmp20_;
	_tmp21_ = ((SdxGraphicsSprite*) self)->width;
	_tmp22_ = ((SdxGraphicsSprite*) self)->height;
	_tmp23_ = rmask;
	_tmp24_ = gmask;
	_tmp25_ = bmask;
	_tmp26_ = amask;
	_tmp27_ = SDL_CreateRGBSurface ((guint32) 0, _tmp21_, _tmp22_, 32, _tmp23_, _tmp24_, _tmp25_, _tmp26_);
	surface = _tmp27_;
	_tmp28_ = sdx_graphics_surface_cached_surface_cache;
	_tmp28__length1 = sdx_graphics_surface_cached_surface_cache_length1;
	_tmp29_ = ((SdxGraphicsSprite*) self)->index;
	_tmp30_ = _tmp28_[_tmp29_];
	_tmp31_ = _tmp30_->surface;
	_tmp32_ = ((SdxGraphicsSprite*) self)->x;
	_tmp33_ = ((SdxGraphicsSprite*) self)->y;
	_tmp34_ = ((SdxGraphicsSprite*) self)->width;
	_tmp35_ = ((SdxGraphicsSprite*) self)->height;
	_tmp36_.x = _tmp32_;
	_tmp36_.y = _tmp33_;
	_tmp36_.w = (guint) _tmp34_;
	_tmp36_.h = (guint) _tmp35_;
	_tmp37_ = surface;
	_tmp38_ = ((SdxGraphicsSprite*) self)->width;
	_tmp39_ = ((SdxGraphicsSprite*) self)->height;
	_tmp40_.x = 0;
	_tmp40_.y = 0;
	_tmp40_.w = (guint) _tmp38_;
	_tmp40_.h = (guint) _tmp39_;
	SDL_BlitScaled (_tmp31_, &_tmp36_, _tmp37_, &_tmp40_);
	_tmp41_ = sdx_renderer;
	_tmp42_ = surface;
	_tmp43_ = SDL_CreateTextureFromSurface (_tmp41_, _tmp42_);
	_SDL_DestroyTexture0 (((SdxGraphicsSprite*) self)->texture);
	((SdxGraphicsSprite*) self)->texture = _tmp43_;
	_SDL_FreeSurface0 (surface);
}


/**
 * TextureSprite
 * 
 * Simple sprite, 1 image per file
 * @param path to single surface
 */
SdxGraphicsSpriteTextureSprite* sdx_graphics_sprite_texture_sprite_new (const gchar* path) {
	SdxGraphicsSpriteTextureSprite* self;
	gint index = 0;
	const gchar* _tmp0_;
	gint _tmp1_;
	SDL_Renderer* _tmp2_;
	SdxGraphicsSurface** _tmp3_;
	gint _tmp3__length1;
	gint _tmp4_;
	SdxGraphicsSurface* _tmp5_;
	SDL_Surface* _tmp6_;
	SDL_Texture* _tmp7_;
	SDL_Texture* _tmp8_;
	SDL_Texture* _tmp11_;
	SdxGraphicsSurface** _tmp12_;
	gint _tmp12__length1;
	gint _tmp13_;
	SdxGraphicsSurface* _tmp14_;
	gint _tmp15_;
	gint _tmp16_;
	SdxGraphicsSurface** _tmp17_;
	gint _tmp17__length1;
	gint _tmp18_;
	SdxGraphicsSurface* _tmp19_;
	gint _tmp20_;
	gint _tmp21_;
	gint _tmp22_;
	gint _tmp23_;
	SDL_Point _tmp24_ = {0};
	const gchar* _tmp25_;
	gchar* _tmp26_;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (path != NULL, NULL);
	self = (SdxGraphicsSpriteTextureSprite*) sdx_graphics_sprite_new ();
	_tmp0_ = path;
	_tmp1_ = sdx_graphics_surface_cached_surface_IndexOfPath (_tmp0_);
	index = _tmp1_;
	_tmp2_ = sdx_renderer;
	_tmp3_ = sdx_graphics_surface_cached_surface_cache;
	_tmp3__length1 = sdx_graphics_surface_cached_surface_cache_length1;
	_tmp4_ = index;
	_tmp5_ = _tmp3_[_tmp4_];
	_tmp6_ = _tmp5_->surface;
	_tmp7_ = SDL_CreateTextureFromSurface (_tmp2_, _tmp6_);
	_SDL_DestroyTexture0 (((SdxGraphicsSprite*) self)->texture);
	((SdxGraphicsSprite*) self)->texture = _tmp7_;
	_tmp8_ = ((SdxGraphicsSprite*) self)->texture;
	if (_tmp8_ == NULL) {
		const gchar* _tmp9_;
		GError* _tmp10_;
		_tmp9_ = path;
		_tmp10_ = g_error_new_literal (SDX_SDL_EXCEPTION, SDX_SDL_EXCEPTION_UnableToLoadTexture, _tmp9_);
		_inner_error_ = _tmp10_;
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	_tmp11_ = ((SdxGraphicsSprite*) self)->texture;
	SDL_SetTextureBlendMode (_tmp11_, SDL_BLENDMODE_BLEND);
	_tmp12_ = sdx_graphics_surface_cached_surface_cache;
	_tmp12__length1 = sdx_graphics_surface_cached_surface_cache_length1;
	_tmp13_ = index;
	_tmp14_ = _tmp12_[_tmp13_];
	_tmp15_ = sdx_graphics_surface_get_width (_tmp14_);
	_tmp16_ = _tmp15_;
	((SdxGraphicsSprite*) self)->width = _tmp16_;
	_tmp17_ = sdx_graphics_surface_cached_surface_cache;
	_tmp17__length1 = sdx_graphics_surface_cached_surface_cache_length1;
	_tmp18_ = index;
	_tmp19_ = _tmp17_[_tmp18_];
	_tmp20_ = sdx_graphics_surface_get_height (_tmp19_);
	_tmp21_ = _tmp20_;
	((SdxGraphicsSprite*) self)->height = _tmp21_;
	_tmp22_ = ((SdxGraphicsSprite*) self)->width;
	_tmp23_ = ((SdxGraphicsSprite*) self)->height;
	_tmp24_.x = _tmp22_ / 2;
	_tmp24_.y = _tmp23_ / 2;
	((SdxGraphicsSprite*) self)->center = _tmp24_;
	_tmp25_ = path;
	_tmp26_ = g_strdup (_tmp25_);
	_g_free0 (((SdxGraphicsSprite*) self)->path);
	((SdxGraphicsSprite*) self)->path = _tmp26_;
	((SdxGraphicsSprite*) self)->kind = SDX_GRAPHICS_SPRITE_KIND_TextureSprite;
	return self;
}


/**
 * AtlasSprite
 * 
 * @param region to load sprite from
 * 
 */
SdxGraphicsSpriteAtlasSprite* sdx_graphics_sprite_atlas_sprite_new (SdxGraphicsAtlasRegion* region) {
	SdxGraphicsSpriteAtlasSprite* self;
	gchar* path = NULL;
	SdxGraphicsAtlasRegion* _tmp0_;
	SdxGraphicsSurfaceTextureSurface* _tmp1_;
	const gchar* _tmp2_;
	gchar* _tmp3_;
	gint index = 0;
	SdxGraphicsAtlasRegion* _tmp4_;
	SdxGraphicsSurfaceTextureSurface* _tmp5_;
	const gchar* _tmp6_;
	gint _tmp7_;
	guint32 rmask = 0U;
	guint32 gmask = 0U;
	guint32 bmask = 0U;
	guint32 amask = 0U;
	gint x = 0;
	SdxGraphicsAtlasRegion* _tmp8_;
	gint _tmp9_;
	gint y = 0;
	SdxGraphicsAtlasRegion* _tmp10_;
	gint _tmp11_;
	gint w = 0;
	SdxGraphicsAtlasRegion* _tmp12_;
	gint _tmp13_;
	gint h = 0;
	SdxGraphicsAtlasRegion* _tmp14_;
	gint _tmp15_;
	SDL_Surface* surface = NULL;
	SDL_Surface* _tmp16_;
	SdxGraphicsSurface** _tmp17_;
	gint _tmp17__length1;
	SdxGraphicsSurface* _tmp18_;
	SDL_Surface* _tmp19_;
	SDL_Rect _tmp20_ = {0};
	SDL_Rect _tmp21_ = {0};
	SDL_Renderer* _tmp22_;
	SDL_Texture* _tmp23_;
	gint _tmp24_;
	gint _tmp25_;
	SDL_Point _tmp26_ = {0};
	SdxGraphicsAtlasRegion* _tmp27_;
	const gchar* _tmp28_;
	gchar* _tmp29_;
	g_return_val_if_fail (region != NULL, NULL);
	self = (SdxGraphicsSpriteAtlasSprite*) sdx_graphics_sprite_new ();
	_tmp0_ = region;
	_tmp1_ = ((SdxGraphicsTextureRegion*) _tmp0_)->texture;
	_tmp2_ = ((SdxGraphicsSurface*) _tmp1_)->path;
	_tmp3_ = g_strdup (_tmp2_);
	path = _tmp3_;
	_tmp4_ = region;
	_tmp5_ = ((SdxGraphicsTextureRegion*) _tmp4_)->texture;
	_tmp6_ = ((SdxGraphicsSurface*) _tmp5_)->path;
	_tmp7_ = sdx_graphics_surface_cached_surface_IndexOfPath (_tmp6_);
	index = _tmp7_;
	rmask = (guint32) 0x000000ff;
	gmask = (guint32) 0x0000ff00;
	bmask = (guint32) 0x00ff0000;
	amask = (guint32) 0xff000000LL;
	_tmp8_ = region;
	_tmp9_ = ((SdxGraphicsTextureRegion*) _tmp8_)->top;
	x = _tmp9_;
	_tmp10_ = region;
	_tmp11_ = ((SdxGraphicsTextureRegion*) _tmp10_)->left;
	y = _tmp11_;
	_tmp12_ = region;
	_tmp13_ = ((SdxGraphicsTextureRegion*) _tmp12_)->width;
	w = _tmp13_;
	_tmp14_ = region;
	_tmp15_ = ((SdxGraphicsTextureRegion*) _tmp14_)->height;
	h = _tmp15_;
	_tmp16_ = SDL_CreateRGBSurface ((guint32) 0, w, h, 32, rmask, gmask, bmask, amask);
	surface = _tmp16_;
	_tmp17_ = sdx_graphics_surface_cached_surface_cache;
	_tmp17__length1 = sdx_graphics_surface_cached_surface_cache_length1;
	_tmp18_ = _tmp17_[index];
	_tmp19_ = _tmp18_->surface;
	_tmp20_.x = x;
	_tmp20_.y = y;
	_tmp20_.w = (guint) w;
	_tmp20_.h = (guint) h;
	_tmp21_.x = 0;
	_tmp21_.y = 0;
	_tmp21_.w = (guint) w;
	_tmp21_.h = (guint) h;
	SDL_BlitScaled (_tmp19_, &_tmp20_, surface, &_tmp21_);
	_tmp22_ = sdx_renderer;
	_tmp23_ = SDL_CreateTextureFromSurface (_tmp22_, surface);
	_SDL_DestroyTexture0 (((SdxGraphicsSprite*) self)->texture);
	((SdxGraphicsSprite*) self)->texture = _tmp23_;
	((SdxGraphicsSprite*) self)->width = w;
	((SdxGraphicsSprite*) self)->height = h;
	_tmp24_ = ((SdxGraphicsSprite*) self)->width;
	_tmp25_ = ((SdxGraphicsSprite*) self)->height;
	_tmp26_.x = _tmp24_ / 2;
	_tmp26_.y = _tmp25_ / 2;
	((SdxGraphicsSprite*) self)->center = _tmp26_;
	_tmp27_ = region;
	_tmp28_ = ((SdxGraphicsTextureRegion*) _tmp27_)->name;
	_tmp29_ = g_strdup (_tmp28_);
	_g_free0 (((SdxGraphicsSprite*) self)->path);
	((SdxGraphicsSprite*) self)->path = _tmp29_;
	((SdxGraphicsSprite*) self)->kind = SDX_GRAPHICS_SPRITE_KIND_AtlasSprite;
	_SDL_FreeSurface0 (surface);
	_g_free0 (path);
	return self;
}


/**
 * CompositeSprite
 * 
 * @param path to custom atlas
 * @param builder factory delegate
 * @param x offset in pixels
 * @param y offset in pixels
 * 
 */
SdxGraphicsSpriteCompositeSprite* sdx_graphics_sprite_composite_sprite_new (const gchar* path, SdxGraphicsCompositor builder, void* builder_target, gint x, gint y) {
	SdxGraphicsSpriteCompositeSprite* self;
	gint h = 0;
	gint w = 0;
	SdxGraphicsCompositor _tmp0_;
	void* _tmp0__target;
	gint _tmp1_;
	gint _tmp2_;
	gint _tmp3_;
	SdxGraphicsBlit* _tmp4_;
	gint index = 0;
	const gchar* _tmp19_;
	gint _tmp20_;
	guint32 rmask = 0U;
	guint32 gmask = 0U;
	guint32 bmask = 0U;
	guint32 amask = 0U;
	SDL_Surface* surface = NULL;
	gint _tmp21_;
	gint _tmp22_;
	guint32 _tmp23_;
	guint32 _tmp24_;
	guint32 _tmp25_;
	guint32 _tmp26_;
	SDL_Surface* _tmp27_;
	SdxGraphicsCompositor _tmp28_;
	void* _tmp28__target;
	gint _tmp29_;
	gint _tmp30_;
	gint _tmp31_;
	SdxGraphicsBlit* _tmp32_;
	SDL_Renderer* _tmp42_;
	SDL_Surface* _tmp43_;
	SDL_Texture* _tmp44_;
	gint _tmp45_;
	gint _tmp46_;
	gint _tmp47_;
	gint _tmp48_;
	SDL_Point _tmp49_ = {0};
	const gchar* _tmp50_;
	gchar* _tmp51_;
	g_return_val_if_fail (path != NULL, NULL);
	self = (SdxGraphicsSpriteCompositeSprite*) sdx_graphics_sprite_new ();
	h = 0;
	w = 0;
	_tmp0_ = builder;
	_tmp0__target = builder_target;
	_tmp1_ = x;
	_tmp2_ = y;
	_tmp4_ = _tmp0_ (_tmp1_, _tmp2_, &_tmp3_, _tmp0__target);
	{
		SdxGraphicsBlit* segment_collection = NULL;
		gint segment_collection_length1 = 0;
		gint _segment_collection_size_ = 0;
		gint segment_it = 0;
		segment_collection = _tmp4_;
		segment_collection_length1 = _tmp3_;
		for (segment_it = 0; segment_it < _tmp3_; segment_it = segment_it + 1) {
			SdxGraphicsBlit segment = {0};
			segment = segment_collection[segment_it];
			{
				SdxGraphicsBlit _tmp5_;
				SDL_Rect _tmp6_;
				guint _tmp7_;
				gint _tmp8_;
				SdxGraphicsBlit _tmp12_;
				SDL_Rect _tmp13_;
				guint _tmp14_;
				gint _tmp15_;
				_tmp5_ = segment;
				_tmp6_ = _tmp5_.dest;
				_tmp7_ = _tmp6_.h;
				_tmp8_ = h;
				if (_tmp7_ > ((guint) _tmp8_)) {
					SdxGraphicsBlit _tmp9_;
					SDL_Rect _tmp10_;
					guint _tmp11_;
					_tmp9_ = segment;
					_tmp10_ = _tmp9_.dest;
					_tmp11_ = _tmp10_.h;
					h = (gint) _tmp11_;
				}
				_tmp12_ = segment;
				_tmp13_ = _tmp12_.dest;
				_tmp14_ = _tmp13_.w;
				_tmp15_ = w;
				if (_tmp14_ > ((guint) _tmp15_)) {
					SdxGraphicsBlit _tmp16_;
					SDL_Rect _tmp17_;
					guint _tmp18_;
					_tmp16_ = segment;
					_tmp17_ = _tmp16_.dest;
					_tmp18_ = _tmp17_.w;
					w = (gint) _tmp18_;
				}
			}
		}
		segment_collection = (g_free (segment_collection), NULL);
	}
	_tmp19_ = path;
	_tmp20_ = sdx_graphics_surface_cached_surface_IndexOfPath (_tmp19_);
	index = _tmp20_;
	rmask = (guint32) 0x000000ff;
	gmask = (guint32) 0x0000ff00;
	bmask = (guint32) 0x00ff0000;
	amask = (guint32) 0xff000000LL;
	_tmp21_ = h;
	_tmp22_ = w;
	_tmp23_ = rmask;
	_tmp24_ = gmask;
	_tmp25_ = bmask;
	_tmp26_ = amask;
	_tmp27_ = SDL_CreateRGBSurface ((guint32) 0, _tmp21_, _tmp22_, 32, _tmp23_, _tmp24_, _tmp25_, _tmp26_);
	surface = _tmp27_;
	_tmp28_ = builder;
	_tmp28__target = builder_target;
	_tmp29_ = h;
	_tmp30_ = w;
	_tmp32_ = _tmp28_ (_tmp29_ / 2, _tmp30_ / 2, &_tmp31_, _tmp28__target);
	{
		SdxGraphicsBlit* segment_collection = NULL;
		gint segment_collection_length1 = 0;
		gint _segment_collection_size_ = 0;
		gint segment_it = 0;
		segment_collection = _tmp32_;
		segment_collection_length1 = _tmp31_;
		for (segment_it = 0; segment_it < _tmp31_; segment_it = segment_it + 1) {
			SdxGraphicsBlit segment = {0};
			segment = segment_collection[segment_it];
			{
				SdxGraphicsSurface** _tmp33_;
				gint _tmp33__length1;
				gint _tmp34_;
				SdxGraphicsSurface* _tmp35_;
				SDL_Surface* _tmp36_;
				SdxGraphicsBlit _tmp37_;
				SDL_Rect _tmp38_;
				SDL_Surface* _tmp39_;
				SdxGraphicsBlit _tmp40_;
				SDL_Rect _tmp41_;
				_tmp33_ = sdx_graphics_surface_cached_surface_cache;
				_tmp33__length1 = sdx_graphics_surface_cached_surface_cache_length1;
				_tmp34_ = index;
				_tmp35_ = _tmp33_[_tmp34_];
				_tmp36_ = _tmp35_->surface;
				_tmp37_ = segment;
				_tmp38_ = _tmp37_.source;
				_tmp39_ = surface;
				_tmp40_ = segment;
				_tmp41_ = _tmp40_.dest;
				SDL_BlitScaled (_tmp36_, &_tmp38_, _tmp39_, &_tmp41_);
			}
		}
		segment_collection = (g_free (segment_collection), NULL);
	}
	_tmp42_ = sdx_renderer;
	_tmp43_ = surface;
	_tmp44_ = SDL_CreateTextureFromSurface (_tmp42_, _tmp43_);
	_SDL_DestroyTexture0 (((SdxGraphicsSprite*) self)->texture);
	((SdxGraphicsSprite*) self)->texture = _tmp44_;
	_tmp45_ = w;
	((SdxGraphicsSprite*) self)->width = _tmp45_;
	_tmp46_ = h;
	((SdxGraphicsSprite*) self)->height = _tmp46_;
	_tmp47_ = ((SdxGraphicsSprite*) self)->width;
	_tmp48_ = ((SdxGraphicsSprite*) self)->height;
	_tmp49_.x = _tmp47_ / 2;
	_tmp49_.y = _tmp48_ / 2;
	((SdxGraphicsSprite*) self)->center = _tmp49_;
	_tmp50_ = path;
	_tmp51_ = g_strdup (_tmp50_);
	_g_free0 (((SdxGraphicsSprite*) self)->path);
	((SdxGraphicsSprite*) self)->path = _tmp51_;
	((SdxGraphicsSprite*) self)->kind = SDX_GRAPHICS_SPRITE_KIND_CompositeSprite;
	_SDL_FreeSurface0 (surface);
	return self;
}


/**
 * CompositeSprite
 * 
 * @param patch 9slice object
 * @param width in pixels
 * @param height in pixels
 * 
 */
SdxGraphicsSpriteNineSliceSprite* sdx_graphics_sprite_nine_slice_sprite_new (SdxGraphicsNinePatch* patch, gint width, gint height) {
	SdxGraphicsSpriteNineSliceSprite* self;
	gint w = 0;
	SdxGraphicsNinePatch* _tmp0_;
	gfloat _tmp1_;
	gint _tmp2_;
	gint h = 0;
	SdxGraphicsNinePatch* _tmp3_;
	gfloat _tmp4_;
	gint _tmp5_;
	guint32 rmask = 0U;
	guint32 gmask = 0U;
	guint32 bmask = 0U;
	guint32 amask = 0U;
	SDL_Rect* dest = NULL;
	SDL_Rect* _tmp6_;
	gint dest_length1;
	gint _dest_size_;
	SDL_Surface* surface = NULL;
	gint _tmp7_;
	gint _tmp8_;
	guint32 _tmp9_;
	guint32 _tmp10_;
	guint32 _tmp11_;
	guint32 _tmp12_;
	SDL_Surface* _tmp13_;
	gint i = 0;
	guint offsetWidth = 0U;
	gint _tmp41_;
	SDL_Rect* _tmp42_;
	gint _tmp42__length1;
	SDL_Rect _tmp43_;
	guint _tmp44_;
	SDL_Rect* _tmp45_;
	gint _tmp45__length1;
	SDL_Rect _tmp46_;
	guint _tmp47_;
	SDL_Rect* _tmp48_;
	gint _tmp48__length1;
	SDL_Rect _tmp49_;
	guint _tmp50_;
	guint offsetHeight = 0U;
	gint _tmp51_;
	SDL_Rect* _tmp52_;
	gint _tmp52__length1;
	SDL_Rect _tmp53_;
	guint _tmp54_;
	SDL_Rect* _tmp55_;
	gint _tmp55__length1;
	SDL_Rect _tmp56_;
	guint _tmp57_;
	SDL_Rect* _tmp58_;
	gint _tmp58__length1;
	SDL_Rect _tmp59_;
	guint _tmp60_;
	SDL_Rect* _tmp61_;
	gint _tmp61__length1;
	SDL_Rect* _tmp62_;
	gint _tmp62__length1;
	guint _tmp63_;
	guint _tmp64_;
	SDL_Rect* _tmp65_;
	gint _tmp65__length1;
	SDL_Rect* _tmp66_;
	gint _tmp66__length1;
	guint _tmp67_;
	guint _tmp68_;
	SDL_Rect* _tmp69_;
	gint _tmp69__length1;
	SDL_Rect* _tmp70_;
	gint _tmp70__length1;
	guint _tmp71_;
	guint _tmp72_;
	SDL_Rect* _tmp73_;
	gint _tmp73__length1;
	SDL_Rect* _tmp74_;
	gint _tmp74__length1;
	gint _tmp75_;
	guint _tmp76_;
	SDL_Rect* _tmp77_;
	gint _tmp77__length1;
	SDL_Rect* _tmp78_;
	gint _tmp78__length1;
	gint _tmp79_;
	guint _tmp80_;
	SDL_Rect* _tmp81_;
	gint _tmp81__length1;
	SDL_Rect* _tmp82_;
	gint _tmp82__length1;
	gint _tmp83_;
	guint _tmp84_;
	SDL_Rect* _tmp85_;
	gint _tmp85__length1;
	SDL_Rect* _tmp86_;
	gint _tmp86__length1;
	guint _tmp87_;
	guint _tmp88_;
	SDL_Rect* _tmp89_;
	gint _tmp89__length1;
	SDL_Rect* _tmp90_;
	gint _tmp90__length1;
	guint _tmp91_;
	guint _tmp92_;
	SDL_Rect* _tmp93_;
	gint _tmp93__length1;
	SDL_Rect* _tmp94_;
	gint _tmp94__length1;
	guint _tmp95_;
	guint _tmp96_;
	SDL_Rect* _tmp97_;
	gint _tmp97__length1;
	SDL_Rect* _tmp98_;
	gint _tmp98__length1;
	gint _tmp99_;
	guint _tmp100_;
	SDL_Rect* _tmp101_;
	gint _tmp101__length1;
	SDL_Rect* _tmp102_;
	gint _tmp102__length1;
	gint _tmp103_;
	guint _tmp104_;
	SDL_Rect* _tmp105_;
	gint _tmp105__length1;
	SDL_Rect* _tmp106_;
	gint _tmp106__length1;
	gint _tmp107_;
	guint _tmp108_;
	SdxGraphicsNinePatch* _tmp109_;
	SDL_Renderer* _tmp119_;
	SDL_Surface* _tmp120_;
	SDL_Texture* _tmp121_;
	gint _tmp122_;
	gint _tmp123_;
	gint _tmp124_;
	gint _tmp125_;
	SDL_Point _tmp126_ = {0};
	g_return_val_if_fail (patch != NULL, NULL);
	self = (SdxGraphicsSpriteNineSliceSprite*) sdx_graphics_sprite_new ();
	_tmp0_ = patch;
	_tmp1_ = sdx_graphics_nine_patch_GetTotalWidth (_tmp0_);
	_tmp2_ = width;
	w = ((gint) _tmp1_) + _tmp2_;
	_tmp3_ = patch;
	_tmp4_ = sdx_graphics_nine_patch_GetTotalHeight (_tmp3_);
	_tmp5_ = height;
	h = ((gint) _tmp4_) + _tmp5_;
	rmask = (guint32) 0x000000ff;
	gmask = (guint32) 0x0000ff00;
	bmask = (guint32) 0x00ff0000;
	amask = (guint32) 0xff000000LL;
	_tmp6_ = g_new0 (SDL_Rect, 9);
	dest = _tmp6_;
	dest_length1 = 9;
	_dest_size_ = dest_length1;
	_tmp7_ = w;
	_tmp8_ = h;
	_tmp9_ = rmask;
	_tmp10_ = gmask;
	_tmp11_ = bmask;
	_tmp12_ = amask;
	_tmp13_ = SDL_CreateRGBSurface ((guint32) 0, _tmp7_, _tmp8_, 32, _tmp9_, _tmp10_, _tmp11_, _tmp12_);
	surface = _tmp13_;
	i = 0;
	{
		gboolean _tmp14_ = FALSE;
		i = 0;
		_tmp14_ = TRUE;
		while (TRUE) {
			gint _tmp16_;
			SDL_Rect* _tmp17_;
			gint _tmp17__length1;
			gint _tmp18_;
			SdxGraphicsNinePatch* _tmp19_;
			gint _tmp20_;
			SdxGraphicsBlit _tmp21_;
			SDL_Rect _tmp22_;
			gint _tmp23_;
			SdxGraphicsNinePatch* _tmp24_;
			gint _tmp25_;
			SdxGraphicsBlit _tmp26_;
			SDL_Rect _tmp27_;
			gint _tmp28_;
			SdxGraphicsNinePatch* _tmp29_;
			gint _tmp30_;
			SdxGraphicsBlit _tmp31_;
			SDL_Rect _tmp32_;
			guint _tmp33_;
			SdxGraphicsNinePatch* _tmp34_;
			gint _tmp35_;
			SdxGraphicsBlit _tmp36_;
			SDL_Rect _tmp37_;
			guint _tmp38_;
			SDL_Rect _tmp39_ = {0};
			SDL_Rect _tmp40_;
			if (!_tmp14_) {
				gint _tmp15_;
				_tmp15_ = i;
				i = _tmp15_ + 1;
			}
			_tmp14_ = FALSE;
			_tmp16_ = i;
			if (!(_tmp16_ < 9)) {
				break;
			}
			_tmp17_ = dest;
			_tmp17__length1 = dest_length1;
			_tmp18_ = i;
			_tmp19_ = patch;
			_tmp20_ = i;
			_tmp21_ = _tmp19_->slice[_tmp20_];
			_tmp22_ = _tmp21_.dest;
			_tmp23_ = _tmp22_.x;
			_tmp24_ = patch;
			_tmp25_ = i;
			_tmp26_ = _tmp24_->slice[_tmp25_];
			_tmp27_ = _tmp26_.dest;
			_tmp28_ = _tmp27_.y;
			_tmp29_ = patch;
			_tmp30_ = i;
			_tmp31_ = _tmp29_->slice[_tmp30_];
			_tmp32_ = _tmp31_.dest;
			_tmp33_ = _tmp32_.w;
			_tmp34_ = patch;
			_tmp35_ = i;
			_tmp36_ = _tmp34_->slice[_tmp35_];
			_tmp37_ = _tmp36_.dest;
			_tmp38_ = _tmp37_.h;
			_tmp39_.x = _tmp23_;
			_tmp39_.y = _tmp28_;
			_tmp39_.w = _tmp33_;
			_tmp39_.h = _tmp38_;
			_tmp17_[_tmp18_] = _tmp39_;
			_tmp40_ = _tmp17_[_tmp18_];
		}
	}
	_tmp41_ = width;
	_tmp42_ = dest;
	_tmp42__length1 = dest_length1;
	_tmp43_ = _tmp42_[1];
	_tmp44_ = _tmp43_.w;
	_tmp45_ = dest;
	_tmp45__length1 = dest_length1;
	_tmp46_ = _tmp45_[2];
	_tmp47_ = _tmp46_.w;
	_tmp48_ = dest;
	_tmp48__length1 = dest_length1;
	_tmp49_ = _tmp48_[3];
	_tmp50_ = _tmp49_.w;
	offsetWidth = _tmp41_ - ((_tmp44_ + _tmp47_) + _tmp50_);
	_tmp51_ = height;
	_tmp52_ = dest;
	_tmp52__length1 = dest_length1;
	_tmp53_ = _tmp52_[1];
	_tmp54_ = _tmp53_.h;
	_tmp55_ = dest;
	_tmp55__length1 = dest_length1;
	_tmp56_ = _tmp55_[4];
	_tmp57_ = _tmp56_.h;
	_tmp58_ = dest;
	_tmp58__length1 = dest_length1;
	_tmp59_ = _tmp58_[7];
	_tmp60_ = _tmp59_.h;
	offsetHeight = _tmp51_ - ((_tmp54_ + _tmp57_) + _tmp60_);
	_tmp61_ = dest;
	_tmp61__length1 = dest_length1;
	_tmp62_ = dest;
	_tmp62__length1 = dest_length1;
	_tmp63_ = _tmp62_[1].w;
	_tmp64_ = offsetWidth;
	_tmp62_[1].w = _tmp63_ + _tmp64_;
	_tmp65_ = dest;
	_tmp65__length1 = dest_length1;
	_tmp66_ = dest;
	_tmp66__length1 = dest_length1;
	_tmp67_ = _tmp66_[4].w;
	_tmp68_ = offsetWidth;
	_tmp66_[4].w = _tmp67_ + _tmp68_;
	_tmp69_ = dest;
	_tmp69__length1 = dest_length1;
	_tmp70_ = dest;
	_tmp70__length1 = dest_length1;
	_tmp71_ = _tmp70_[7].w;
	_tmp72_ = offsetWidth;
	_tmp70_[7].w = _tmp71_ + _tmp72_;
	_tmp73_ = dest;
	_tmp73__length1 = dest_length1;
	_tmp74_ = dest;
	_tmp74__length1 = dest_length1;
	_tmp75_ = _tmp74_[2].x;
	_tmp76_ = offsetWidth;
	_tmp74_[2].x = _tmp75_ + ((gint) _tmp76_);
	_tmp77_ = dest;
	_tmp77__length1 = dest_length1;
	_tmp78_ = dest;
	_tmp78__length1 = dest_length1;
	_tmp79_ = _tmp78_[5].x;
	_tmp80_ = offsetWidth;
	_tmp78_[5].x = _tmp79_ + ((gint) _tmp80_);
	_tmp81_ = dest;
	_tmp81__length1 = dest_length1;
	_tmp82_ = dest;
	_tmp82__length1 = dest_length1;
	_tmp83_ = _tmp82_[8].x;
	_tmp84_ = offsetWidth;
	_tmp82_[8].x = _tmp83_ + ((gint) _tmp84_);
	_tmp85_ = dest;
	_tmp85__length1 = dest_length1;
	_tmp86_ = dest;
	_tmp86__length1 = dest_length1;
	_tmp87_ = _tmp86_[3].h;
	_tmp88_ = offsetHeight;
	_tmp86_[3].h = _tmp87_ + _tmp88_;
	_tmp89_ = dest;
	_tmp89__length1 = dest_length1;
	_tmp90_ = dest;
	_tmp90__length1 = dest_length1;
	_tmp91_ = _tmp90_[4].h;
	_tmp92_ = offsetHeight;
	_tmp90_[4].h = _tmp91_ + _tmp92_;
	_tmp93_ = dest;
	_tmp93__length1 = dest_length1;
	_tmp94_ = dest;
	_tmp94__length1 = dest_length1;
	_tmp95_ = _tmp94_[5].h;
	_tmp96_ = offsetHeight;
	_tmp94_[5].h = _tmp95_ + _tmp96_;
	_tmp97_ = dest;
	_tmp97__length1 = dest_length1;
	_tmp98_ = dest;
	_tmp98__length1 = dest_length1;
	_tmp99_ = _tmp98_[6].y;
	_tmp100_ = offsetHeight;
	_tmp98_[6].y = _tmp99_ + ((gint) _tmp100_);
	_tmp101_ = dest;
	_tmp101__length1 = dest_length1;
	_tmp102_ = dest;
	_tmp102__length1 = dest_length1;
	_tmp103_ = _tmp102_[7].y;
	_tmp104_ = offsetHeight;
	_tmp102_[7].y = _tmp103_ + ((gint) _tmp104_);
	_tmp105_ = dest;
	_tmp105__length1 = dest_length1;
	_tmp106_ = dest;
	_tmp106__length1 = dest_length1;
	_tmp107_ = _tmp106_[8].y;
	_tmp108_ = offsetHeight;
	_tmp106_[8].y = _tmp107_ + ((gint) _tmp108_);
	i = 0;
	_tmp109_ = patch;
	{
		SdxGraphicsBlit* segment_collection = NULL;
		gint segment_collection_length1 = 0;
		gint _segment_collection_size_ = 0;
		gint segment_it = 0;
		segment_collection = _tmp109_->slice;
		segment_collection_length1 = 9;
		for (segment_it = 0; segment_it < 9; segment_it = segment_it + 1) {
			SdxGraphicsBlit segment = {0};
			segment = segment_collection[segment_it];
			{
				SdxGraphicsNinePatch* _tmp110_;
				SdxGraphicsSurfaceTextureSurface* _tmp111_;
				SDL_Surface* _tmp112_;
				SdxGraphicsBlit _tmp113_;
				SDL_Rect _tmp114_;
				SDL_Surface* _tmp115_;
				SDL_Rect* _tmp116_;
				gint _tmp116__length1;
				gint _tmp117_;
				SDL_Rect _tmp118_;
				_tmp110_ = patch;
				_tmp111_ = _tmp110_->texture;
				_tmp112_ = ((SdxGraphicsSurface*) _tmp111_)->surface;
				_tmp113_ = segment;
				_tmp114_ = _tmp113_.source;
				_tmp115_ = surface;
				_tmp116_ = dest;
				_tmp116__length1 = dest_length1;
				_tmp117_ = i;
				i = _tmp117_ + 1;
				_tmp118_ = _tmp116_[_tmp117_];
				SDL_BlitScaled (_tmp112_, &_tmp114_, _tmp115_, &_tmp118_);
			}
		}
	}
	_tmp119_ = sdx_renderer;
	_tmp120_ = surface;
	_tmp121_ = SDL_CreateTextureFromSurface (_tmp119_, _tmp120_);
	_SDL_DestroyTexture0 (((SdxGraphicsSprite*) self)->texture);
	((SdxGraphicsSprite*) self)->texture = _tmp121_;
	_tmp122_ = width;
	((SdxGraphicsSprite*) self)->width = _tmp122_;
	_tmp123_ = height;
	((SdxGraphicsSprite*) self)->height = _tmp123_;
	_tmp124_ = width;
	_tmp125_ = height;
	_tmp126_.x = _tmp124_ / 2;
	_tmp126_.y = _tmp125_ / 2;
	((SdxGraphicsSprite*) self)->center = _tmp126_;
	((SdxGraphicsSprite*) self)->kind = SDX_GRAPHICS_SPRITE_KIND_NineSliceSprite;
	_SDL_FreeSurface0 (surface);
	dest = (g_free (dest), NULL);
	return self;
}


/**
 * CompositeSprite
 * 
 * @param patch 9slice patch object
 * @param text to generate
 * @param font to use
 * @param color to use for foreground
 * @param width in pixels
 * @param height in pixels
 * 
 */
SdxGraphicsSpriteUISprite* sdx_graphics_sprite_ui_sprite_new (SdxGraphicsNinePatch* patch, const gchar* text, SdxFont* font, SDL_Color color, gint width, gint height) {
	SdxGraphicsSpriteUISprite* self;
	SDL_Surface* textSurface = NULL;
	SdxFont* _tmp0_;
	const gchar* _tmp1_;
	SDL_Color _tmp2_;
	SDL_Surface* _tmp3_;
	gint _tmp4_;
	SDL_Surface* _tmp5_;
	gint _tmp6_;
	gdouble _tmp7_;
	gint _tmp8_;
	SDL_Surface* _tmp9_;
	gint _tmp10_;
	gdouble _tmp11_;
	gint w = 0;
	SdxGraphicsNinePatch* _tmp12_;
	gfloat _tmp13_;
	gint _tmp14_;
	gint h = 0;
	SdxGraphicsNinePatch* _tmp15_;
	gfloat _tmp16_;
	gint _tmp17_;
	guint32 rmask = 0U;
	guint32 gmask = 0U;
	guint32 bmask = 0U;
	guint32 amask = 0U;
	SDL_Rect* dest = NULL;
	SDL_Rect* _tmp18_;
	gint dest_length1;
	gint _dest_size_;
	SDL_Surface* surface = NULL;
	gint _tmp19_;
	gint _tmp20_;
	guint32 _tmp21_;
	guint32 _tmp22_;
	guint32 _tmp23_;
	guint32 _tmp24_;
	SDL_Surface* _tmp25_;
	gint i = 0;
	gint offsetWidth = 0;
	gint _tmp53_;
	SDL_Rect* _tmp54_;
	gint _tmp54__length1;
	SDL_Rect _tmp55_;
	guint _tmp56_;
	SDL_Rect* _tmp57_;
	gint _tmp57__length1;
	SDL_Rect _tmp58_;
	guint _tmp59_;
	SDL_Rect* _tmp60_;
	gint _tmp60__length1;
	SDL_Rect _tmp61_;
	guint _tmp62_;
	gdouble _tmp63_;
	gint offsetHeight = 0;
	gint _tmp64_;
	SDL_Rect* _tmp65_;
	gint _tmp65__length1;
	SDL_Rect _tmp66_;
	guint _tmp67_;
	SDL_Rect* _tmp68_;
	gint _tmp68__length1;
	SDL_Rect _tmp69_;
	guint _tmp70_;
	SDL_Rect* _tmp71_;
	gint _tmp71__length1;
	SDL_Rect _tmp72_;
	guint _tmp73_;
	gdouble _tmp74_;
	SDL_Rect* _tmp75_;
	gint _tmp75__length1;
	SDL_Rect* _tmp76_;
	gint _tmp76__length1;
	guint _tmp77_;
	gint _tmp78_;
	SDL_Rect* _tmp79_;
	gint _tmp79__length1;
	SDL_Rect* _tmp80_;
	gint _tmp80__length1;
	guint _tmp81_;
	gint _tmp82_;
	SDL_Rect* _tmp83_;
	gint _tmp83__length1;
	SDL_Rect* _tmp84_;
	gint _tmp84__length1;
	guint _tmp85_;
	gint _tmp86_;
	SDL_Rect* _tmp87_;
	gint _tmp87__length1;
	SDL_Rect* _tmp88_;
	gint _tmp88__length1;
	gint _tmp89_;
	gint _tmp90_;
	SDL_Rect* _tmp91_;
	gint _tmp91__length1;
	SDL_Rect* _tmp92_;
	gint _tmp92__length1;
	gint _tmp93_;
	gint _tmp94_;
	SDL_Rect* _tmp95_;
	gint _tmp95__length1;
	SDL_Rect* _tmp96_;
	gint _tmp96__length1;
	gint _tmp97_;
	gint _tmp98_;
	SDL_Rect* _tmp99_;
	gint _tmp99__length1;
	SDL_Rect* _tmp100_;
	gint _tmp100__length1;
	guint _tmp101_;
	gint _tmp102_;
	SDL_Rect* _tmp103_;
	gint _tmp103__length1;
	SDL_Rect* _tmp104_;
	gint _tmp104__length1;
	guint _tmp105_;
	gint _tmp106_;
	SDL_Rect* _tmp107_;
	gint _tmp107__length1;
	SDL_Rect* _tmp108_;
	gint _tmp108__length1;
	guint _tmp109_;
	gint _tmp110_;
	SDL_Rect* _tmp111_;
	gint _tmp111__length1;
	SDL_Rect* _tmp112_;
	gint _tmp112__length1;
	gint _tmp113_;
	gint _tmp114_;
	SDL_Rect* _tmp115_;
	gint _tmp115__length1;
	SDL_Rect* _tmp116_;
	gint _tmp116__length1;
	gint _tmp117_;
	gint _tmp118_;
	SDL_Rect* _tmp119_;
	gint _tmp119__length1;
	SDL_Rect* _tmp120_;
	gint _tmp120__length1;
	gint _tmp121_;
	gint _tmp122_;
	SdxGraphicsNinePatch* _tmp123_;
	SDL_Surface* _tmp133_;
	gint _tmp134_;
	gint _tmp135_;
	SDL_Rect _tmp136_ = {0};
	SDL_Surface* _tmp137_;
	SdxGraphicsNinePatch* _tmp138_;
	gint _tmp139_;
	SdxGraphicsNinePatch* _tmp140_;
	gint _tmp141_;
	gint _tmp142_;
	gint _tmp143_;
	SDL_Rect _tmp144_ = {0};
	SDL_Renderer* _tmp145_;
	SDL_Surface* _tmp146_;
	SDL_Texture* _tmp147_;
	SDL_Texture* _tmp148_;
	gint _tmp149_;
	gint _tmp150_;
	gint _tmp151_;
	gint _tmp152_;
	SDL_Point _tmp153_ = {0};
	g_return_val_if_fail (patch != NULL, NULL);
	g_return_val_if_fail (text != NULL, NULL);
	g_return_val_if_fail (font != NULL, NULL);
	self = (SdxGraphicsSpriteUISprite*) sdx_graphics_sprite_new ();
	_tmp0_ = font;
	_tmp1_ = text;
	_tmp2_ = color;
	_tmp3_ = sdx_font_Render (_tmp0_, _tmp1_, _tmp2_, NULL);
	textSurface = _tmp3_;
	_tmp4_ = width;
	_tmp5_ = textSurface;
	_tmp6_ = _tmp5_->w;
	_tmp7_ = fmax ((gdouble) _tmp4_, (gdouble) _tmp6_);
	width = (gint) _tmp7_;
	_tmp8_ = height;
	_tmp9_ = textSurface;
	_tmp10_ = _tmp9_->h;
	_tmp11_ = fmax ((gdouble) _tmp8_, (gdouble) _tmp10_);
	height = (gint) _tmp11_;
	_tmp12_ = patch;
	_tmp13_ = sdx_graphics_nine_patch_GetTotalWidth (_tmp12_);
	_tmp14_ = width;
	w = ((gint) _tmp13_) + _tmp14_;
	_tmp15_ = patch;
	_tmp16_ = sdx_graphics_nine_patch_GetTotalHeight (_tmp15_);
	_tmp17_ = height;
	h = ((gint) _tmp16_) + _tmp17_;
	rmask = (guint32) 0x000000ff;
	gmask = (guint32) 0x0000ff00;
	bmask = (guint32) 0x00ff0000;
	amask = (guint32) 0xff000000LL;
	_tmp18_ = g_new0 (SDL_Rect, 9);
	dest = _tmp18_;
	dest_length1 = 9;
	_dest_size_ = dest_length1;
	_tmp19_ = w;
	_tmp20_ = h;
	_tmp21_ = rmask;
	_tmp22_ = gmask;
	_tmp23_ = bmask;
	_tmp24_ = amask;
	_tmp25_ = SDL_CreateRGBSurface ((guint32) 0, _tmp19_, _tmp20_, 32, _tmp21_, _tmp22_, _tmp23_, _tmp24_);
	surface = _tmp25_;
	i = 0;
	{
		gboolean _tmp26_ = FALSE;
		i = 0;
		_tmp26_ = TRUE;
		while (TRUE) {
			gint _tmp28_;
			SDL_Rect* _tmp29_;
			gint _tmp29__length1;
			gint _tmp30_;
			SdxGraphicsNinePatch* _tmp31_;
			gint _tmp32_;
			SdxGraphicsBlit _tmp33_;
			SDL_Rect _tmp34_;
			gint _tmp35_;
			SdxGraphicsNinePatch* _tmp36_;
			gint _tmp37_;
			SdxGraphicsBlit _tmp38_;
			SDL_Rect _tmp39_;
			gint _tmp40_;
			SdxGraphicsNinePatch* _tmp41_;
			gint _tmp42_;
			SdxGraphicsBlit _tmp43_;
			SDL_Rect _tmp44_;
			guint _tmp45_;
			SdxGraphicsNinePatch* _tmp46_;
			gint _tmp47_;
			SdxGraphicsBlit _tmp48_;
			SDL_Rect _tmp49_;
			guint _tmp50_;
			SDL_Rect _tmp51_ = {0};
			SDL_Rect _tmp52_;
			if (!_tmp26_) {
				gint _tmp27_;
				_tmp27_ = i;
				i = _tmp27_ + 1;
			}
			_tmp26_ = FALSE;
			_tmp28_ = i;
			if (!(_tmp28_ < 9)) {
				break;
			}
			_tmp29_ = dest;
			_tmp29__length1 = dest_length1;
			_tmp30_ = i;
			_tmp31_ = patch;
			_tmp32_ = i;
			_tmp33_ = _tmp31_->slice[_tmp32_];
			_tmp34_ = _tmp33_.dest;
			_tmp35_ = _tmp34_.x;
			_tmp36_ = patch;
			_tmp37_ = i;
			_tmp38_ = _tmp36_->slice[_tmp37_];
			_tmp39_ = _tmp38_.dest;
			_tmp40_ = _tmp39_.y;
			_tmp41_ = patch;
			_tmp42_ = i;
			_tmp43_ = _tmp41_->slice[_tmp42_];
			_tmp44_ = _tmp43_.dest;
			_tmp45_ = _tmp44_.w;
			_tmp46_ = patch;
			_tmp47_ = i;
			_tmp48_ = _tmp46_->slice[_tmp47_];
			_tmp49_ = _tmp48_.dest;
			_tmp50_ = _tmp49_.h;
			_tmp51_.x = _tmp35_;
			_tmp51_.y = _tmp40_;
			_tmp51_.w = _tmp45_;
			_tmp51_.h = _tmp50_;
			_tmp29_[_tmp30_] = _tmp51_;
			_tmp52_ = _tmp29_[_tmp30_];
		}
	}
	_tmp53_ = width;
	_tmp54_ = dest;
	_tmp54__length1 = dest_length1;
	_tmp55_ = _tmp54_[1];
	_tmp56_ = _tmp55_.w;
	_tmp57_ = dest;
	_tmp57__length1 = dest_length1;
	_tmp58_ = _tmp57_[2];
	_tmp59_ = _tmp58_.w;
	_tmp60_ = dest;
	_tmp60__length1 = dest_length1;
	_tmp61_ = _tmp60_[3];
	_tmp62_ = _tmp61_.w;
	_tmp63_ = fmax ((gdouble) 0, (gdouble) (((gint) _tmp53_) - ((gint) ((_tmp56_ + _tmp59_) + _tmp62_))));
	offsetWidth = ((gint) _tmp63_) + 8;
	_tmp64_ = height;
	_tmp65_ = dest;
	_tmp65__length1 = dest_length1;
	_tmp66_ = _tmp65_[1];
	_tmp67_ = _tmp66_.h;
	_tmp68_ = dest;
	_tmp68__length1 = dest_length1;
	_tmp69_ = _tmp68_[4];
	_tmp70_ = _tmp69_.h;
	_tmp71_ = dest;
	_tmp71__length1 = dest_length1;
	_tmp72_ = _tmp71_[7];
	_tmp73_ = _tmp72_.h;
	_tmp74_ = fmax ((gdouble) 0, (gdouble) (((gint) _tmp64_) - ((gint) ((_tmp67_ + _tmp70_) + _tmp73_))));
	offsetHeight = (gint) _tmp74_;
	_tmp75_ = dest;
	_tmp75__length1 = dest_length1;
	_tmp76_ = dest;
	_tmp76__length1 = dest_length1;
	_tmp77_ = _tmp76_[1].w;
	_tmp78_ = offsetWidth;
	_tmp76_[1].w = _tmp77_ + _tmp78_;
	_tmp79_ = dest;
	_tmp79__length1 = dest_length1;
	_tmp80_ = dest;
	_tmp80__length1 = dest_length1;
	_tmp81_ = _tmp80_[4].w;
	_tmp82_ = offsetWidth;
	_tmp80_[4].w = _tmp81_ + _tmp82_;
	_tmp83_ = dest;
	_tmp83__length1 = dest_length1;
	_tmp84_ = dest;
	_tmp84__length1 = dest_length1;
	_tmp85_ = _tmp84_[7].w;
	_tmp86_ = offsetWidth;
	_tmp84_[7].w = _tmp85_ + _tmp86_;
	_tmp87_ = dest;
	_tmp87__length1 = dest_length1;
	_tmp88_ = dest;
	_tmp88__length1 = dest_length1;
	_tmp89_ = _tmp88_[2].x;
	_tmp90_ = offsetWidth;
	_tmp88_[2].x = _tmp89_ + ((gint) _tmp90_);
	_tmp91_ = dest;
	_tmp91__length1 = dest_length1;
	_tmp92_ = dest;
	_tmp92__length1 = dest_length1;
	_tmp93_ = _tmp92_[5].x;
	_tmp94_ = offsetWidth;
	_tmp92_[5].x = _tmp93_ + ((gint) _tmp94_);
	_tmp95_ = dest;
	_tmp95__length1 = dest_length1;
	_tmp96_ = dest;
	_tmp96__length1 = dest_length1;
	_tmp97_ = _tmp96_[8].x;
	_tmp98_ = offsetWidth;
	_tmp96_[8].x = _tmp97_ + ((gint) _tmp98_);
	_tmp99_ = dest;
	_tmp99__length1 = dest_length1;
	_tmp100_ = dest;
	_tmp100__length1 = dest_length1;
	_tmp101_ = _tmp100_[3].h;
	_tmp102_ = offsetHeight;
	_tmp100_[3].h = _tmp101_ + _tmp102_;
	_tmp103_ = dest;
	_tmp103__length1 = dest_length1;
	_tmp104_ = dest;
	_tmp104__length1 = dest_length1;
	_tmp105_ = _tmp104_[4].h;
	_tmp106_ = offsetHeight;
	_tmp104_[4].h = _tmp105_ + _tmp106_;
	_tmp107_ = dest;
	_tmp107__length1 = dest_length1;
	_tmp108_ = dest;
	_tmp108__length1 = dest_length1;
	_tmp109_ = _tmp108_[5].h;
	_tmp110_ = offsetHeight;
	_tmp108_[5].h = _tmp109_ + _tmp110_;
	_tmp111_ = dest;
	_tmp111__length1 = dest_length1;
	_tmp112_ = dest;
	_tmp112__length1 = dest_length1;
	_tmp113_ = _tmp112_[6].y;
	_tmp114_ = offsetHeight;
	_tmp112_[6].y = _tmp113_ + ((gint) _tmp114_);
	_tmp115_ = dest;
	_tmp115__length1 = dest_length1;
	_tmp116_ = dest;
	_tmp116__length1 = dest_length1;
	_tmp117_ = _tmp116_[7].y;
	_tmp118_ = offsetHeight;
	_tmp116_[7].y = _tmp117_ + ((gint) _tmp118_);
	_tmp119_ = dest;
	_tmp119__length1 = dest_length1;
	_tmp120_ = dest;
	_tmp120__length1 = dest_length1;
	_tmp121_ = _tmp120_[8].y;
	_tmp122_ = offsetHeight;
	_tmp120_[8].y = _tmp121_ + ((gint) _tmp122_);
	i = 0;
	_tmp123_ = patch;
	{
		SdxGraphicsBlit* segment_collection = NULL;
		gint segment_collection_length1 = 0;
		gint _segment_collection_size_ = 0;
		gint segment_it = 0;
		segment_collection = _tmp123_->slice;
		segment_collection_length1 = 9;
		for (segment_it = 0; segment_it < 9; segment_it = segment_it + 1) {
			SdxGraphicsBlit segment = {0};
			segment = segment_collection[segment_it];
			{
				SdxGraphicsNinePatch* _tmp124_;
				SdxGraphicsSurfaceTextureSurface* _tmp125_;
				SDL_Surface* _tmp126_;
				SdxGraphicsBlit _tmp127_;
				SDL_Rect _tmp128_;
				SDL_Surface* _tmp129_;
				SDL_Rect* _tmp130_;
				gint _tmp130__length1;
				gint _tmp131_;
				SDL_Rect _tmp132_;
				_tmp124_ = patch;
				_tmp125_ = _tmp124_->texture;
				_tmp126_ = ((SdxGraphicsSurface*) _tmp125_)->surface;
				_tmp127_ = segment;
				_tmp128_ = _tmp127_.source;
				_tmp129_ = surface;
				_tmp130_ = dest;
				_tmp130__length1 = dest_length1;
				_tmp131_ = i;
				i = _tmp131_ + 1;
				_tmp132_ = _tmp130_[_tmp131_];
				SDL_BlitScaled (_tmp126_, &_tmp128_, _tmp129_, &_tmp132_);
			}
		}
	}
	_tmp133_ = textSurface;
	_tmp134_ = width;
	_tmp135_ = height;
	_tmp136_.x = 0;
	_tmp136_.y = 0;
	_tmp136_.w = (guint) _tmp134_;
	_tmp136_.h = (guint) _tmp135_;
	_tmp137_ = surface;
	_tmp138_ = patch;
	_tmp139_ = _tmp138_->bottom;
	_tmp140_ = patch;
	_tmp141_ = _tmp140_->right;
	_tmp142_ = width;
	_tmp143_ = height;
	_tmp144_.x = _tmp139_;
	_tmp144_.y = _tmp141_;
	_tmp144_.w = (guint) _tmp142_;
	_tmp144_.h = (guint) _tmp143_;
	SDL_BlitScaled (_tmp133_, &_tmp136_, _tmp137_, &_tmp144_);
	_tmp145_ = sdx_renderer;
	_tmp146_ = surface;
	_tmp147_ = SDL_CreateTextureFromSurface (_tmp145_, _tmp146_);
	_SDL_DestroyTexture0 (((SdxGraphicsSprite*) self)->texture);
	((SdxGraphicsSprite*) self)->texture = _tmp147_;
	_tmp148_ = ((SdxGraphicsSprite*) self)->texture;
	SDL_SetTextureBlendMode (_tmp148_, SDL_BLENDMODE_BLEND);
	_tmp149_ = width;
	((SdxGraphicsSprite*) self)->width = _tmp149_;
	_tmp150_ = height;
	((SdxGraphicsSprite*) self)->height = _tmp150_;
	_tmp151_ = width;
	_tmp152_ = height;
	_tmp153_.x = _tmp151_ / 2;
	_tmp153_.y = _tmp152_ / 2;
	((SdxGraphicsSprite*) self)->center = _tmp153_;
	((SdxGraphicsSprite*) self)->kind = SDX_GRAPHICS_SPRITE_KIND_NineSliceSprite;
	_SDL_FreeSurface0 (surface);
	dest = (g_free (dest), NULL);
	_SDL_FreeSurface0 (textSurface);
	return self;
}


/**
 * TextSprite
 * 
 * @param text string of text to generate
 * @param font used to generate text
 * @param fg foregound text color 
 * @param bg background color, null = transparent
 * 
 */
SdxGraphicsSpriteTextSprite* sdx_graphics_sprite_text_sprite_new (const gchar* text, SdxFont* font, SDL_Color fg, SDL_Color* bg) {
	SdxGraphicsSpriteTextSprite* self;
	const gchar* _tmp0_;
	SdxFont* _tmp1_;
	SDL_Color _tmp2_;
	SDL_Color* _tmp3_;
	SDL_Point _tmp4_ = {0};
	g_return_val_if_fail (text != NULL, NULL);
	g_return_val_if_fail (font != NULL, NULL);
	self = (SdxGraphicsSpriteTextSprite*) sdx_graphics_sprite_new ();
	_tmp0_ = text;
	_tmp1_ = font;
	_tmp2_ = fg;
	_tmp3_ = bg;
	sdx_graphics_sprite_text_sprite_SetText (self, _tmp0_, _tmp1_, _tmp2_, _tmp3_);
	((SdxGraphicsSprite*) self)->centered = FALSE;
	_tmp4_.x = 0;
	_tmp4_.y = 0;
	((SdxGraphicsSprite*) self)->center = _tmp4_;
	((SdxGraphicsSprite*) self)->kind = SDX_GRAPHICS_SPRITE_KIND_TextSprite;
	return self;
}


/**
 *  Change the text value of a Sprite.fromRenderedText
 *
 * @param text string of text to generate
 * @param font used to generate text
 * @param fg foregound text color 
 * @param bg background color, null = transparent
 */
void sdx_graphics_sprite_text_sprite_SetText (SdxGraphicsSpriteTextSprite* self, const gchar* text, SdxFont* font, SDL_Color fg, SDL_Color* bg) {
	SDL_Surface* surface = NULL;
	SdxFont* _tmp0_;
	const gchar* _tmp1_;
	SDL_Color _tmp2_;
	SDL_Color* _tmp3_;
	SDL_Surface* _tmp4_;
	SDL_Renderer* _tmp5_;
	SDL_Texture* _tmp6_;
	SDL_Texture* _tmp7_;
	gint _tmp8_;
	gint _tmp9_;
	const gchar* _tmp10_;
	gchar* _tmp11_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (text != NULL);
	g_return_if_fail (font != NULL);
	_tmp0_ = font;
	_tmp1_ = text;
	_tmp2_ = fg;
	_tmp3_ = bg;
	_tmp4_ = sdx_font_Render (_tmp0_, _tmp1_, _tmp2_, _tmp3_);
	surface = _tmp4_;
	_tmp5_ = sdx_renderer;
	_tmp6_ = SDL_CreateTextureFromSurface (_tmp5_, surface);
	_SDL_DestroyTexture0 (((SdxGraphicsSprite*) self)->texture);
	((SdxGraphicsSprite*) self)->texture = _tmp6_;
	_tmp7_ = ((SdxGraphicsSprite*) self)->texture;
	SDL_SetTextureBlendMode (_tmp7_, SDL_BLENDMODE_BLEND);
	_tmp8_ = surface->w;
	((SdxGraphicsSprite*) self)->width = _tmp8_;
	_tmp9_ = surface->h;
	((SdxGraphicsSprite*) self)->height = _tmp9_;
	_tmp10_ = text;
	_tmp11_ = g_strdup (_tmp10_);
	_g_free0 (((SdxGraphicsSprite*) self)->path);
	((SdxGraphicsSprite*) self)->path = _tmp11_;
	_SDL_FreeSurface0 (surface);
}


static void sdx_graphics_sprite_instance_init (SdxGraphicsSprite * self) {
	Class* _tmp0_;
	gint _tmp1_;
	gint _tmp2_;
	SdxMathScale _tmp3_ = {0};
	self->ref_count = 1;
	_tmp0_ = class_Register ("Sdx.Graphics.Sprite", NULL);
	self->klass = _tmp0_;
	_tmp1_ = sdx_graphics_sprite_uniqueId;
	sdx_graphics_sprite_uniqueId = _tmp1_ + 1;
	_tmp2_ = sdx_graphics_sprite_uniqueId;
	self->id = _tmp2_;
	self->frame = -1;
	self->angle = 0.0;
	memset (&_tmp3_, 0, sizeof (SdxMathScale));
	_tmp3_.x = (gfloat) 1;
	_tmp3_.y = (gfloat) 1;
	self->scale = _tmp3_;
	self->color = SDX_COLOR_White;
	self->flip = SDL_FLIP_NONE;
	self->centered = TRUE;
	self->layer = 0;
}


void sdx_graphics_sprite_free (SdxGraphicsSprite * self) {
	_SDL_DestroyTexture0 (self->texture);
	_g_free0 (self->path);
	g_slice_free (SdxGraphicsSprite, self);
}




