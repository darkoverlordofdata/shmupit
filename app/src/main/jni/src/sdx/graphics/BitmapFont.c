/** updated by adriac */
/* BitmapFont.c generated by valac 0.36.4-dirty, the Vala compiler
 * generated from BitmapFont.vala, do not modify */

/*[Adriac:Sdx.Graphics::BitmapFontData:SdxGraphicsBitmapFontData:sdx_graphics_bitmap_font_data]*/
/*[Adriac:Sdx.Graphics::Glyph:SdxGraphicsGlyph:sdx_graphics_glyph]*/
/*[Adriac:Sdx.Graphics::BitmapFont:SdxGraphicsBitmapFont:sdx_graphics_bitmap_font]*/
/* ******************************************************************************
 * Copyright 2017 darkoverlordofdata.
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *   http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/

#include <glib.h>
#include <glib-object.h>
#include <float.h>
#include <math.h>
#include <stdlib.h>
#include <string.h>

typedef struct _SdxGraphicsBitmapFont SdxGraphicsBitmapFont;
typedef struct _SdxUtilsJson SdxUtilsJson;
typedef struct _SdxGraphicsTextureRegion SdxGraphicsTextureRegion;
typedef struct _SdxGraphicsBitmapFontData SdxGraphicsBitmapFontData;
// symtbl.1 sdx_utils_json
void sdx_utils_json_release (SdxUtilsJson* self);
void sdx_utils_json_free (SdxUtilsJson* self);
SdxUtilsJson* sdx_utils_json_retain (SdxUtilsJson* self);
#define _sdx_utils_json_release0(var) ((var == NULL) ? NULL : (var = (sdx_utils_json_release (var), NULL)))
// symtbl.1 sdx_graphics_texture_region
void sdx_graphics_texture_region_release (SdxGraphicsTextureRegion* self);
void sdx_graphics_texture_region_free (SdxGraphicsTextureRegion* self);
SdxGraphicsTextureRegion* sdx_graphics_texture_region_retain (SdxGraphicsTextureRegion* self);
#define _sdx_graphics_texture_region_release0(var) ((var == NULL) ? NULL : (var = (sdx_graphics_texture_region_release (var), NULL)))
// symtbl.1 sdx_graphics_bitmap_font_data
void sdx_graphics_bitmap_font_data_release (SdxGraphicsBitmapFontData* self);
void sdx_graphics_bitmap_font_data_free (SdxGraphicsBitmapFontData* self);
SdxGraphicsBitmapFontData* sdx_graphics_bitmap_font_data_retain (SdxGraphicsBitmapFontData* self);
#define _sdx_graphics_bitmap_font_data_release0(var) ((var == NULL) ? NULL : (var = (sdx_graphics_bitmap_font_data_release (var), NULL)))
#define __g_list_free__sdx_graphics_texture_region_release0_0(var) ((var == NULL) ? NULL : (var = (_g_list_free__sdx_graphics_texture_region_release0_ (var), NULL)))
typedef struct _SdxGraphicsGlyph SdxGraphicsGlyph;
typedef struct _SdxFilesFileHandle SdxFilesFileHandle;
// symtbl.1 sdx_files_file_handle
void sdx_files_file_handle_release (SdxFilesFileHandle* self);
void sdx_files_file_handle_free (SdxFilesFileHandle* self);
SdxFilesFileHandle* sdx_files_file_handle_retain (SdxFilesFileHandle* self);
#define _sdx_files_file_handle_release0(var) ((var == NULL) ? NULL : (var = (sdx_files_file_handle_release (var), NULL)))
// symtbl.1 sdx_graphics_glyph
void sdx_graphics_glyph_release (SdxGraphicsGlyph* self);
void sdx_graphics_glyph_free (SdxGraphicsGlyph* self);
SdxGraphicsGlyph* sdx_graphics_glyph_retain (SdxGraphicsGlyph* self);
#define _sdx_graphics_glyph_release0(var) ((var == NULL) ? NULL : (var = (sdx_graphics_glyph_release (var), NULL)))
typedef struct _SdxUtilsJsVariant SdxUtilsJsVariant;
#define _g_free0(var) (var = (g_free (var), NULL))

#define SDX_UTILS_TYPE_JS_TYPE (sdx_utils_js_type_get_type ())
// symtbl.1 sdx_utils_js_variant
void sdx_utils_js_variant_release (SdxUtilsJsVariant* self);
void sdx_utils_js_variant_free (SdxUtilsJsVariant* self);
SdxUtilsJsVariant* sdx_utils_js_variant_retain (SdxUtilsJsVariant* self);
#define _sdx_utils_js_variant_release0(var) ((var == NULL) ? NULL : (var = (sdx_utils_js_variant_release (var), NULL)))
typedef struct _SdxGraphicsSurface SdxGraphicsSurface;
typedef SdxGraphicsSurface SdxGraphicsSurfaceTextureSurface;
// symtbl.1 sdx_graphics_surface
void sdx_graphics_surface_release (SdxGraphicsSurface* self);
void sdx_graphics_surface_free (SdxGraphicsSurface* self);
SdxGraphicsSurface* sdx_graphics_surface_retain (SdxGraphicsSurface* self);
#define _sdx_graphics_surface_release0(var) ((var == NULL) ? NULL : (var = (sdx_graphics_surface_release (var), NULL)))

struct _SdxGraphicsBitmapFont {
	gint ref_count;
	SdxUtilsJson* dummy2;
	SdxGraphicsTextureRegion* dummy;
	SdxGraphicsBitmapFontData* data;
	GList* regions;
};

struct _SdxGraphicsGlyph {
	gint ref_count;
	gint id;
	gint x;
	gint y;
	gint width;
	gint height;
	gfloat u;
	gfloat v;
	gfloat u2;
	gfloat v2;
	gint xoffset;
	gint yoffset;
	gint xadvance;
	gchar* kerning;
	gint kerning_length1;
	gint kerning_length2;
	gboolean fixedWidth;
	gint page;
};

struct _SdxGraphicsBitmapFontData {
	gint ref_count;
	gchar** imagePaths;
	gint imagePaths_length1;
	SdxFilesFileHandle* fontFile;
	gboolean flipped;
	gfloat padTop;
	gfloat padRight;
	gfloat padBottom;
	gfloat padLeft;
	gfloat lineHeight;
	gfloat capHeight;
	gfloat ascent;
	gfloat descent;
	gfloat down;
	gfloat blankLineScale;
	gfloat scaleX;
	gfloat scaleY;
	gboolean markupEnabled;
	gfloat cursorX;
	SdxGraphicsGlyph** glyphs;
	gint glyphs_length1;
	gint glyphs_length2;
	SdxGraphicsGlyph* missingGlyph;
	gfloat spaceWidth;
	gfloat xHeight;
	gchar* breakChars;
	gint breakChars_length1;
	gchar* xChars;
	gint xChars_length1;
	gchar* capChars;
	gint capChars_length1;
};

typedef enum  {
	SDX_SDL_EXCEPTION_Initialization,
	SDX_SDL_EXCEPTION_ImageInitialization,
	SDX_SDL_EXCEPTION_TtfInitialization,
	SDX_SDL_EXCEPTION_TextureFilteringNotEnabled,
	SDX_SDL_EXCEPTION_OpenWindow,
	SDX_SDL_EXCEPTION_CreateRenderer,
	SDX_SDL_EXCEPTION_InvalidForPlatform,
	SDX_SDL_EXCEPTION_UnableToLoadResource,
	SDX_SDL_EXCEPTION_UnableToLoadSurface,
	SDX_SDL_EXCEPTION_UnableToLoadTexture,
	SDX_SDL_EXCEPTION_NullPointer,
	SDX_SDL_EXCEPTION_NoSuchElement,
	SDX_SDL_EXCEPTION_IllegalStateException,
	SDX_SDL_EXCEPTION_IllegalArgumentException,
	SDX_SDL_EXCEPTION_RuntimeException,
	SDX_SDL_EXCEPTION_NotReached
} SdxSdlException;
#define SDX_SDL_EXCEPTION sdx_sdl_exception_quark ()
typedef enum  {
	SDX_UTILS_JS_TYPE_JS_INVALID,
	SDX_UTILS_JS_TYPE_JS_BOOLEAN,
	SDX_UTILS_JS_TYPE_JS_NUMBER,
	SDX_UTILS_JS_TYPE_JS_STRING,
	SDX_UTILS_JS_TYPE_JS_OBJECT,
	SDX_UTILS_JS_TYPE_JS_ARRAY
} SdxUtilsJsType;

struct _SdxUtilsJsVariant {
	gint ref_count;
	gboolean boolean;
	gdouble number;
	gchar* string;
	GHashTable* object;
	GList* array;
	SdxUtilsJsType type;
};

struct _SdxGraphicsTextureRegion {
	gint ref_count;
	SdxGraphicsSurfaceTextureSurface* texture;
	gint top;
	gint left;
	gint width;
	gint height;
	gint regionWidth;
	gint regionHeight;
	gfloat u;
	gfloat v;
	gfloat u2;
	gfloat v2;
	gint index;
	gchar* name;
	gint offsetX;
	gint offsetY;
	gint packedWidth;
	gint packedHeight;
	gint originalWidth;
	gint originalHeight;
	gboolean rotate;
	gint* splits;
	gint splits_length1;
	gint* pads;
	gint pads_length1;
};



void sdx_graphics_bitmap_font_free (SdxGraphicsBitmapFont * self);
void sdx_utils_json_free (SdxUtilsJson * self);
void sdx_graphics_texture_region_free (SdxGraphicsTextureRegion * self);
void sdx_graphics_bitmap_font_data_free (SdxGraphicsBitmapFontData * self);
static void sdx_graphics_bitmap_font_instance_init (SdxGraphicsBitmapFont * self);
// symtbl.2 sdx_graphics_texture_region
void sdx_graphics_texture_region_release (SdxGraphicsTextureRegion* self);
void sdx_graphics_texture_region_free (SdxGraphicsTextureRegion* self);
SdxGraphicsTextureRegion* sdx_graphics_texture_region_retain (SdxGraphicsTextureRegion* self);
static void _sdx_graphics_texture_region_release0_ (gpointer var);
static void _g_list_free__sdx_graphics_texture_region_release0_ (GList* self);
#define SDX_GRAPHICS_BITMAP_FONT_LOG2_PAGE_SIZE 9
#define SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE (1 << SDX_GRAPHICS_BITMAP_FONT_LOG2_PAGE_SIZE)
#define SDX_GRAPHICS_BITMAP_FONT_PAGES (0x10000 / SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE)
SdxGraphicsBitmapFont* sdx_graphics_bitmap_font_retain (SdxGraphicsBitmapFont* self);
void sdx_graphics_bitmap_font_release (SdxGraphicsBitmapFont* self);
void sdx_graphics_bitmap_font_free (SdxGraphicsBitmapFont* self);
SdxGraphicsBitmapFont* sdx_graphics_bitmap_font_new (void);
void sdx_graphics_glyph_free (SdxGraphicsGlyph * self);
static void sdx_graphics_glyph_instance_init (SdxGraphicsGlyph * self);
SdxGraphicsGlyph* sdx_graphics_glyph_retain (SdxGraphicsGlyph* self);
void sdx_graphics_glyph_release (SdxGraphicsGlyph* self);
void sdx_graphics_glyph_free (SdxGraphicsGlyph* self);
gint sdx_graphics_glyph_GetKerning (SdxGraphicsGlyph* self, gchar ch);
void sdx_graphics_glyph_SetKerning (SdxGraphicsGlyph* self, gint ch, gint value);
SdxGraphicsGlyph* sdx_graphics_glyph_new (void);
void sdx_files_file_handle_free (SdxFilesFileHandle * self);
static void sdx_graphics_bitmap_font_data_instance_init (SdxGraphicsBitmapFontData * self);
SdxGraphicsBitmapFontData* sdx_graphics_bitmap_font_data_retain (SdxGraphicsBitmapFontData* self);
void sdx_graphics_bitmap_font_data_release (SdxGraphicsBitmapFontData* self);
void sdx_graphics_bitmap_font_data_free (SdxGraphicsBitmapFontData* self);
SdxGraphicsBitmapFontData* sdx_graphics_bitmap_font_data_new (SdxFilesFileHandle* fontFile, gboolean flip);
void sdx_graphics_bitmap_font_data_Load (SdxGraphicsBitmapFontData* self, SdxFilesFileHandle* fontFile, gboolean flip);
GQuark sdx_sdl_exception_quark (void);
void sdx_utils_js_variant_free (SdxUtilsJsVariant * self);
SdxUtilsJsVariant* sdx_utils_json_Parse (const gchar* source);
gchar* sdx_files_file_handle_Read (SdxFilesFileHandle* self);
SdxUtilsJsVariant* sdx_utils_js_variant_Member (SdxUtilsJsVariant* self, const gchar* key);
GType sdx_utils_js_type_get_type (void) G_GNUC_CONST;
SdxFilesFileHandle* sdx_files_file_handle_GetParent (SdxFilesFileHandle* self);
SdxFilesFileHandle* sdx_files_file_handle_Child (SdxFilesFileHandle* self, const gchar* name);
gchar* sdx_files_file_handle_GetPath (SdxFilesFileHandle* self);
SdxGraphicsGlyph* sdx_graphics_bitmap_font_data_GetGlyph (SdxGraphicsBitmapFontData* self, gchar ch);
SdxGraphicsGlyph* sdx_graphics_bitmap_font_data_GetFirstGlyph (SdxGraphicsBitmapFontData* self);
void sdx_graphics_bitmap_font_data_SetGlyph (SdxGraphicsBitmapFontData* self, gint ch, SdxGraphicsGlyph* glyph);
void sdx_graphics_bitmap_font_data_SetGlyphRegion (SdxGraphicsBitmapFontData* self, SdxGraphicsGlyph* glyph, SdxGraphicsTextureRegion* region);
void sdx_graphics_surface_free (SdxGraphicsSurface * self);
gint sdx_graphics_surface_get_width (SdxGraphicsSurface* self);
gint sdx_graphics_surface_get_height (SdxGraphicsSurface* self);
gint sdx_graphics_texture_region_GetRegionWidth (SdxGraphicsTextureRegion* self);
gint sdx_graphics_texture_region_GetRegionHeight (SdxGraphicsTextureRegion* self);
void sdx_graphics_bitmap_font_data_SetLineHeight (SdxGraphicsBitmapFontData* self, gfloat height);
gboolean sdx_graphics_bitmap_font_data_HasGlyph (SdxGraphicsBitmapFontData* self, gchar ch);
gint sdx_graphics_bitmap_font_data_GetWrapIndex (SdxGraphicsBitmapFontData* self, gint start, GList* glyphs);
gboolean sdx_graphics_bitmap_font_data_IsBreakChar (SdxGraphicsBitmapFontData* self, gchar c);
gchar* sdx_graphics_bitmap_font_data_GetImagePath (SdxGraphicsBitmapFontData* self, gint index);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);


// symtbl.2 sdx_graphics_texture_region
void sdx_graphics_texture_region_release (SdxGraphicsTextureRegion* self);
void sdx_graphics_texture_region_free (SdxGraphicsTextureRegion* self);
SdxGraphicsTextureRegion* sdx_graphics_texture_region_retain (SdxGraphicsTextureRegion* self);
static void _sdx_graphics_texture_region_release0_ (gpointer var) {
	(var == NULL) ? NULL : (var = (sdx_graphics_texture_region_release (var), NULL));
}


static void _g_list_free__sdx_graphics_texture_region_release0_ (GList* self) {
	g_list_foreach (self, (GFunc) _sdx_graphics_texture_region_release0_, NULL);
	g_list_free (self);
}


SdxGraphicsBitmapFont* sdx_graphics_bitmap_font_retain (SdxGraphicsBitmapFont* self) {
	SdxGraphicsBitmapFont* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_atomic_int_add ((volatile gint *) (&self->ref_count), 1);
	result = self;
	return result;
}


void sdx_graphics_bitmap_font_release (SdxGraphicsBitmapFont* self) {
	gboolean _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = g_atomic_int_dec_and_test ((volatile gint *) (&self->ref_count));
	if (_tmp0_) {
		sdx_graphics_bitmap_font_free (self);
	}
}


SdxGraphicsBitmapFont* sdx_graphics_bitmap_font_new (void) {
	SdxGraphicsBitmapFont* self;
	self = g_slice_new0 (SdxGraphicsBitmapFont);
	sdx_graphics_bitmap_font_instance_init (self);
	return self;
}


static void sdx_graphics_bitmap_font_instance_init (SdxGraphicsBitmapFont * self) {
	self->ref_count = 1;
}


void sdx_graphics_bitmap_font_free (SdxGraphicsBitmapFont * self) {
	_sdx_utils_json_release0 (self->dummy2);
	_sdx_graphics_texture_region_release0 (self->dummy);
	_sdx_graphics_bitmap_font_data_release0 (self->data);
	__g_list_free__sdx_graphics_texture_region_release0_0 (self->regions);
	g_slice_free (SdxGraphicsBitmapFont, self);
}


SdxGraphicsGlyph* sdx_graphics_glyph_retain (SdxGraphicsGlyph* self) {
	SdxGraphicsGlyph* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_atomic_int_add ((volatile gint *) (&self->ref_count), 1);
	result = self;
	return result;
}


void sdx_graphics_glyph_release (SdxGraphicsGlyph* self) {
	gboolean _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = g_atomic_int_dec_and_test ((volatile gint *) (&self->ref_count));
	if (_tmp0_) {
		sdx_graphics_glyph_free (self);
	}
}


gint sdx_graphics_glyph_GetKerning (SdxGraphicsGlyph* self, gchar ch) {
	gint result = 0;
	gchar* _tmp0_;
	gint _tmp0__length1;
	gint _tmp0__length2;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = self->kerning;
	_tmp0__length1 = self->kerning_length1;
	_tmp0__length2 = self->kerning_length2;
	if (_tmp0_ != NULL) {
		gint i = 0;
		gchar _tmp1_;
		gchar j = '\0';
		gchar _tmp2_;
		gchar* _tmp3_;
		gint _tmp3__length1;
		gint _tmp3__length2;
		gint _tmp4_;
		gchar _tmp5_;
		gchar _tmp6_;
		_tmp1_ = ch;
		i = _tmp1_ >> SDX_GRAPHICS_BITMAP_FONT_LOG2_PAGE_SIZE;
		_tmp2_ = ch;
		j = _tmp2_ & (SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE - 1);
		_tmp3_ = self->kerning;
		_tmp3__length1 = self->kerning_length1;
		_tmp3__length2 = self->kerning_length2;
		_tmp4_ = i;
		_tmp5_ = j;
		_tmp6_ = _tmp3_[(_tmp4_ * _tmp3__length2) + _tmp5_];
		result = (gint) _tmp6_;
		return result;
	}
	result = 0;
	return result;
}


void sdx_graphics_glyph_SetKerning (SdxGraphicsGlyph* self, gint ch, gint value) {
	gchar* _tmp0_;
	gint _tmp0__length1;
	gint _tmp0__length2;
	gint i = 0;
	gint _tmp2_;
	gint j = 0;
	gint _tmp3_;
	gchar* _tmp4_;
	gint _tmp4__length1;
	gint _tmp4__length2;
	gint _tmp5_;
	gchar _tmp6_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->kerning;
	_tmp0__length1 = self->kerning_length1;
	_tmp0__length2 = self->kerning_length2;
	if (_tmp0_ == NULL) {
		gchar* _tmp1_;
		_tmp1_ = g_new0 (gchar, SDX_GRAPHICS_BITMAP_FONT_PAGES * SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE);
		self->kerning = (g_free (self->kerning), NULL);
		self->kerning = _tmp1_;
		self->kerning_length1 = SDX_GRAPHICS_BITMAP_FONT_PAGES;
		self->kerning_length2 = SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE;
	}
	_tmp2_ = ch;
	i = _tmp2_ >> SDX_GRAPHICS_BITMAP_FONT_LOG2_PAGE_SIZE;
	_tmp3_ = ch;
	j = _tmp3_ & (SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE - 1);
	_tmp4_ = self->kerning;
	_tmp4__length1 = self->kerning_length1;
	_tmp4__length2 = self->kerning_length2;
	_tmp5_ = value;
	_tmp4_[(i * _tmp4__length2) + j] = (gchar) _tmp5_;
	_tmp6_ = _tmp4_[(i * _tmp4__length2) + j];
}


SdxGraphicsGlyph* sdx_graphics_glyph_new (void) {
	SdxGraphicsGlyph* self;
	self = g_slice_new0 (SdxGraphicsGlyph);
	sdx_graphics_glyph_instance_init (self);
	return self;
}


static void sdx_graphics_glyph_instance_init (SdxGraphicsGlyph * self) {
	self->ref_count = 1;
	self->page = 0;
}


void sdx_graphics_glyph_free (SdxGraphicsGlyph * self) {
	self->kerning = (g_free (self->kerning), NULL);
	g_slice_free (SdxGraphicsGlyph, self);
}


SdxGraphicsBitmapFontData* sdx_graphics_bitmap_font_data_retain (SdxGraphicsBitmapFontData* self) {
	SdxGraphicsBitmapFontData* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_atomic_int_add ((volatile gint *) (&self->ref_count), 1);
	result = self;
	return result;
}


void sdx_graphics_bitmap_font_data_release (SdxGraphicsBitmapFontData* self) {
	gboolean _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = g_atomic_int_dec_and_test ((volatile gint *) (&self->ref_count));
	if (_tmp0_) {
		sdx_graphics_bitmap_font_data_free (self);
	}
}


static gpointer _sdx_files_file_handle_retain0 (gpointer self) {
	return self ? sdx_files_file_handle_retain (self) : NULL;
}


SdxGraphicsBitmapFontData* sdx_graphics_bitmap_font_data_new (SdxFilesFileHandle* fontFile, gboolean flip) {
	SdxGraphicsBitmapFontData* self;
	SdxFilesFileHandle* _tmp0_;
	self = g_slice_new0 (SdxGraphicsBitmapFontData);
	sdx_graphics_bitmap_font_data_instance_init (self);
	_tmp0_ = fontFile;
	if (_tmp0_ != NULL) {
		SdxFilesFileHandle* _tmp1_;
		SdxFilesFileHandle* _tmp2_;
		gboolean _tmp3_;
		SdxFilesFileHandle* _tmp4_;
		gboolean _tmp5_;
		_tmp1_ = fontFile;
		_tmp2_ = _sdx_files_file_handle_retain0 (_tmp1_);
		_sdx_files_file_handle_release0 (self->fontFile);
		self->fontFile = _tmp2_;
		_tmp3_ = flip;
		self->flipped = _tmp3_;
		_tmp4_ = fontFile;
		_tmp5_ = flip;
		sdx_graphics_bitmap_font_data_Load (self, _tmp4_, _tmp5_);
	}
	return self;
}


static gpointer _sdx_utils_js_variant_retain0 (gpointer self) {
	return self ? sdx_utils_js_variant_retain (self) : NULL;
}


static gpointer _sdx_graphics_glyph_retain0 (gpointer self) {
	return self ? sdx_graphics_glyph_retain (self) : NULL;
}


void sdx_graphics_bitmap_font_data_Load (SdxGraphicsBitmapFontData* self, SdxFilesFileHandle* fontFile, gboolean flip) {
	gchar** _tmp0_;
	gint _tmp0__length1;
	SdxUtilsJsVariant* json = NULL;
	SdxFilesFileHandle* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	SdxUtilsJsVariant* _tmp5_;
	SdxUtilsJsVariant* _tmp6_;
	gchar** padding = NULL;
	SdxUtilsJsVariant* _tmp7_;
	SdxUtilsJsVariant* _tmp8_;
	SdxUtilsJsVariant* _tmp9_;
	SdxUtilsJsVariant* _tmp10_;
	SdxUtilsJsVariant* _tmp11_;
	SdxUtilsJsVariant* _tmp12_;
	SdxUtilsJsVariant* _tmp13_;
	const gchar* _tmp14_;
	gchar** _tmp15_;
	gchar** _tmp16_;
	gchar** _tmp17_;
	gint _tmp17__length1;
	gint padding_length1;
	gint _padding_size_;
	gchar** _tmp18_;
	gint _tmp18__length1;
	gchar** _tmp21_;
	gint _tmp21__length1;
	const gchar* _tmp22_;
	gint _tmp23_;
	gchar** _tmp24_;
	gint _tmp24__length1;
	const gchar* _tmp25_;
	gint _tmp26_;
	gchar** _tmp27_;
	gint _tmp27__length1;
	const gchar* _tmp28_;
	gint _tmp29_;
	gchar** _tmp30_;
	gint _tmp30__length1;
	const gchar* _tmp31_;
	gint _tmp32_;
	gfloat padY = 0.0F;
	gfloat _tmp33_;
	gfloat _tmp34_;
	SdxUtilsJsVariant* _tmp35_;
	SdxUtilsJsVariant* _tmp36_;
	SdxUtilsJsVariant* _tmp37_;
	SdxUtilsJsVariant* _tmp38_;
	SdxUtilsJsVariant* _tmp39_;
	SdxUtilsJsVariant* _tmp40_;
	SdxUtilsJsVariant* _tmp41_;
	gdouble _tmp42_;
	gint baseLine = 0;
	SdxUtilsJsVariant* _tmp43_;
	SdxUtilsJsVariant* _tmp44_;
	SdxUtilsJsVariant* _tmp45_;
	SdxUtilsJsVariant* _tmp46_;
	SdxUtilsJsVariant* _tmp47_;
	SdxUtilsJsVariant* _tmp48_;
	SdxUtilsJsVariant* _tmp49_;
	gdouble _tmp50_;
	gint _tmp51_;
	const gchar** pages = NULL;
	SdxUtilsJsVariant* _tmp52_;
	SdxUtilsJsVariant* _tmp53_;
	SdxUtilsJsVariant* _tmp54_;
	SdxUtilsJsVariant* _tmp55_;
	SdxUtilsJsVariant* _tmp56_;
	GHashTable* _tmp57_;
	gint _tmp58_;
	gconstpointer* _tmp59_;
	const gchar** _tmp60_;
	gint _tmp60__length1;
	gint pages_length1;
	gint _pages_size_;
	gint pageCount = 0;
	const gchar** _tmp61_;
	gint _tmp61__length1;
	gint _tmp62_;
	gchar** _tmp63_;
	SdxUtilsJsVariant* _tmp94_;
	SdxUtilsJsVariant* _tmp95_;
	SdxUtilsJsVariant* _tmp96_;
	SdxUtilsJsVariant* _tmp97_;
	SdxUtilsJsVariant* _tmp98_;
	SdxUtilsJsVariant* _tmp99_;
	SdxUtilsJsVariant* _tmp100_;
	GList* _tmp101_;
	GList* _tmp102_;
	gfloat _tmp172_;
	gfloat _tmp173_;
	SdxGraphicsGlyph* spaceGlyph = NULL;
	SdxGraphicsGlyph* _tmp174_;
	SdxGraphicsGlyph* _tmp175_;
	SdxGraphicsGlyph* _tmp185_;
	gint _tmp186_;
	SdxGraphicsGlyph* _tmp194_;
	gint _tmp195_;
	SdxGraphicsGlyph* xGlyph = NULL;
	gchar* _tmp196_;
	gint _tmp196__length1;
	SdxGraphicsGlyph* _tmp200_;
	SdxGraphicsGlyph* _tmp202_;
	gint _tmp203_;
	gfloat _tmp204_;
	SdxGraphicsGlyph* capGlyph = NULL;
	gchar* _tmp205_;
	gint _tmp205__length1;
	SdxGraphicsGlyph* _tmp209_;
	gfloat _tmp234_;
	gfloat _tmp235_;
	gint _tmp236_;
	gfloat _tmp237_;
	gfloat _tmp238_;
	gboolean _tmp239_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (fontFile != NULL);
	_tmp0_ = self->imagePaths;
	_tmp0__length1 = self->imagePaths_length1;
	if (_tmp0_ != NULL) {
		GError* _tmp1_;
		_tmp1_ = g_error_new_literal (SDX_SDL_EXCEPTION, SDX_SDL_EXCEPTION_IllegalStateException, "Already loaded.");
		_inner_error_ = _tmp1_;
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp2_ = fontFile;
	_tmp3_ = sdx_files_file_handle_Read (_tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = sdx_utils_json_Parse (_tmp4_);
	_tmp6_ = _tmp5_;
	_g_free0 (_tmp4_);
	json = _tmp6_;
	_tmp7_ = json;
	_tmp8_ = sdx_utils_js_variant_Member (_tmp7_, "font");
	_tmp9_ = _tmp8_;
	_tmp10_ = sdx_utils_js_variant_Member (_tmp9_, "info");
	_tmp11_ = _tmp10_;
	_tmp12_ = sdx_utils_js_variant_Member (_tmp11_, "padding");
	_tmp13_ = _tmp12_;
	_tmp14_ = _tmp13_->string;
	_tmp16_ = _tmp15_ = g_strsplit (_tmp14_, ",", 4);
	_tmp17_ = _tmp16_;
	_tmp17__length1 = _vala_array_length (_tmp15_);
	_sdx_utils_js_variant_release0 (_tmp13_);
	_sdx_utils_js_variant_release0 (_tmp11_);
	_sdx_utils_js_variant_release0 (_tmp9_);
	padding = _tmp17_;
	padding_length1 = _tmp17__length1;
	_padding_size_ = padding_length1;
	_tmp18_ = padding;
	_tmp18__length1 = padding_length1;
	if (_tmp18__length1 != 4) {
		gchar** _tmp19_;
		gint _tmp19__length1;
		GError* _tmp20_;
		_tmp19_ = padding;
		_tmp19__length1 = padding_length1;
		_tmp20_ = g_error_new (SDX_SDL_EXCEPTION, SDX_SDL_EXCEPTION_RuntimeException, "Invalid padding: %d.", _tmp19__length1);
		_inner_error_ = _tmp20_;
		padding = (_vala_array_free (padding, padding_length1, (GDestroyNotify) g_free), NULL);
		_sdx_utils_js_variant_release0 (json);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp21_ = padding;
	_tmp21__length1 = padding_length1;
	_tmp22_ = _tmp21_[0];
	_tmp23_ = atoi (_tmp22_);
	self->padTop = (gfloat) _tmp23_;
	_tmp24_ = padding;
	_tmp24__length1 = padding_length1;
	_tmp25_ = _tmp24_[1];
	_tmp26_ = atoi (_tmp25_);
	self->padRight = (gfloat) _tmp26_;
	_tmp27_ = padding;
	_tmp27__length1 = padding_length1;
	_tmp28_ = _tmp27_[2];
	_tmp29_ = atoi (_tmp28_);
	self->padBottom = (gfloat) _tmp29_;
	_tmp30_ = padding;
	_tmp30__length1 = padding_length1;
	_tmp31_ = _tmp30_[3];
	_tmp32_ = atoi (_tmp31_);
	self->padLeft = (gfloat) _tmp32_;
	_tmp33_ = self->padTop;
	_tmp34_ = self->padBottom;
	padY = _tmp33_ + _tmp34_;
	_tmp35_ = json;
	_tmp36_ = sdx_utils_js_variant_Member (_tmp35_, "font");
	_tmp37_ = _tmp36_;
	_tmp38_ = sdx_utils_js_variant_Member (_tmp37_, "common");
	_tmp39_ = _tmp38_;
	_tmp40_ = sdx_utils_js_variant_Member (_tmp39_, "lineHeight");
	_tmp41_ = _tmp40_;
	_tmp42_ = _tmp41_->number;
	self->lineHeight = (gfloat) ((gint) _tmp42_);
	_sdx_utils_js_variant_release0 (_tmp41_);
	_sdx_utils_js_variant_release0 (_tmp39_);
	_sdx_utils_js_variant_release0 (_tmp37_);
	_tmp43_ = json;
	_tmp44_ = sdx_utils_js_variant_Member (_tmp43_, "font");
	_tmp45_ = _tmp44_;
	_tmp46_ = sdx_utils_js_variant_Member (_tmp45_, "common");
	_tmp47_ = _tmp46_;
	_tmp48_ = sdx_utils_js_variant_Member (_tmp47_, "base");
	_tmp49_ = _tmp48_;
	_tmp50_ = _tmp49_->number;
	_tmp51_ = (gint) _tmp50_;
	_sdx_utils_js_variant_release0 (_tmp49_);
	_sdx_utils_js_variant_release0 (_tmp47_);
	_sdx_utils_js_variant_release0 (_tmp45_);
	baseLine = _tmp51_;
	_tmp52_ = json;
	_tmp53_ = sdx_utils_js_variant_Member (_tmp52_, "font");
	_tmp54_ = _tmp53_;
	_tmp55_ = sdx_utils_js_variant_Member (_tmp54_, "pages");
	_tmp56_ = _tmp55_;
	_tmp57_ = _tmp56_->object;
	_tmp59_ = g_hash_table_get_keys_as_array (_tmp57_, &_tmp58_);
	_tmp60_ = _tmp59_;
	_tmp60__length1 = _tmp58_;
	_sdx_utils_js_variant_release0 (_tmp56_);
	_sdx_utils_js_variant_release0 (_tmp54_);
	pages = _tmp60_;
	pages_length1 = _tmp60__length1;
	_pages_size_ = pages_length1;
	_tmp61_ = pages;
	_tmp61__length1 = pages_length1;
	pageCount = _tmp61__length1;
	_tmp62_ = pageCount;
	_tmp63_ = g_new0 (gchar*, _tmp62_ + 1);
	self->imagePaths = (_vala_array_free (self->imagePaths, self->imagePaths_length1, (GDestroyNotify) g_free), NULL);
	self->imagePaths = _tmp63_;
	self->imagePaths_length1 = _tmp62_;
	{
		gint p = 0;
		p = 0;
		{
			gboolean _tmp64_ = FALSE;
			_tmp64_ = TRUE;
			while (TRUE) {
				gint _tmp66_;
				gint _tmp67_;
				SdxUtilsJsVariant* node = NULL;
				SdxUtilsJsVariant* _tmp68_;
				SdxUtilsJsVariant* _tmp69_;
				SdxUtilsJsVariant* _tmp70_;
				SdxUtilsJsVariant* _tmp71_;
				SdxUtilsJsVariant* _tmp72_;
				const gchar** _tmp73_;
				gint _tmp73__length1;
				gint _tmp74_;
				const gchar* _tmp75_;
				SdxUtilsJsVariant* _tmp76_;
				SdxUtilsJsVariant* _tmp77_;
				gchar* filename = NULL;
				SdxUtilsJsVariant* _tmp78_;
				SdxUtilsJsVariant* _tmp79_;
				SdxUtilsJsVariant* _tmp80_;
				const gchar* _tmp81_;
				gchar* _tmp82_;
				gchar* _tmp83_;
				gchar** _tmp84_;
				gint _tmp84__length1;
				gint _tmp85_;
				SdxFilesFileHandle* _tmp86_;
				SdxFilesFileHandle* _tmp87_;
				SdxFilesFileHandle* _tmp88_;
				const gchar* _tmp89_;
				SdxFilesFileHandle* _tmp90_;
				SdxFilesFileHandle* _tmp91_;
				gchar* _tmp92_;
				gchar* _tmp93_;
				if (!_tmp64_) {
					gint _tmp65_;
					_tmp65_ = p;
					p = _tmp65_ + 1;
				}
				_tmp64_ = FALSE;
				_tmp66_ = p;
				_tmp67_ = pageCount;
				if (!(_tmp66_ < _tmp67_)) {
					break;
				}
				_tmp68_ = json;
				_tmp69_ = sdx_utils_js_variant_Member (_tmp68_, "font");
				_tmp70_ = _tmp69_;
				_tmp71_ = sdx_utils_js_variant_Member (_tmp70_, "pages");
				_tmp72_ = _tmp71_;
				_tmp73_ = pages;
				_tmp73__length1 = pages_length1;
				_tmp74_ = p;
				_tmp75_ = _tmp73_[_tmp74_];
				_tmp76_ = sdx_utils_js_variant_Member (_tmp72_, _tmp75_);
				_tmp77_ = _tmp76_;
				_sdx_utils_js_variant_release0 (_tmp72_);
				_sdx_utils_js_variant_release0 (_tmp70_);
				node = _tmp77_;
				_tmp78_ = node;
				_tmp79_ = sdx_utils_js_variant_Member (_tmp78_, "file");
				_tmp80_ = _tmp79_;
				_tmp81_ = _tmp80_->string;
				_tmp82_ = g_strdup (_tmp81_);
				_tmp83_ = _tmp82_;
				_sdx_utils_js_variant_release0 (_tmp80_);
				filename = _tmp83_;
				_tmp84_ = self->imagePaths;
				_tmp84__length1 = self->imagePaths_length1;
				_tmp85_ = p;
				_tmp86_ = fontFile;
				_tmp87_ = sdx_files_file_handle_GetParent (_tmp86_);
				_tmp88_ = _tmp87_;
				_tmp89_ = filename;
				_tmp90_ = sdx_files_file_handle_Child (_tmp88_, _tmp89_);
				_tmp91_ = _tmp90_;
				_tmp92_ = sdx_files_file_handle_GetPath (_tmp91_);
				_g_free0 (_tmp84_[_tmp85_]);
				_tmp84_[_tmp85_] = _tmp92_;
				_tmp93_ = _tmp84_[_tmp85_];
				_sdx_files_file_handle_release0 (_tmp91_);
				_sdx_files_file_handle_release0 (_tmp88_);
				_g_free0 (filename);
				_sdx_utils_js_variant_release0 (node);
			}
		}
	}
	self->descent = (gfloat) 0;
	_tmp94_ = json;
	_tmp95_ = sdx_utils_js_variant_Member (_tmp94_, "font");
	_tmp96_ = _tmp95_;
	_tmp97_ = sdx_utils_js_variant_Member (_tmp96_, "chars");
	_tmp98_ = _tmp97_;
	_tmp99_ = sdx_utils_js_variant_Member (_tmp98_, "char");
	_tmp100_ = _tmp99_;
	_tmp101_ = _tmp100_->array;
	_tmp102_ = _tmp101_;
	_sdx_utils_js_variant_release0 (_tmp100_);
	_sdx_utils_js_variant_release0 (_tmp98_);
	_sdx_utils_js_variant_release0 (_tmp96_);
	{
		GList* ch_collection = NULL;
		GList* ch_it = NULL;
		ch_collection = _tmp102_;
		for (ch_it = ch_collection; ch_it != NULL; ch_it = ch_it->next) {
			SdxUtilsJsVariant* _tmp103_;
			SdxUtilsJsVariant* ch = NULL;
			_tmp103_ = _sdx_utils_js_variant_retain0 ((SdxUtilsJsVariant*) ch_it->data);
			ch = _tmp103_;
			{
				SdxGraphicsGlyph* glyph = NULL;
				SdxGraphicsGlyph* _tmp104_;
				SdxGraphicsGlyph* _tmp105_;
				SdxUtilsJsVariant* _tmp106_;
				SdxUtilsJsVariant* _tmp107_;
				SdxUtilsJsVariant* _tmp108_;
				const gchar* _tmp109_;
				gint _tmp110_;
				SdxGraphicsGlyph* _tmp111_;
				SdxUtilsJsVariant* _tmp112_;
				SdxUtilsJsVariant* _tmp113_;
				SdxUtilsJsVariant* _tmp114_;
				const gchar* _tmp115_;
				gint _tmp116_;
				SdxGraphicsGlyph* _tmp117_;
				SdxUtilsJsVariant* _tmp118_;
				SdxUtilsJsVariant* _tmp119_;
				SdxUtilsJsVariant* _tmp120_;
				const gchar* _tmp121_;
				gint _tmp122_;
				SdxGraphicsGlyph* _tmp123_;
				SdxUtilsJsVariant* _tmp124_;
				SdxUtilsJsVariant* _tmp125_;
				SdxUtilsJsVariant* _tmp126_;
				const gchar* _tmp127_;
				gint _tmp128_;
				SdxGraphicsGlyph* _tmp129_;
				SdxUtilsJsVariant* _tmp130_;
				SdxUtilsJsVariant* _tmp131_;
				SdxUtilsJsVariant* _tmp132_;
				const gchar* _tmp133_;
				gint _tmp134_;
				SdxGraphicsGlyph* _tmp135_;
				SdxUtilsJsVariant* _tmp136_;
				SdxUtilsJsVariant* _tmp137_;
				SdxUtilsJsVariant* _tmp138_;
				const gchar* _tmp139_;
				gint _tmp140_;
				gboolean _tmp141_;
				SdxGraphicsGlyph* _tmp156_;
				SdxUtilsJsVariant* _tmp157_;
				SdxUtilsJsVariant* _tmp158_;
				SdxUtilsJsVariant* _tmp159_;
				const gchar* _tmp160_;
				gint _tmp161_;
				gboolean _tmp162_ = FALSE;
				SdxGraphicsGlyph* _tmp163_;
				gint _tmp164_;
				_tmp104_ = sdx_graphics_glyph_new ();
				glyph = _tmp104_;
				_tmp105_ = glyph;
				_tmp106_ = ch;
				_tmp107_ = sdx_utils_js_variant_Member (_tmp106_, "id");
				_tmp108_ = _tmp107_;
				_tmp109_ = _tmp108_->string;
				_tmp110_ = atoi (_tmp109_);
				_tmp105_->id = _tmp110_;
				_sdx_utils_js_variant_release0 (_tmp108_);
				_tmp111_ = glyph;
				_tmp112_ = ch;
				_tmp113_ = sdx_utils_js_variant_Member (_tmp112_, "x");
				_tmp114_ = _tmp113_;
				_tmp115_ = _tmp114_->string;
				_tmp116_ = atoi (_tmp115_);
				_tmp111_->x = _tmp116_;
				_sdx_utils_js_variant_release0 (_tmp114_);
				_tmp117_ = glyph;
				_tmp118_ = ch;
				_tmp119_ = sdx_utils_js_variant_Member (_tmp118_, "y");
				_tmp120_ = _tmp119_;
				_tmp121_ = _tmp120_->string;
				_tmp122_ = atoi (_tmp121_);
				_tmp117_->y = _tmp122_;
				_sdx_utils_js_variant_release0 (_tmp120_);
				_tmp123_ = glyph;
				_tmp124_ = ch;
				_tmp125_ = sdx_utils_js_variant_Member (_tmp124_, "width");
				_tmp126_ = _tmp125_;
				_tmp127_ = _tmp126_->string;
				_tmp128_ = atoi (_tmp127_);
				_tmp123_->width = _tmp128_;
				_sdx_utils_js_variant_release0 (_tmp126_);
				_tmp129_ = glyph;
				_tmp130_ = ch;
				_tmp131_ = sdx_utils_js_variant_Member (_tmp130_, "height");
				_tmp132_ = _tmp131_;
				_tmp133_ = _tmp132_->string;
				_tmp134_ = atoi (_tmp133_);
				_tmp129_->height = _tmp134_;
				_sdx_utils_js_variant_release0 (_tmp132_);
				_tmp135_ = glyph;
				_tmp136_ = ch;
				_tmp137_ = sdx_utils_js_variant_Member (_tmp136_, "xoffset");
				_tmp138_ = _tmp137_;
				_tmp139_ = _tmp138_->string;
				_tmp140_ = atoi (_tmp139_);
				_tmp135_->xoffset = _tmp140_;
				_sdx_utils_js_variant_release0 (_tmp138_);
				_tmp141_ = flip;
				if (_tmp141_) {
					SdxGraphicsGlyph* _tmp142_;
					SdxUtilsJsVariant* _tmp143_;
					SdxUtilsJsVariant* _tmp144_;
					SdxUtilsJsVariant* _tmp145_;
					const gchar* _tmp146_;
					gint _tmp147_;
					_tmp142_ = glyph;
					_tmp143_ = ch;
					_tmp144_ = sdx_utils_js_variant_Member (_tmp143_, "yoffset");
					_tmp145_ = _tmp144_;
					_tmp146_ = _tmp145_->string;
					_tmp147_ = atoi (_tmp146_);
					_tmp142_->yoffset = _tmp147_;
					_sdx_utils_js_variant_release0 (_tmp145_);
				} else {
					SdxGraphicsGlyph* _tmp148_;
					SdxGraphicsGlyph* _tmp149_;
					gint _tmp150_;
					SdxUtilsJsVariant* _tmp151_;
					SdxUtilsJsVariant* _tmp152_;
					SdxUtilsJsVariant* _tmp153_;
					const gchar* _tmp154_;
					gint _tmp155_;
					_tmp148_ = glyph;
					_tmp149_ = glyph;
					_tmp150_ = _tmp149_->height;
					_tmp151_ = ch;
					_tmp152_ = sdx_utils_js_variant_Member (_tmp151_, "yoffset");
					_tmp153_ = _tmp152_;
					_tmp154_ = _tmp153_->string;
					_tmp155_ = atoi (_tmp154_);
					_tmp148_->yoffset = -(_tmp150_ + _tmp155_);
					_sdx_utils_js_variant_release0 (_tmp153_);
				}
				_tmp156_ = glyph;
				_tmp157_ = ch;
				_tmp158_ = sdx_utils_js_variant_Member (_tmp157_, "xadvance");
				_tmp159_ = _tmp158_;
				_tmp160_ = _tmp159_->string;
				_tmp161_ = atoi (_tmp160_);
				_tmp156_->xadvance = _tmp161_;
				_sdx_utils_js_variant_release0 (_tmp159_);
				_tmp163_ = glyph;
				_tmp164_ = _tmp163_->width;
				if (_tmp164_ > 0) {
					SdxGraphicsGlyph* _tmp165_;
					gint _tmp166_;
					_tmp165_ = glyph;
					_tmp166_ = _tmp165_->height;
					_tmp162_ = _tmp166_ > 0;
				} else {
					_tmp162_ = FALSE;
				}
				if (_tmp162_) {
					gint _tmp167_;
					SdxGraphicsGlyph* _tmp168_;
					gint _tmp169_;
					gfloat _tmp170_;
					gfloat _tmp171_;
					_tmp167_ = baseLine;
					_tmp168_ = glyph;
					_tmp169_ = _tmp168_->yoffset;
					_tmp170_ = self->descent;
					_tmp171_ = fminf ((gfloat) (_tmp167_ + _tmp169_), _tmp170_);
					self->descent = _tmp171_;
				}
				_sdx_graphics_glyph_release0 (glyph);
				_sdx_utils_js_variant_release0 (ch);
			}
		}
	}
	_tmp172_ = self->descent;
	_tmp173_ = self->padBottom;
	self->descent = _tmp172_ + _tmp173_;
	_tmp174_ = sdx_graphics_bitmap_font_data_GetGlyph (self, ' ');
	spaceGlyph = _tmp174_;
	_tmp175_ = spaceGlyph;
	if (_tmp175_ == NULL) {
		SdxGraphicsGlyph* _tmp176_;
		SdxGraphicsGlyph* _tmp177_;
		SdxGraphicsGlyph* xadvanceGlyph = NULL;
		SdxGraphicsGlyph* _tmp178_;
		SdxGraphicsGlyph* _tmp179_;
		SdxGraphicsGlyph* _tmp181_;
		SdxGraphicsGlyph* _tmp182_;
		gint _tmp183_;
		SdxGraphicsGlyph* _tmp184_;
		_tmp176_ = sdx_graphics_glyph_new ();
		_sdx_graphics_glyph_release0 (spaceGlyph);
		spaceGlyph = _tmp176_;
		_tmp177_ = spaceGlyph;
		_tmp177_->id = (gint) ' ';
		_tmp178_ = sdx_graphics_bitmap_font_data_GetGlyph (self, 'l');
		xadvanceGlyph = _tmp178_;
		_tmp179_ = xadvanceGlyph;
		if (_tmp179_ == NULL) {
			SdxGraphicsGlyph* _tmp180_;
			_tmp180_ = sdx_graphics_bitmap_font_data_GetFirstGlyph (self);
			_sdx_graphics_glyph_release0 (xadvanceGlyph);
			xadvanceGlyph = _tmp180_;
		}
		_tmp181_ = spaceGlyph;
		_tmp182_ = xadvanceGlyph;
		_tmp183_ = _tmp182_->xadvance;
		_tmp181_->xadvance = _tmp183_;
		_tmp184_ = spaceGlyph;
		sdx_graphics_bitmap_font_data_SetGlyph (self, (gint) ' ', _tmp184_);
		_sdx_graphics_glyph_release0 (xadvanceGlyph);
	}
	_tmp185_ = spaceGlyph;
	_tmp186_ = _tmp185_->width;
	if (_tmp186_ == 0) {
		SdxGraphicsGlyph* _tmp187_;
		gfloat _tmp188_;
		SdxGraphicsGlyph* _tmp189_;
		gint _tmp190_;
		gfloat _tmp191_;
		SdxGraphicsGlyph* _tmp192_;
		gfloat _tmp193_;
		_tmp187_ = spaceGlyph;
		_tmp188_ = self->padLeft;
		_tmp189_ = spaceGlyph;
		_tmp190_ = _tmp189_->xadvance;
		_tmp191_ = self->padRight;
		_tmp187_->width = (gint) ((_tmp188_ + _tmp190_) + _tmp191_);
		_tmp192_ = spaceGlyph;
		_tmp193_ = self->padLeft;
		_tmp192_->xoffset = (gint) (-_tmp193_);
	}
	_tmp194_ = spaceGlyph;
	_tmp195_ = _tmp194_->width;
	self->spaceWidth = (gfloat) _tmp195_;
	xGlyph = NULL;
	_tmp196_ = self->xChars;
	_tmp196__length1 = self->xChars_length1;
	{
		gchar* xChar_collection = NULL;
		gint xChar_collection_length1 = 0;
		gint _xChar_collection_size_ = 0;
		gint xChar_it = 0;
		xChar_collection = _tmp196_;
		xChar_collection_length1 = _tmp196__length1;
		for (xChar_it = 0; xChar_it < _tmp196__length1; xChar_it = xChar_it + 1) {
			gchar xChar = '\0';
			xChar = xChar_collection[xChar_it];
			{
				gchar _tmp197_;
				SdxGraphicsGlyph* _tmp198_;
				SdxGraphicsGlyph* _tmp199_;
				_tmp197_ = xChar;
				_tmp198_ = sdx_graphics_bitmap_font_data_GetGlyph (self, _tmp197_);
				_sdx_graphics_glyph_release0 (xGlyph);
				xGlyph = _tmp198_;
				_tmp199_ = xGlyph;
				if (_tmp199_ != NULL) {
					break;
				}
			}
		}
	}
	_tmp200_ = xGlyph;
	if (_tmp200_ == NULL) {
		SdxGraphicsGlyph* _tmp201_;
		_tmp201_ = sdx_graphics_bitmap_font_data_GetFirstGlyph (self);
		_sdx_graphics_glyph_release0 (xGlyph);
		xGlyph = _tmp201_;
	}
	_tmp202_ = xGlyph;
	_tmp203_ = _tmp202_->height;
	_tmp204_ = padY;
	self->xHeight = _tmp203_ - _tmp204_;
	capGlyph = NULL;
	_tmp205_ = self->capChars;
	_tmp205__length1 = self->capChars_length1;
	{
		gchar* capChar_collection = NULL;
		gint capChar_collection_length1 = 0;
		gint _capChar_collection_size_ = 0;
		gint capChar_it = 0;
		capChar_collection = _tmp205_;
		capChar_collection_length1 = _tmp205__length1;
		for (capChar_it = 0; capChar_it < _tmp205__length1; capChar_it = capChar_it + 1) {
			gchar capChar = '\0';
			capChar = capChar_collection[capChar_it];
			{
				gchar _tmp206_;
				SdxGraphicsGlyph* _tmp207_;
				SdxGraphicsGlyph* _tmp208_;
				_tmp206_ = capChar;
				_tmp207_ = sdx_graphics_bitmap_font_data_GetGlyph (self, _tmp206_);
				_sdx_graphics_glyph_release0 (capGlyph);
				capGlyph = _tmp207_;
				_tmp208_ = capGlyph;
				if (_tmp208_ != NULL) {
					break;
				}
			}
		}
	}
	_tmp209_ = capGlyph;
	if (_tmp209_ == NULL) {
		{
			gint p = 0;
			p = 0;
			{
				gboolean _tmp210_ = FALSE;
				_tmp210_ = TRUE;
				while (TRUE) {
					gint _tmp212_;
					if (!_tmp210_) {
						gint _tmp211_;
						_tmp211_ = p;
						p = _tmp211_ + 1;
					}
					_tmp210_ = FALSE;
					_tmp212_ = p;
					if (!(_tmp212_ < SDX_GRAPHICS_BITMAP_FONT_PAGES)) {
						break;
					}
					{
						gint g = 0;
						g = 0;
						{
							gboolean _tmp213_ = FALSE;
							_tmp213_ = TRUE;
							while (TRUE) {
								gint _tmp215_;
								SdxGraphicsGlyph* glyph = NULL;
								SdxGraphicsGlyph** _tmp216_;
								gint _tmp216__length1;
								gint _tmp216__length2;
								gint _tmp217_;
								gint _tmp218_;
								SdxGraphicsGlyph* _tmp219_;
								SdxGraphicsGlyph* _tmp220_;
								gboolean _tmp221_ = FALSE;
								gboolean _tmp222_ = FALSE;
								SdxGraphicsGlyph* _tmp223_;
								gfloat _tmp228_;
								SdxGraphicsGlyph* _tmp229_;
								gint _tmp230_;
								gfloat _tmp231_;
								if (!_tmp213_) {
									gint _tmp214_;
									_tmp214_ = g;
									g = _tmp214_ + 1;
								}
								_tmp213_ = FALSE;
								_tmp215_ = g;
								if (!(_tmp215_ < SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE)) {
									break;
								}
								_tmp216_ = self->glyphs;
								_tmp216__length1 = self->glyphs_length1;
								_tmp216__length2 = self->glyphs_length2;
								_tmp217_ = p;
								_tmp218_ = g;
								_tmp219_ = _tmp216_[(_tmp217_ * _tmp216__length2) + _tmp218_];
								_tmp220_ = _sdx_graphics_glyph_retain0 (_tmp219_);
								glyph = _tmp220_;
								_tmp223_ = glyph;
								if (_tmp223_ == NULL) {
									_tmp222_ = TRUE;
								} else {
									SdxGraphicsGlyph* _tmp224_;
									gint _tmp225_;
									_tmp224_ = glyph;
									_tmp225_ = _tmp224_->height;
									_tmp222_ = _tmp225_ == 0;
								}
								if (_tmp222_) {
									_tmp221_ = TRUE;
								} else {
									SdxGraphicsGlyph* _tmp226_;
									gint _tmp227_;
									_tmp226_ = glyph;
									_tmp227_ = _tmp226_->width;
									_tmp221_ = _tmp227_ == 0;
								}
								if (_tmp221_) {
									_sdx_graphics_glyph_release0 (glyph);
									continue;
								}
								_tmp228_ = self->capHeight;
								_tmp229_ = glyph;
								_tmp230_ = _tmp229_->height;
								_tmp231_ = fmaxf (_tmp228_, (gfloat) _tmp230_);
								self->capHeight = _tmp231_;
								_sdx_graphics_glyph_release0 (glyph);
							}
						}
					}
				}
			}
		}
	} else {
		SdxGraphicsGlyph* _tmp232_;
		gint _tmp233_;
		_tmp232_ = capGlyph;
		_tmp233_ = _tmp232_->height;
		self->capHeight = (gfloat) _tmp233_;
	}
	_tmp234_ = self->capHeight;
	_tmp235_ = padY;
	self->capHeight = _tmp234_ - _tmp235_;
	_tmp236_ = baseLine;
	_tmp237_ = self->capHeight;
	self->ascent = _tmp236_ - _tmp237_;
	_tmp238_ = self->lineHeight;
	self->down = -_tmp238_;
	_tmp239_ = flip;
	if (_tmp239_) {
		gfloat _tmp240_;
		gfloat _tmp241_;
		_tmp240_ = self->ascent;
		self->ascent = -_tmp240_;
		_tmp241_ = self->down;
		self->down = -_tmp241_;
	}
	_sdx_graphics_glyph_release0 (capGlyph);
	_sdx_graphics_glyph_release0 (xGlyph);
	_sdx_graphics_glyph_release0 (spaceGlyph);
	pages = (g_free (pages), NULL);
	padding = (_vala_array_free (padding, padding_length1, (GDestroyNotify) g_free), NULL);
	_sdx_utils_js_variant_release0 (json);
}


static gpointer _sdx_graphics_surface_retain0 (gpointer self) {
	return self ? sdx_graphics_surface_retain (self) : NULL;
}


void sdx_graphics_bitmap_font_data_SetGlyphRegion (SdxGraphicsBitmapFontData* self, SdxGraphicsGlyph* glyph, SdxGraphicsTextureRegion* region) {
	SdxGraphicsSurfaceTextureSurface* texture = NULL;
	SdxGraphicsTextureRegion* _tmp0_;
	SdxGraphicsSurfaceTextureSurface* _tmp1_;
	SdxGraphicsSurfaceTextureSurface* _tmp2_;
	gfloat invTexWidth = 0.0F;
	SdxGraphicsSurfaceTextureSurface* _tmp3_;
	gint _tmp4_;
	gint _tmp5_;
	gfloat invTexHeight = 0.0F;
	SdxGraphicsSurfaceTextureSurface* _tmp6_;
	gint _tmp7_;
	gint _tmp8_;
	gint offsetX = 0;
	gint offsetY = 0;
	gfloat u = 0.0F;
	SdxGraphicsTextureRegion* _tmp9_;
	gfloat _tmp10_;
	gfloat v = 0.0F;
	SdxGraphicsTextureRegion* _tmp11_;
	gfloat _tmp12_;
	gint regionWidth = 0;
	SdxGraphicsTextureRegion* _tmp13_;
	gint _tmp14_;
	gint regionHeight = 0;
	SdxGraphicsTextureRegion* _tmp15_;
	gint _tmp16_;
	gint x = 0;
	SdxGraphicsGlyph* _tmp17_;
	gint _tmp18_;
	gint x2 = 0;
	SdxGraphicsGlyph* _tmp19_;
	gint _tmp20_;
	SdxGraphicsGlyph* _tmp21_;
	gint _tmp22_;
	gint y = 0;
	SdxGraphicsGlyph* _tmp23_;
	gint _tmp24_;
	gint y2 = 0;
	SdxGraphicsGlyph* _tmp25_;
	gint _tmp26_;
	SdxGraphicsGlyph* _tmp27_;
	gint _tmp28_;
	gint _tmp29_;
	gint _tmp51_;
	SdxGraphicsGlyph* _tmp74_;
	gfloat _tmp75_;
	gint _tmp76_;
	gfloat _tmp77_;
	SdxGraphicsGlyph* _tmp78_;
	gfloat _tmp79_;
	gint _tmp80_;
	gfloat _tmp81_;
	gboolean _tmp82_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (glyph != NULL);
	g_return_if_fail (region != NULL);
	_tmp0_ = region;
	_tmp1_ = _tmp0_->texture;
	_tmp2_ = _sdx_graphics_surface_retain0 (_tmp1_);
	texture = _tmp2_;
	_tmp3_ = texture;
	_tmp4_ = sdx_graphics_surface_get_width ((SdxGraphicsSurface*) _tmp3_);
	_tmp5_ = _tmp4_;
	invTexWidth = 1.0f / _tmp5_;
	_tmp6_ = texture;
	_tmp7_ = sdx_graphics_surface_get_height ((SdxGraphicsSurface*) _tmp6_);
	_tmp8_ = _tmp7_;
	invTexHeight = 1.0f / _tmp8_;
	offsetX = 0;
	offsetY = 0;
	_tmp9_ = region;
	_tmp10_ = _tmp9_->u;
	u = _tmp10_;
	_tmp11_ = region;
	_tmp12_ = _tmp11_->v;
	v = _tmp12_;
	_tmp13_ = region;
	_tmp14_ = sdx_graphics_texture_region_GetRegionWidth (_tmp13_);
	regionWidth = _tmp14_;
	_tmp15_ = region;
	_tmp16_ = sdx_graphics_texture_region_GetRegionHeight (_tmp15_);
	regionHeight = _tmp16_;
	_tmp17_ = glyph;
	_tmp18_ = _tmp17_->x;
	x = _tmp18_;
	_tmp19_ = glyph;
	_tmp20_ = _tmp19_->x;
	_tmp21_ = glyph;
	_tmp22_ = _tmp21_->width;
	x2 = _tmp20_ + _tmp22_;
	_tmp23_ = glyph;
	_tmp24_ = _tmp23_->y;
	y = _tmp24_;
	_tmp25_ = glyph;
	_tmp26_ = _tmp25_->y;
	_tmp27_ = glyph;
	_tmp28_ = _tmp27_->height;
	y2 = _tmp26_ + _tmp28_;
	_tmp29_ = offsetX;
	if (_tmp29_ > 0) {
		gint _tmp30_;
		gint _tmp31_;
		gint _tmp32_;
		gint _tmp41_;
		gint _tmp42_;
		gint _tmp43_;
		gint _tmp44_;
		_tmp30_ = x;
		_tmp31_ = offsetX;
		x = _tmp30_ - _tmp31_;
		_tmp32_ = x;
		if (_tmp32_ < 0) {
			SdxGraphicsGlyph* _tmp33_;
			SdxGraphicsGlyph* _tmp34_;
			gint _tmp35_;
			gint _tmp36_;
			SdxGraphicsGlyph* _tmp37_;
			SdxGraphicsGlyph* _tmp38_;
			gint _tmp39_;
			gint _tmp40_;
			_tmp33_ = glyph;
			_tmp34_ = glyph;
			_tmp35_ = _tmp34_->width;
			_tmp36_ = x;
			_tmp34_->width = _tmp35_ + _tmp36_;
			_tmp37_ = glyph;
			_tmp38_ = glyph;
			_tmp39_ = _tmp38_->xoffset;
			_tmp40_ = x;
			_tmp38_->xoffset = _tmp39_ - _tmp40_;
			x = 0;
		}
		_tmp41_ = x2;
		_tmp42_ = offsetX;
		x2 = _tmp41_ - _tmp42_;
		_tmp43_ = x2;
		_tmp44_ = regionWidth;
		if (_tmp43_ > _tmp44_) {
			SdxGraphicsGlyph* _tmp45_;
			SdxGraphicsGlyph* _tmp46_;
			gint _tmp47_;
			gint _tmp48_;
			gint _tmp49_;
			gint _tmp50_;
			_tmp45_ = glyph;
			_tmp46_ = glyph;
			_tmp47_ = _tmp46_->width;
			_tmp48_ = x2;
			_tmp49_ = regionWidth;
			_tmp46_->width = _tmp47_ - (_tmp48_ - _tmp49_);
			_tmp50_ = regionWidth;
			x2 = _tmp50_;
		}
	}
	_tmp51_ = offsetY;
	if (_tmp51_ > 0) {
		gint _tmp52_;
		gint _tmp53_;
		gint _tmp54_;
		gint _tmp59_;
		gint _tmp60_;
		gint _tmp61_;
		gint _tmp62_;
		_tmp52_ = y;
		_tmp53_ = offsetY;
		y = _tmp52_ - _tmp53_;
		_tmp54_ = y;
		if (_tmp54_ < 0) {
			SdxGraphicsGlyph* _tmp55_;
			SdxGraphicsGlyph* _tmp56_;
			gint _tmp57_;
			gint _tmp58_;
			_tmp55_ = glyph;
			_tmp56_ = glyph;
			_tmp57_ = _tmp56_->height;
			_tmp58_ = y;
			_tmp56_->height = _tmp57_ + _tmp58_;
			y = 0;
		}
		_tmp59_ = y2;
		_tmp60_ = offsetY;
		y2 = _tmp59_ - _tmp60_;
		_tmp61_ = y2;
		_tmp62_ = regionHeight;
		if (_tmp61_ > _tmp62_) {
			gint amount = 0;
			gint _tmp63_;
			gint _tmp64_;
			SdxGraphicsGlyph* _tmp65_;
			SdxGraphicsGlyph* _tmp66_;
			gint _tmp67_;
			gint _tmp68_;
			SdxGraphicsGlyph* _tmp69_;
			SdxGraphicsGlyph* _tmp70_;
			gint _tmp71_;
			gint _tmp72_;
			gint _tmp73_;
			_tmp63_ = y2;
			_tmp64_ = regionHeight;
			amount = _tmp63_ - _tmp64_;
			_tmp65_ = glyph;
			_tmp66_ = glyph;
			_tmp67_ = _tmp66_->height;
			_tmp68_ = amount;
			_tmp66_->height = _tmp67_ - _tmp68_;
			_tmp69_ = glyph;
			_tmp70_ = glyph;
			_tmp71_ = _tmp70_->yoffset;
			_tmp72_ = amount;
			_tmp70_->yoffset = _tmp71_ + _tmp72_;
			_tmp73_ = regionHeight;
			y2 = _tmp73_;
		}
	}
	_tmp74_ = glyph;
	_tmp75_ = u;
	_tmp76_ = x;
	_tmp77_ = invTexWidth;
	_tmp74_->u = _tmp75_ + (_tmp76_ * _tmp77_);
	_tmp78_ = glyph;
	_tmp79_ = u;
	_tmp80_ = x2;
	_tmp81_ = invTexWidth;
	_tmp78_->u2 = _tmp79_ + (_tmp80_ * _tmp81_);
	_tmp82_ = self->flipped;
	if (_tmp82_) {
		SdxGraphicsGlyph* _tmp83_;
		gfloat _tmp84_;
		gint _tmp85_;
		gfloat _tmp86_;
		SdxGraphicsGlyph* _tmp87_;
		gfloat _tmp88_;
		gint _tmp89_;
		gfloat _tmp90_;
		_tmp83_ = glyph;
		_tmp84_ = v;
		_tmp85_ = y;
		_tmp86_ = invTexHeight;
		_tmp83_->v = _tmp84_ + (_tmp85_ * _tmp86_);
		_tmp87_ = glyph;
		_tmp88_ = v;
		_tmp89_ = y2;
		_tmp90_ = invTexHeight;
		_tmp87_->v2 = _tmp88_ + (_tmp89_ * _tmp90_);
	} else {
		SdxGraphicsGlyph* _tmp91_;
		gfloat _tmp92_;
		gint _tmp93_;
		gfloat _tmp94_;
		SdxGraphicsGlyph* _tmp95_;
		gfloat _tmp96_;
		gint _tmp97_;
		gfloat _tmp98_;
		_tmp91_ = glyph;
		_tmp92_ = v;
		_tmp93_ = y;
		_tmp94_ = invTexHeight;
		_tmp91_->v2 = _tmp92_ + (_tmp93_ * _tmp94_);
		_tmp95_ = glyph;
		_tmp96_ = v;
		_tmp97_ = y2;
		_tmp98_ = invTexHeight;
		_tmp95_->v = _tmp96_ + (_tmp97_ * _tmp98_);
	}
	_sdx_graphics_surface_release0 (texture);
}


void sdx_graphics_bitmap_font_data_SetLineHeight (SdxGraphicsBitmapFontData* self, gfloat height) {
	gfloat _tmp0_;
	gfloat _tmp1_;
	gfloat _tmp2_ = 0.0F;
	gboolean _tmp3_;
	g_return_if_fail (self != NULL);
	_tmp0_ = height;
	_tmp1_ = self->scaleY;
	self->lineHeight = _tmp0_ * _tmp1_;
	_tmp3_ = self->flipped;
	if (_tmp3_) {
		gfloat _tmp4_;
		_tmp4_ = self->lineHeight;
		_tmp2_ = _tmp4_;
	} else {
		gfloat _tmp5_;
		_tmp5_ = self->lineHeight;
		_tmp2_ = -_tmp5_;
	}
	self->down = _tmp2_;
}


void sdx_graphics_bitmap_font_data_SetGlyph (SdxGraphicsBitmapFontData* self, gint ch, SdxGraphicsGlyph* glyph) {
	SdxGraphicsGlyph** _tmp0_;
	gint _tmp0__length1;
	gint _tmp0__length2;
	gint _tmp1_;
	gint _tmp2_;
	SdxGraphicsGlyph* _tmp3_;
	SdxGraphicsGlyph* _tmp4_;
	SdxGraphicsGlyph* _tmp5_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (glyph != NULL);
	_tmp0_ = self->glyphs;
	_tmp0__length1 = self->glyphs_length1;
	_tmp0__length2 = self->glyphs_length2;
	_tmp1_ = ch;
	_tmp2_ = ch;
	_tmp3_ = glyph;
	_tmp4_ = _sdx_graphics_glyph_retain0 (_tmp3_);
	_sdx_graphics_glyph_release0 (_tmp0_[((_tmp1_ / SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE) * _tmp0__length2) + (_tmp2_ & (SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE - 1))]);
	_tmp0_[((_tmp1_ / SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE) * _tmp0__length2) + (_tmp2_ & (SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE - 1))] = _tmp4_;
	_tmp5_ = _tmp0_[((_tmp1_ / SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE) * _tmp0__length2) + (_tmp2_ & (SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE - 1))];
}


SdxGraphicsGlyph* sdx_graphics_bitmap_font_data_GetFirstGlyph (SdxGraphicsBitmapFontData* self) {
	SdxGraphicsGlyph* result = NULL;
	GError* _tmp18_;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	{
		gint p = 0;
		p = 0;
		{
			gboolean _tmp0_ = FALSE;
			_tmp0_ = TRUE;
			while (TRUE) {
				gint _tmp2_;
				if (!_tmp0_) {
					gint _tmp1_;
					_tmp1_ = p;
					p = _tmp1_ + 1;
				}
				_tmp0_ = FALSE;
				_tmp2_ = p;
				if (!(_tmp2_ < SDX_GRAPHICS_BITMAP_FONT_PAGES)) {
					break;
				}
				{
					gint g = 0;
					g = 0;
					{
						gboolean _tmp3_ = FALSE;
						_tmp3_ = TRUE;
						while (TRUE) {
							gint _tmp5_;
							SdxGraphicsGlyph* glyph = NULL;
							SdxGraphicsGlyph** _tmp6_;
							gint _tmp6__length1;
							gint _tmp6__length2;
							gint _tmp7_;
							gint _tmp8_;
							SdxGraphicsGlyph* _tmp9_;
							SdxGraphicsGlyph* _tmp10_;
							gboolean _tmp11_ = FALSE;
							gboolean _tmp12_ = FALSE;
							SdxGraphicsGlyph* _tmp13_;
							if (!_tmp3_) {
								gint _tmp4_;
								_tmp4_ = g;
								g = _tmp4_ + 1;
							}
							_tmp3_ = FALSE;
							_tmp5_ = g;
							if (!(_tmp5_ < SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE)) {
								break;
							}
							_tmp6_ = self->glyphs;
							_tmp6__length1 = self->glyphs_length1;
							_tmp6__length2 = self->glyphs_length2;
							_tmp7_ = p;
							_tmp8_ = g;
							_tmp9_ = _tmp6_[(_tmp7_ * _tmp6__length2) + _tmp8_];
							_tmp10_ = _sdx_graphics_glyph_retain0 (_tmp9_);
							glyph = _tmp10_;
							_tmp13_ = glyph;
							if (_tmp13_ == NULL) {
								_tmp12_ = TRUE;
							} else {
								SdxGraphicsGlyph* _tmp14_;
								gint _tmp15_;
								_tmp14_ = glyph;
								_tmp15_ = _tmp14_->height;
								_tmp12_ = _tmp15_ == 0;
							}
							if (_tmp12_) {
								_tmp11_ = TRUE;
							} else {
								SdxGraphicsGlyph* _tmp16_;
								gint _tmp17_;
								_tmp16_ = glyph;
								_tmp17_ = _tmp16_->width;
								_tmp11_ = _tmp17_ == 0;
							}
							if (_tmp11_) {
								_sdx_graphics_glyph_release0 (glyph);
								continue;
							}
							result = glyph;
							return result;
						}
					}
				}
			}
		}
	}
	_tmp18_ = g_error_new_literal (SDX_SDL_EXCEPTION, SDX_SDL_EXCEPTION_RuntimeException, "No glyphs found.");
	_inner_error_ = _tmp18_;
	g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
	g_clear_error (&_inner_error_);
	return NULL;
}


gboolean sdx_graphics_bitmap_font_data_HasGlyph (SdxGraphicsBitmapFontData* self, gchar ch) {
	gboolean result = FALSE;
	SdxGraphicsGlyph* _tmp0_;
	gchar _tmp1_;
	SdxGraphicsGlyph* _tmp2_;
	SdxGraphicsGlyph* _tmp3_;
	gboolean _tmp4_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = self->missingGlyph;
	if (_tmp0_ != NULL) {
		result = TRUE;
		return result;
	}
	_tmp1_ = ch;
	_tmp2_ = sdx_graphics_bitmap_font_data_GetGlyph (self, _tmp1_);
	_tmp3_ = _tmp2_;
	_tmp4_ = _tmp3_ != NULL;
	_sdx_graphics_glyph_release0 (_tmp3_);
	result = _tmp4_;
	return result;
}


SdxGraphicsGlyph* sdx_graphics_bitmap_font_data_GetGlyph (SdxGraphicsBitmapFontData* self, gchar ch) {
	SdxGraphicsGlyph* result = NULL;
	SdxGraphicsGlyph** _tmp0_;
	gint _tmp0__length1;
	gint _tmp0__length2;
	gchar _tmp1_;
	gchar _tmp2_;
	SdxGraphicsGlyph* _tmp3_;
	SdxGraphicsGlyph* _tmp4_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->glyphs;
	_tmp0__length1 = self->glyphs_length1;
	_tmp0__length2 = self->glyphs_length2;
	_tmp1_ = ch;
	_tmp2_ = ch;
	_tmp3_ = _tmp0_[((_tmp1_ / SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE) * _tmp0__length2) + (_tmp2_ & (SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE - 1))];
	_tmp4_ = _sdx_graphics_glyph_retain0 (_tmp3_);
	result = _tmp4_;
	return result;
}


gint sdx_graphics_bitmap_font_data_GetWrapIndex (SdxGraphicsBitmapFontData* self, gint start, GList* glyphs) {
	gint result = 0;
	g_return_val_if_fail (self != NULL, 0);
	result = 0;
	return result;
}


gboolean sdx_graphics_bitmap_font_data_IsBreakChar (SdxGraphicsBitmapFontData* self, gchar c) {
	gboolean result = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	result = FALSE;
	return result;
}


gchar* sdx_graphics_bitmap_font_data_GetImagePath (SdxGraphicsBitmapFontData* self, gint index) {
	gchar* result = NULL;
	gchar** _tmp0_;
	gint _tmp0__length1;
	gint _tmp1_;
	const gchar* _tmp2_;
	gchar* _tmp3_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->imagePaths;
	_tmp0__length1 = self->imagePaths_length1;
	_tmp1_ = index;
	_tmp2_ = _tmp0_[_tmp1_];
	_tmp3_ = g_strdup (_tmp2_);
	result = _tmp3_;
	return result;
}


static void sdx_graphics_bitmap_font_data_instance_init (SdxGraphicsBitmapFontData * self) {
	SdxGraphicsGlyph** _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	self->ref_count = 1;
	self->capHeight = (gfloat) 1;
	self->blankLineScale = (gfloat) 1;
	self->scaleX = (gfloat) 1;
	self->scaleY = (gfloat) 1;
	_tmp0_ = g_new0 (SdxGraphicsGlyph*, (SDX_GRAPHICS_BITMAP_FONT_PAGES * SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE) + 1);
	self->glyphs = _tmp0_;
	self->glyphs_length1 = SDX_GRAPHICS_BITMAP_FONT_PAGES;
	self->glyphs_length2 = SDX_GRAPHICS_BITMAP_FONT_PAGE_SIZE;
	self->xHeight = (gfloat) 1;
	_tmp1_ = g_new0 (gchar, 13);
	_tmp1_[0] = 'x';
	_tmp1_[1] = 'e';
	_tmp1_[2] = 'a';
	_tmp1_[3] = 'o';
	_tmp1_[4] = 'n';
	_tmp1_[5] = 's';
	_tmp1_[6] = 'r';
	_tmp1_[7] = 'c';
	_tmp1_[8] = 'u';
	_tmp1_[9] = 'm';
	_tmp1_[10] = 'v';
	_tmp1_[11] = 'w';
	_tmp1_[12] = 'z';
	self->xChars = _tmp1_;
	self->xChars_length1 = 13;
	_tmp2_ = g_new0 (gchar, 26);
	_tmp2_[0] = 'M';
	_tmp2_[1] = 'N';
	_tmp2_[2] = 'B';
	_tmp2_[3] = 'D';
	_tmp2_[4] = 'C';
	_tmp2_[5] = 'E';
	_tmp2_[6] = 'F';
	_tmp2_[7] = 'K';
	_tmp2_[8] = 'A';
	_tmp2_[9] = 'G';
	_tmp2_[10] = 'H';
	_tmp2_[11] = 'I';
	_tmp2_[12] = 'J';
	_tmp2_[13] = 'L';
	_tmp2_[14] = 'O';
	_tmp2_[15] = 'P';
	_tmp2_[16] = 'Q';
	_tmp2_[17] = 'R';
	_tmp2_[18] = 'S';
	_tmp2_[19] = 'T';
	_tmp2_[20] = 'U';
	_tmp2_[21] = 'V';
	_tmp2_[22] = 'W';
	_tmp2_[23] = 'X';
	_tmp2_[24] = 'Y';
	_tmp2_[25] = 'Z';
	self->capChars = _tmp2_;
	self->capChars_length1 = 26;
}


void sdx_graphics_bitmap_font_data_free (SdxGraphicsBitmapFontData * self) {
	self->imagePaths = (_vala_array_free (self->imagePaths, self->imagePaths_length1, (GDestroyNotify) g_free), NULL);
	_sdx_files_file_handle_release0 (self->fontFile);
	self->glyphs = (_vala_array_free (self->glyphs, self->glyphs_length1 * self->glyphs_length2, (GDestroyNotify) sdx_graphics_glyph_release), NULL);
	_sdx_graphics_glyph_release0 (self->missingGlyph);
	self->breakChars = (g_free (self->breakChars), NULL);
	self->xChars = (g_free (self->xChars), NULL);
	self->capChars = (g_free (self->capChars), NULL);
	g_slice_free (SdxGraphicsBitmapFontData, self);
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}


static gint _vala_array_length (gpointer array) {
	int length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}




