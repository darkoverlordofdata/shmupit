/** updated by adriac */
/* Factory.c generated by valac 0.36.4-dirty, the Vala compiler
 * generated from Factory.vala, do not modify */

/*[Adriac:::Factory:Factory:factory]*/

#include <glib.h>
#include <glib-object.h>
#include <float.h>
#include <math.h>
#include <stdlib.h>
#include <string.h>
#include <SDL_rect.h>
#include <SDL_pixels.h>


#define TYPE_POOL (pool_get_type ())
typedef struct _EntitasWorld EntitasWorld;

#define ENTITAS_TYPE_ENTITY (entitas_entity_get_type ())

#define ENTITAS_TYPE_TRANSFORM (entitas_transform_get_type ())

#define SDX_MATH_TYPE_VECTOR2 (sdx_math_vector2_get_type ())
typedef struct _SdxMathVector2 SdxMathVector2;
typedef struct _SdxGraphicsSprite SdxGraphicsSprite;
typedef struct _EntitasTransform EntitasTransform;
typedef struct _EntitasEventEntityChanged EntitasEventEntityChanged;
typedef struct _EntitasEventEntityReleased EntitasEventEntityReleased;
typedef struct _EntitasEventComponentReplaced EntitasEventComponentReplaced;

#define ENTITAS_TYPE_BACKGROUND (entitas_background_get_type ())
typedef struct _EntitasBackground EntitasBackground;

#define ENTITAS_TYPE_BULLET (entitas_bullet_get_type ())
typedef struct _EntitasBullet EntitasBullet;

#define ENTITAS_TYPE_ENEMY1 (entitas_enemy1_get_type ())
typedef struct _EntitasEnemy1 EntitasEnemy1;

#define ENTITAS_TYPE_ENEMY2 (entitas_enemy2_get_type ())
typedef struct _EntitasEnemy2 EntitasEnemy2;

#define ENTITAS_TYPE_ENEMY3 (entitas_enemy3_get_type ())
typedef struct _EntitasEnemy3 EntitasEnemy3;

#define ENTITAS_TYPE_EXPIRES (entitas_expires_get_type ())
typedef struct _EntitasExpires EntitasExpires;

#define ENTITAS_TYPE_HEALTH (entitas_health_get_type ())
typedef struct _EntitasHealth EntitasHealth;

#define ENTITAS_TYPE_HUD (entitas_hud_get_type ())
typedef struct _EntitasHud EntitasHud;

#define ENTITAS_TYPE_LAYER (entitas_layer_get_type ())
typedef struct _EntitasLayer EntitasLayer;

#define ENTITAS_TYPE_PLAYER (entitas_player_get_type ())
typedef struct _EntitasPlayer EntitasPlayer;

#define ENTITAS_TYPE_SHOW (entitas_show_get_type ())
typedef struct _EntitasShow EntitasShow;

#define ENTITAS_TYPE_SOUND (entitas_sound_get_type ())
typedef struct _SdxAudioSound SdxAudioSound;
typedef struct _EntitasSound EntitasSound;

#define ENTITAS_TYPE_TEXT (entitas_text_get_type ())
typedef SdxGraphicsSprite SdxGraphicsSpriteTextSprite;
typedef struct _EntitasText EntitasText;

#define ENTITAS_TYPE_TINT (entitas_tint_get_type ())
typedef struct _EntitasTint EntitasTint;

#define ENTITAS_TYPE_TWEEN (entitas_tween_get_type ())
typedef struct _EntitasTween EntitasTween;

#define ENTITAS_TYPE_VELOCITY (entitas_velocity_get_type ())
typedef struct _EntitasVelocity EntitasVelocity;
typedef struct _EntitasEntity EntitasEntity;

#define ENTITAS_TYPE_ISYSTEM (entitas_isystem_get_type ())
typedef struct _EntitasISystem EntitasISystem;
typedef struct _EntitasGroup EntitasGroup;
typedef struct _EntitasEventWorldChanged EntitasEventWorldChanged;
typedef struct _EntitasEventGroupsChanged EntitasEventGroupsChanged;
typedef EntitasWorld Factory;

#define ENTITAS_TYPE_BUFFER (entitas_buffer_get_type ())
typedef struct _EntitasBuffer EntitasBuffer;
typedef struct _SdxGraphicsTextureAtlas SdxGraphicsTextureAtlas;
// symtbl.1 sdx_graphics_sprite
void sdx_graphics_sprite_release (SdxGraphicsSprite* self);
void sdx_graphics_sprite_free (SdxGraphicsSprite* self);
SdxGraphicsSprite* sdx_graphics_sprite_retain (SdxGraphicsSprite* self);
#define _sdx_graphics_sprite_release0(var) ((var == NULL) ? NULL : (var = (sdx_graphics_sprite_release (var), NULL)))
typedef struct _SdxFilesFileHandle SdxFilesFileHandle;
// symtbl.1 sdx_audio_sound
void sdx_audio_sound_release (SdxAudioSound* self);
void sdx_audio_sound_free (SdxAudioSound* self);
SdxAudioSound* sdx_audio_sound_retain (SdxAudioSound* self);
#define _sdx_audio_sound_release0(var) ((var == NULL) ? NULL : (var = (sdx_audio_sound_release (var), NULL)))
// symtbl.1 sdx_files_file_handle
void sdx_files_file_handle_release (SdxFilesFileHandle* self);
void sdx_files_file_handle_free (SdxFilesFileHandle* self);
SdxFilesFileHandle* sdx_files_file_handle_retain (SdxFilesFileHandle* self);
#define _sdx_files_file_handle_release0(var) ((var == NULL) ? NULL : (var = (sdx_files_file_handle_release (var), NULL)))
typedef struct _SdxFont SdxFont;

typedef enum  {
	POOL_BACKGROUND,
	POOL_ENEMY1,
	POOL_ENEMY2,
	POOL_ENEMY3,
	POOL_PLAYER,
	POOL_BULLET,
	POOL_EXPLOSION,
	POOL_BANG,
	POOL_PARTICLE,
	POOL_HUD,
	POOL_Count
} Pool;

struct _SdxMathVector2 {
	gfloat x;
	gfloat y;
};

struct _EntitasTransform {
	SdxMathVector2* scale;
	SdxMathVector2* position;
	SDL_Rect* aabb;
	SdxGraphicsSprite* sprite;
};

struct _EntitasBackground {
	gboolean active;
};

struct _EntitasBullet {
	gboolean active;
};

struct _EntitasEnemy1 {
	gboolean active;
};

struct _EntitasEnemy2 {
	gboolean active;
};

struct _EntitasEnemy3 {
	gboolean active;
};

struct _EntitasExpires {
	gfloat value;
};

struct _EntitasHealth {
	gfloat current;
	gfloat maximum;
};

struct _EntitasHud {
	gboolean active;
};

struct _EntitasLayer {
	gint value;
};

struct _EntitasPlayer {
	gboolean active;
};

struct _EntitasShow {
	gboolean active;
};

struct _EntitasSound {
	SdxAudioSound* sound;
};

struct _EntitasText {
	gchar* text;
	SdxGraphicsSpriteTextSprite* sprite;
};

struct _EntitasTint {
	gint r;
	gint g;
	gint b;
	gint a;
};

struct _EntitasTween {
	gfloat min;
	gfloat max;
	gfloat speed;
	gboolean repeat;
	gboolean active;
};

struct _EntitasVelocity {
	gfloat x;
	gfloat y;
};

struct _EntitasEntity {
	gint id;
	gchar* name;
	gint pool;
	guint64 mask;
	EntitasTransform transform;
	EntitasEventEntityChanged* onComponentAdded;
	EntitasEventEntityChanged* onComponentRemoved;
	EntitasEventEntityReleased* onEntityReleased;
	EntitasEventComponentReplaced* onComponentReplaced;
	EntitasBackground* background;
	EntitasBullet* bullet;
	EntitasEnemy1* enemy1;
	EntitasEnemy2* enemy2;
	EntitasEnemy3* enemy3;
	EntitasExpires* expires;
	EntitasHealth* health;
	EntitasHud* hud;
	EntitasLayer* layer;
	EntitasPlayer* player;
	EntitasShow* show;
	EntitasSound* sound;
	EntitasText* text;
	EntitasTint* tint;
	EntitasTween* tween;
	EntitasVelocity* velocity;
};

typedef void (*EntitasSystemInitialize) (void* user_data);
typedef void (*EntitasSystemExecute) (gfloat delta, void* user_data);
struct _EntitasISystem {
	EntitasSystemInitialize Initialize;
	gpointer Initialize_target;
	GDestroyNotify Initialize_target_destroy_notify;
	EntitasSystemExecute Execute;
	gpointer Execute_target;
	GDestroyNotify Execute_target_destroy_notify;
};

struct _EntitasWorld {
	gint ref_count;
	gint id;
	EntitasEntity* pool;
	gint pool_length1;
	EntitasISystem* systems;
	gint systems_length1;
	GPtrArray** cache;
	gint cache_length1;
	GList* groups;
	EntitasEventWorldChanged* onEntityCreated;
	EntitasEventWorldChanged* onEntityWillBeDestroyed;
	EntitasEventWorldChanged* onEntityDestroyed;
	EntitasEventGroupsChanged* onGroupCreated;
};

typedef EntitasEntity* (*EntitasEntityFactory) (void* user_data);
struct _EntitasBuffer {
	gint pool;
	gint size;
	EntitasEntityFactory Factory;
	gpointer Factory_target;
	GDestroyNotify Factory_target_destroy_notify;
};


extern SdxGraphicsTextureAtlas* sdx_atlas;
extern SdxFont* sdx_smallFont;

#define TAU (2.0 * G_PI)
#define COUNT_BACKGROUND 1
#define COUNT_PLAYER 1
#define COUNT_BULLET 20
#define COUNT_ENEMY1 15
#define COUNT_ENEMY2 5
#define COUNT_ENEMY3 4
#define COUNT_EXPLOSION 10
#define COUNT_BANG 12
#define COUNT_PARTICLE 100
#define COUNT_ALL ((((((((COUNT_BACKGROUND + COUNT_PLAYER) + COUNT_BULLET) + COUNT_ENEMY1) + COUNT_ENEMY2) + COUNT_ENEMY3) + COUNT_EXPLOSION) + COUNT_BANG) + COUNT_PARTICLE)
GType pool_get_type (void) G_GNUC_CONST;
void entitas_world_free (EntitasWorld * self);
GType entitas_entity_get_type (void) G_GNUC_CONST;
GType entitas_transform_get_type (void) G_GNUC_CONST;
GType sdx_math_vector2_get_type (void) G_GNUC_CONST;
SdxMathVector2* sdx_math_vector2_dup (const SdxMathVector2* self);
void sdx_math_vector2_free (SdxMathVector2* self);
void sdx_graphics_sprite_free (SdxGraphicsSprite * self);
EntitasTransform* entitas_transform_dup (const EntitasTransform* self);
void entitas_transform_free (EntitasTransform* self);
void entitas_transform_copy (const EntitasTransform* self, EntitasTransform* dest);
void entitas_transform_destroy (EntitasTransform* self);
void entitas_event_entity_changed_free (EntitasEventEntityChanged * self);
void entitas_event_entity_released_free (EntitasEventEntityReleased * self);
void entitas_event_component_replaced_free (EntitasEventComponentReplaced * self);
GType entitas_background_get_type (void) G_GNUC_CONST;
EntitasBackground* entitas_background_dup (const EntitasBackground* self);
void entitas_background_free (EntitasBackground* self);
GType entitas_bullet_get_type (void) G_GNUC_CONST;
EntitasBullet* entitas_bullet_dup (const EntitasBullet* self);
void entitas_bullet_free (EntitasBullet* self);
GType entitas_enemy1_get_type (void) G_GNUC_CONST;
EntitasEnemy1* entitas_enemy1_dup (const EntitasEnemy1* self);
void entitas_enemy1_free (EntitasEnemy1* self);
GType entitas_enemy2_get_type (void) G_GNUC_CONST;
EntitasEnemy2* entitas_enemy2_dup (const EntitasEnemy2* self);
void entitas_enemy2_free (EntitasEnemy2* self);
GType entitas_enemy3_get_type (void) G_GNUC_CONST;
EntitasEnemy3* entitas_enemy3_dup (const EntitasEnemy3* self);
void entitas_enemy3_free (EntitasEnemy3* self);
GType entitas_expires_get_type (void) G_GNUC_CONST;
EntitasExpires* entitas_expires_dup (const EntitasExpires* self);
void entitas_expires_free (EntitasExpires* self);
GType entitas_health_get_type (void) G_GNUC_CONST;
EntitasHealth* entitas_health_dup (const EntitasHealth* self);
void entitas_health_free (EntitasHealth* self);
GType entitas_hud_get_type (void) G_GNUC_CONST;
EntitasHud* entitas_hud_dup (const EntitasHud* self);
void entitas_hud_free (EntitasHud* self);
GType entitas_layer_get_type (void) G_GNUC_CONST;
EntitasLayer* entitas_layer_dup (const EntitasLayer* self);
void entitas_layer_free (EntitasLayer* self);
GType entitas_player_get_type (void) G_GNUC_CONST;
EntitasPlayer* entitas_player_dup (const EntitasPlayer* self);
void entitas_player_free (EntitasPlayer* self);
GType entitas_show_get_type (void) G_GNUC_CONST;
EntitasShow* entitas_show_dup (const EntitasShow* self);
void entitas_show_free (EntitasShow* self);
GType entitas_sound_get_type (void) G_GNUC_CONST;
void sdx_audio_sound_free (SdxAudioSound * self);
EntitasSound* entitas_sound_dup (const EntitasSound* self);
void entitas_sound_free (EntitasSound* self);
void entitas_sound_copy (const EntitasSound* self, EntitasSound* dest);
void entitas_sound_destroy (EntitasSound* self);
GType entitas_text_get_type (void) G_GNUC_CONST;
EntitasText* entitas_text_dup (const EntitasText* self);
void entitas_text_free (EntitasText* self);
void entitas_text_copy (const EntitasText* self, EntitasText* dest);
void entitas_text_destroy (EntitasText* self);
GType entitas_tint_get_type (void) G_GNUC_CONST;
EntitasTint* entitas_tint_dup (const EntitasTint* self);
void entitas_tint_free (EntitasTint* self);
GType entitas_tween_get_type (void) G_GNUC_CONST;
EntitasTween* entitas_tween_dup (const EntitasTween* self);
void entitas_tween_free (EntitasTween* self);
GType entitas_velocity_get_type (void) G_GNUC_CONST;
EntitasVelocity* entitas_velocity_dup (const EntitasVelocity* self);
void entitas_velocity_free (EntitasVelocity* self);
EntitasEntity* entitas_entity_dup (const EntitasEntity* self);
void entitas_entity_free (EntitasEntity* self);
void entitas_entity_copy (const EntitasEntity* self, EntitasEntity* dest);
void entitas_entity_destroy (EntitasEntity* self);
GType entitas_isystem_get_type (void) G_GNUC_CONST;
EntitasISystem* entitas_isystem_dup (const EntitasISystem* self);
void entitas_isystem_free (EntitasISystem* self);
void entitas_isystem_copy (const EntitasISystem* self, EntitasISystem* dest);
void entitas_isystem_destroy (EntitasISystem* self);
void entitas_group_free (EntitasGroup * self);
void entitas_event_world_changed_free (EntitasEventWorldChanged * self);
void entitas_event_groups_changed_free (EntitasEventGroupsChanged * self);
Factory* factory_new (void);
EntitasWorld* entitas_world_new (void);
GType entitas_buffer_get_type (void) G_GNUC_CONST;
EntitasBuffer* entitas_buffer_dup (const EntitasBuffer* self);
void entitas_buffer_free (EntitasBuffer* self);
void entitas_buffer_copy (const EntitasBuffer* self, EntitasBuffer* dest);
void entitas_buffer_destroy (EntitasBuffer* self);
void entitas_world_SetPool (EntitasWorld* self, gint size, gint count, EntitasBuffer* buffers, int buffers_length1);
EntitasEntity* factory_CreateBackground (Factory* self);
static EntitasEntity* _factory_CreateBackground_entitas_entity_factory (gpointer self);
void entitas_buffer_init (EntitasBuffer *self, gint pool, gint size, EntitasEntityFactory factory, void* factory_target);
EntitasEntity* factory_CreatePlayer (Factory* self);
static EntitasEntity* _factory_CreatePlayer_entitas_entity_factory (gpointer self);
EntitasEntity* factory_CreateBullet (Factory* self);
static EntitasEntity* _factory_CreateBullet_entitas_entity_factory (gpointer self);
EntitasEntity* factory_CreateEnemy1 (Factory* self);
static EntitasEntity* _factory_CreateEnemy1_entitas_entity_factory (gpointer self);
EntitasEntity* factory_CreateEnemy2 (Factory* self);
static EntitasEntity* _factory_CreateEnemy2_entitas_entity_factory (gpointer self);
EntitasEntity* factory_CreateEnemy3 (Factory* self);
static EntitasEntity* _factory_CreateEnemy3_entitas_entity_factory (gpointer self);
EntitasEntity* factory_CreateExplosion (Factory* self);
static EntitasEntity* _factory_CreateExplosion_entitas_entity_factory (gpointer self);
EntitasEntity* factory_CreateBang (Factory* self);
static EntitasEntity* _factory_CreateBang_entitas_entity_factory (gpointer self);
EntitasEntity* factory_CreateParticle (Factory* self);
static EntitasEntity* _factory_CreateParticle_entitas_entity_factory (gpointer self);
static void _vala_EntitasBuffer_array_free (EntitasBuffer * array, gint array_length);
EntitasEntity* factory_CreateBase (Factory* self, const gchar* name, gint pool, gfloat scale, gboolean active, gboolean centered);
EntitasEntity* entitas_world_CreateEntity (EntitasWorld* self, const gchar* name, gint pool, gboolean active);
EntitasEntity* entitas_entity_SetTransform (EntitasEntity *self, SdxGraphicsSprite* sprite);
void sdx_graphics_texture_atlas_free (SdxGraphicsTextureAtlas * self);
SdxGraphicsSprite* sdx_graphics_texture_atlas_CreateSprite (SdxGraphicsTextureAtlas* self, const gchar* name, gint index);
SdxGraphicsSprite* sdx_graphics_sprite_SetScale (SdxGraphicsSprite* self, gfloat x, gfloat y);
SdxGraphicsSprite* sdx_graphics_sprite_SetCentered (SdxGraphicsSprite* self, gboolean value);
EntitasEntity* entitas_entity_AddLayer (EntitasEntity *self, gint value);
#define SDX_pixelFactor 1
EntitasEntity* entitas_entity_SetBackground (EntitasEntity *self, gboolean value);
EntitasEntity* entitas_entity_SetPlayer (EntitasEntity *self, gboolean value);
EntitasEntity* entitas_entity_AddSound (EntitasEntity *self, SdxAudioSound* sound);
void sdx_files_file_handle_free (SdxFilesFileHandle * self);
SdxFilesFileHandle* sdx_files_Resource (const gchar* path);
SdxAudioSound* sdx_audio_sound_new (SdxFilesFileHandle* file);
EntitasEntity* entitas_entity_AddTint (EntitasEntity *self, gint r, gint g, gint b, gint a);
EntitasEntity* entitas_entity_AddHealth (EntitasEntity *self, gfloat current, gfloat maximum);
EntitasEntity* entitas_entity_AddVelocity (EntitasEntity *self, gfloat x, gfloat y);
EntitasEntity* entitas_entity_SetBullet (EntitasEntity *self, gboolean value);
EntitasEntity* entitas_entity_AddText (EntitasEntity *self, const gchar* text, SdxGraphicsSpriteTextSprite* texture);
void sdx_font_free (SdxFont * self);
SdxGraphicsSpriteTextSprite* sdx_graphics_sprite_text_sprite_new (const gchar* text, SdxFont* font, SDL_Color fg, SDL_Color* bg);
EntitasEntity* entitas_entity_SetEnemy1 (EntitasEntity *self, gboolean value);
EntitasEntity* entitas_entity_SetEnemy2 (EntitasEntity *self, gboolean value);
EntitasEntity* entitas_entity_SetEnemy3 (EntitasEntity *self, gboolean value);
EntitasEntity* entitas_entity_AddExpires (EntitasEntity *self, gfloat value);
EntitasEntity* entitas_entity_AddTween (EntitasEntity *self, gfloat min, gfloat max, gfloat speed, gboolean repeat, gboolean active);
void factory_AddBackground (Factory* self, gint x, gint y);
EntitasEntity* entitas_entity_SetShow (EntitasEntity *self, gboolean value);
void factory_AddPlayer (Factory* self, gint x, gint y);
void factory_AddBullet (Factory* self, gint x, gint y);
EntitasEntity* entitas_entity_SetPosition (EntitasEntity *self, gfloat x, gfloat y);
EntitasEntity* entitas_entity_SetActive (EntitasEntity *self, gboolean active);
void factory_AddEnemy1 (Factory* self, gint x, gint y);
EntitasEntity* entitas_entity_SetHealth (EntitasEntity *self, gfloat current, gfloat maximum);
void factory_AddEnemy2 (Factory* self, gint x, gint y);
void factory_AddEnemy3 (Factory* self, gint x, gint y);
void factory_AddExplosion (Factory* self, gint x, gint y);
EntitasEntity* entitas_entity_SetBounds (EntitasEntity *self, gint x, gint y, gint w, gint h);
EntitasEntity* entitas_entity_SetTween (EntitasEntity *self, gfloat min, gfloat max, gfloat speed, gboolean repeat, gboolean active);
EntitasEntity* entitas_entity_SetScale (EntitasEntity *self, gfloat x, gfloat y);
EntitasEntity* entitas_entity_SetExpires (EntitasEntity *self, gfloat value);
void factory_AddBang (Factory* self, gint x, gint y);
void factory_AddParticle (Factory* self, gint x, gint y);
gdouble sdx_GetRandom (void);
EntitasEntity* entitas_entity_SetVelocity (EntitasEntity *self, gfloat x, gfloat y);

extern const SDL_Color SDX_COLOR_LimeGreen;

GType pool_get_type (void) {
	static volatile gsize pool_type_id__volatile = 0;
	if (g_once_init_enter (&pool_type_id__volatile)) {
		static const GEnumValue values[] = {{POOL_BACKGROUND, "POOL_BACKGROUND", "background"}, {POOL_ENEMY1, "POOL_ENEMY1", "enemy1"}, {POOL_ENEMY2, "POOL_ENEMY2", "enemy2"}, {POOL_ENEMY3, "POOL_ENEMY3", "enemy3"}, {POOL_PLAYER, "POOL_PLAYER", "player"}, {POOL_BULLET, "POOL_BULLET", "bullet"}, {POOL_EXPLOSION, "POOL_EXPLOSION", "explosion"}, {POOL_BANG, "POOL_BANG", "bang"}, {POOL_PARTICLE, "POOL_PARTICLE", "particle"}, {POOL_HUD, "POOL_HUD", "hud"}, {POOL_Count, "POOL_Count", "count"}, {0, NULL, NULL}};
		GType pool_type_id;
		pool_type_id = g_enum_register_static ("Pool", values);
		g_once_init_leave (&pool_type_id__volatile, pool_type_id);
	}
	return pool_type_id__volatile;
}


static EntitasEntity* _factory_CreateBackground_entitas_entity_factory (gpointer self) {
	EntitasEntity* result;
	result = factory_CreateBackground ((Factory*) self);
	return result;
}


static EntitasEntity* _factory_CreatePlayer_entitas_entity_factory (gpointer self) {
	EntitasEntity* result;
	result = factory_CreatePlayer ((Factory*) self);
	return result;
}


static EntitasEntity* _factory_CreateBullet_entitas_entity_factory (gpointer self) {
	EntitasEntity* result;
	result = factory_CreateBullet ((Factory*) self);
	return result;
}


static EntitasEntity* _factory_CreateEnemy1_entitas_entity_factory (gpointer self) {
	EntitasEntity* result;
	result = factory_CreateEnemy1 ((Factory*) self);
	return result;
}


static EntitasEntity* _factory_CreateEnemy2_entitas_entity_factory (gpointer self) {
	EntitasEntity* result;
	result = factory_CreateEnemy2 ((Factory*) self);
	return result;
}


static EntitasEntity* _factory_CreateEnemy3_entitas_entity_factory (gpointer self) {
	EntitasEntity* result;
	result = factory_CreateEnemy3 ((Factory*) self);
	return result;
}


static EntitasEntity* _factory_CreateExplosion_entitas_entity_factory (gpointer self) {
	EntitasEntity* result;
	result = factory_CreateExplosion ((Factory*) self);
	return result;
}


static EntitasEntity* _factory_CreateBang_entitas_entity_factory (gpointer self) {
	EntitasEntity* result;
	result = factory_CreateBang ((Factory*) self);
	return result;
}


static EntitasEntity* _factory_CreateParticle_entitas_entity_factory (gpointer self) {
	EntitasEntity* result;
	result = factory_CreateParticle ((Factory*) self);
	return result;
}


static void _vala_EntitasBuffer_array_free (EntitasBuffer * array, gint array_length) {
	if (array != NULL) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			entitas_buffer_destroy (&array[i]);
		}
	}
	g_free (array);
}


Factory* factory_new (void) {
	Factory* self;
	EntitasBuffer _tmp0_ = {0};
	EntitasBuffer _tmp1_ = {0};
	EntitasBuffer _tmp2_ = {0};
	EntitasBuffer _tmp3_ = {0};
	EntitasBuffer _tmp4_ = {0};
	EntitasBuffer _tmp5_ = {0};
	EntitasBuffer _tmp6_ = {0};
	EntitasBuffer _tmp7_ = {0};
	EntitasBuffer _tmp8_ = {0};
	EntitasBuffer* _tmp9_;
	EntitasBuffer* _tmp10_;
	gint _tmp10__length1;
	self = (Factory*) entitas_world_new ();
	entitas_buffer_init (&_tmp0_, (gint) POOL_BACKGROUND, COUNT_BACKGROUND, _factory_CreateBackground_entitas_entity_factory, self);
	entitas_buffer_init (&_tmp1_, (gint) POOL_PLAYER, COUNT_PLAYER, _factory_CreatePlayer_entitas_entity_factory, self);
	entitas_buffer_init (&_tmp2_, (gint) POOL_BULLET, COUNT_BULLET, _factory_CreateBullet_entitas_entity_factory, self);
	entitas_buffer_init (&_tmp3_, (gint) POOL_ENEMY1, COUNT_ENEMY1, _factory_CreateEnemy1_entitas_entity_factory, self);
	entitas_buffer_init (&_tmp4_, (gint) POOL_ENEMY2, COUNT_ENEMY2, _factory_CreateEnemy2_entitas_entity_factory, self);
	entitas_buffer_init (&_tmp5_, (gint) POOL_ENEMY3, COUNT_ENEMY3, _factory_CreateEnemy3_entitas_entity_factory, self);
	entitas_buffer_init (&_tmp6_, (gint) POOL_EXPLOSION, COUNT_EXPLOSION, _factory_CreateExplosion_entitas_entity_factory, self);
	entitas_buffer_init (&_tmp7_, (gint) POOL_BANG, COUNT_BANG, _factory_CreateBang_entitas_entity_factory, self);
	entitas_buffer_init (&_tmp8_, (gint) POOL_PARTICLE, COUNT_PARTICLE, _factory_CreateParticle_entitas_entity_factory, self);
	_tmp9_ = g_new0 (EntitasBuffer, 9);
	_tmp9_[0] = _tmp0_;
	_tmp9_[1] = _tmp1_;
	_tmp9_[2] = _tmp2_;
	_tmp9_[3] = _tmp3_;
	_tmp9_[4] = _tmp4_;
	_tmp9_[5] = _tmp5_;
	_tmp9_[6] = _tmp6_;
	_tmp9_[7] = _tmp7_;
	_tmp9_[8] = _tmp8_;
	_tmp10_ = _tmp9_;
	_tmp10__length1 = 9;
	entitas_world_SetPool ((EntitasWorld*) self, COUNT_ALL, (gint) POOL_Count, _tmp10_, 9);
	_tmp10_ = (_vala_EntitasBuffer_array_free (_tmp10_, _tmp10__length1), NULL);
	return self;
}


/**
 * The stuff that all entities have
 */
EntitasEntity* factory_CreateBase (Factory* self, const gchar* name, gint pool, gfloat scale, gboolean active, gboolean centered) {
	EntitasEntity* result = NULL;
	const gchar* _tmp0_;
	gint _tmp1_;
	gboolean _tmp2_;
	EntitasEntity* _tmp3_;
	SdxGraphicsTextureAtlas* _tmp4_;
	const gchar* _tmp5_;
	SdxGraphicsSprite* _tmp6_;
	SdxGraphicsSprite* _tmp7_;
	gfloat _tmp8_;
	gfloat _tmp9_;
	SdxGraphicsSprite* _tmp10_;
	SdxGraphicsSprite* _tmp11_;
	gboolean _tmp12_;
	SdxGraphicsSprite* _tmp13_;
	SdxGraphicsSprite* _tmp14_;
	EntitasEntity* _tmp15_;
	gint _tmp16_;
	EntitasEntity* _tmp17_;
	EntitasEntity* _tmp18_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (name != NULL, NULL);
	_tmp0_ = name;
	_tmp1_ = pool;
	_tmp2_ = active;
	_tmp3_ = entitas_world_CreateEntity ((EntitasWorld*) self, _tmp0_, _tmp1_, _tmp2_);
	_tmp4_ = sdx_atlas;
	_tmp5_ = name;
	_tmp6_ = sdx_graphics_texture_atlas_CreateSprite (_tmp4_, _tmp5_, -1);
	_tmp7_ = _tmp6_;
	_tmp8_ = scale;
	_tmp9_ = scale;
	_tmp10_ = sdx_graphics_sprite_SetScale (_tmp7_, _tmp8_, _tmp9_);
	_tmp11_ = _tmp10_;
	_tmp12_ = centered;
	_tmp13_ = sdx_graphics_sprite_SetCentered (_tmp11_, _tmp12_);
	_tmp14_ = _tmp13_;
	_tmp15_ = entitas_entity_SetTransform (_tmp3_, _tmp14_);
	_tmp16_ = pool;
	_tmp17_ = entitas_entity_AddLayer (_tmp15_, _tmp16_);
	_tmp18_ = _tmp17_;
	_sdx_graphics_sprite_release0 (_tmp14_);
	_sdx_graphics_sprite_release0 (_tmp11_);
	_sdx_graphics_sprite_release0 (_tmp7_);
	result = _tmp18_;
	return result;
}


/** 
 *	factory methods:
 */
EntitasEntity* factory_CreateBackground (Factory* self) {
	EntitasEntity* result = NULL;
	EntitasEntity* _tmp0_;
	EntitasEntity* _tmp1_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = factory_CreateBase (self, "background", (gint) POOL_BACKGROUND, (gfloat) (2 * SDX_pixelFactor), TRUE, FALSE);
	_tmp1_ = entitas_entity_SetBackground (_tmp0_, TRUE);
	result = _tmp1_;
	return result;
}


EntitasEntity* factory_CreatePlayer (Factory* self) {
	EntitasEntity* result = NULL;
	EntitasEntity* _tmp0_;
	EntitasEntity* _tmp1_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = factory_CreateBase (self, "spaceshipspr", (gint) POOL_PLAYER, (gfloat) SDX_pixelFactor, TRUE, TRUE);
	_tmp1_ = entitas_entity_SetPlayer (_tmp0_, TRUE);
	result = _tmp1_;
	return result;
}


EntitasEntity* factory_CreateBullet (Factory* self) {
	EntitasEntity* result = NULL;
	EntitasEntity* _tmp0_;
	SdxFilesFileHandle* _tmp1_;
	SdxFilesFileHandle* _tmp2_;
	SdxAudioSound* _tmp3_;
	SdxAudioSound* _tmp4_;
	EntitasEntity* _tmp5_;
	EntitasEntity* _tmp6_;
	EntitasEntity* _tmp7_;
	EntitasEntity* _tmp8_;
	EntitasEntity* _tmp9_;
	EntitasEntity* _tmp10_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = factory_CreateBase (self, "bullet", (gint) POOL_BULLET, (gfloat) SDX_pixelFactor, FALSE, TRUE);
	_tmp1_ = sdx_files_Resource ("assets/sounds/pew.ogg");
	_tmp2_ = _tmp1_;
	_tmp3_ = sdx_audio_sound_new (_tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = entitas_entity_AddSound (_tmp0_, _tmp4_);
	_tmp6_ = entitas_entity_AddTint (_tmp5_, 0xd2, 0xfa, 0, 0xfa);
	_tmp7_ = entitas_entity_AddHealth (_tmp6_, (gfloat) 2, (gfloat) 2);
	_tmp8_ = entitas_entity_AddVelocity (_tmp7_, (gfloat) 0, (gfloat) (-800 * SDX_pixelFactor));
	_tmp9_ = entitas_entity_SetBullet (_tmp8_, TRUE);
	_tmp10_ = _tmp9_;
	_sdx_audio_sound_release0 (_tmp4_);
	_sdx_files_file_handle_release0 (_tmp2_);
	result = _tmp10_;
	return result;
}


EntitasEntity* factory_CreateEnemy1 (Factory* self) {
	EntitasEntity* result = NULL;
	EntitasEntity* _tmp0_;
	EntitasEntity* _tmp1_;
	EntitasEntity* _tmp2_;
	SdxFont* _tmp3_;
	SdxGraphicsSpriteTextSprite* _tmp4_;
	SdxGraphicsSpriteTextSprite* _tmp5_;
	EntitasEntity* _tmp6_;
	EntitasEntity* _tmp7_;
	EntitasEntity* _tmp8_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = factory_CreateBase (self, "enemy1", (gint) POOL_ENEMY1, (gfloat) SDX_pixelFactor, FALSE, TRUE);
	_tmp1_ = entitas_entity_AddHealth (_tmp0_, (gfloat) 10, (gfloat) 10);
	_tmp2_ = entitas_entity_AddVelocity (_tmp1_, (gfloat) 0, (gfloat) 40);
	_tmp3_ = sdx_smallFont;
	_tmp4_ = sdx_graphics_sprite_text_sprite_new ("100%", _tmp3_, SDX_COLOR_LimeGreen, NULL);
	_tmp5_ = _tmp4_;
	_tmp6_ = entitas_entity_AddText (_tmp2_, "100%", _tmp5_);
	_tmp7_ = entitas_entity_SetEnemy1 (_tmp6_, TRUE);
	_tmp8_ = _tmp7_;
	_sdx_graphics_sprite_release0 (_tmp5_);
	result = _tmp8_;
	return result;
}


EntitasEntity* factory_CreateEnemy2 (Factory* self) {
	EntitasEntity* result = NULL;
	EntitasEntity* _tmp0_;
	EntitasEntity* _tmp1_;
	EntitasEntity* _tmp2_;
	SdxFont* _tmp3_;
	SdxGraphicsSpriteTextSprite* _tmp4_;
	SdxGraphicsSpriteTextSprite* _tmp5_;
	EntitasEntity* _tmp6_;
	EntitasEntity* _tmp7_;
	EntitasEntity* _tmp8_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = factory_CreateBase (self, "enemy2", (gint) POOL_ENEMY2, (gfloat) SDX_pixelFactor, FALSE, TRUE);
	_tmp1_ = entitas_entity_AddHealth (_tmp0_, (gfloat) 20, (gfloat) 20);
	_tmp2_ = entitas_entity_AddVelocity (_tmp1_, (gfloat) 0, (gfloat) 30);
	_tmp3_ = sdx_smallFont;
	_tmp4_ = sdx_graphics_sprite_text_sprite_new ("100%", _tmp3_, SDX_COLOR_LimeGreen, NULL);
	_tmp5_ = _tmp4_;
	_tmp6_ = entitas_entity_AddText (_tmp2_, "100%", _tmp5_);
	_tmp7_ = entitas_entity_SetEnemy2 (_tmp6_, TRUE);
	_tmp8_ = _tmp7_;
	_sdx_graphics_sprite_release0 (_tmp5_);
	result = _tmp8_;
	return result;
}


EntitasEntity* factory_CreateEnemy3 (Factory* self) {
	EntitasEntity* result = NULL;
	EntitasEntity* _tmp0_;
	EntitasEntity* _tmp1_;
	EntitasEntity* _tmp2_;
	SdxFont* _tmp3_;
	SdxGraphicsSpriteTextSprite* _tmp4_;
	SdxGraphicsSpriteTextSprite* _tmp5_;
	EntitasEntity* _tmp6_;
	EntitasEntity* _tmp7_;
	EntitasEntity* _tmp8_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = factory_CreateBase (self, "enemy3", (gint) POOL_ENEMY3, (gfloat) SDX_pixelFactor, FALSE, TRUE);
	_tmp1_ = entitas_entity_AddHealth (_tmp0_, (gfloat) 60, (gfloat) 60);
	_tmp2_ = entitas_entity_AddVelocity (_tmp1_, (gfloat) 0, (gfloat) 20);
	_tmp3_ = sdx_smallFont;
	_tmp4_ = sdx_graphics_sprite_text_sprite_new ("100%", _tmp3_, SDX_COLOR_LimeGreen, NULL);
	_tmp5_ = _tmp4_;
	_tmp6_ = entitas_entity_AddText (_tmp2_, "100%", _tmp5_);
	_tmp7_ = entitas_entity_SetEnemy3 (_tmp6_, TRUE);
	_tmp8_ = _tmp7_;
	_sdx_graphics_sprite_release0 (_tmp5_);
	result = _tmp8_;
	return result;
}


EntitasEntity* factory_CreateExplosion (Factory* self) {
	EntitasEntity* result = NULL;
	EntitasEntity* _tmp0_;
	SdxFilesFileHandle* _tmp1_;
	SdxFilesFileHandle* _tmp2_;
	SdxAudioSound* _tmp3_;
	SdxAudioSound* _tmp4_;
	EntitasEntity* _tmp5_;
	EntitasEntity* _tmp6_;
	EntitasEntity* _tmp7_;
	EntitasEntity* _tmp8_;
	EntitasEntity* _tmp9_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = factory_CreateBase (self, "explosion", (gint) POOL_EXPLOSION, 0.6f, FALSE, TRUE);
	_tmp1_ = sdx_files_Resource ("assets/sounds/asplode.ogg");
	_tmp2_ = _tmp1_;
	_tmp3_ = sdx_audio_sound_new (_tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = entitas_entity_AddSound (_tmp0_, _tmp4_);
	_tmp6_ = entitas_entity_AddTint (_tmp5_, 0xd2, 0xfa, 0xd2, 0x7f);
	_tmp7_ = entitas_entity_AddExpires (_tmp6_, 0.2f);
	_tmp8_ = entitas_entity_AddTween (_tmp7_, 0.006f, 0.6f, -3.f, FALSE, TRUE);
	_tmp9_ = _tmp8_;
	_sdx_audio_sound_release0 (_tmp4_);
	_sdx_files_file_handle_release0 (_tmp2_);
	result = _tmp9_;
	return result;
}


EntitasEntity* factory_CreateBang (Factory* self) {
	EntitasEntity* result = NULL;
	EntitasEntity* _tmp0_;
	SdxFilesFileHandle* _tmp1_;
	SdxFilesFileHandle* _tmp2_;
	SdxAudioSound* _tmp3_;
	SdxAudioSound* _tmp4_;
	EntitasEntity* _tmp5_;
	EntitasEntity* _tmp6_;
	EntitasEntity* _tmp7_;
	EntitasEntity* _tmp8_;
	EntitasEntity* _tmp9_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = factory_CreateBase (self, "explosion", (gint) POOL_BANG, 0.1f, FALSE, TRUE);
	_tmp1_ = sdx_files_Resource ("assets/sounds/smallasplode.ogg");
	_tmp2_ = _tmp1_;
	_tmp3_ = sdx_audio_sound_new (_tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = entitas_entity_AddSound (_tmp0_, _tmp4_);
	_tmp6_ = entitas_entity_AddTint (_tmp5_, 0xd2, 0xfa, 0xd2, 0x9f);
	_tmp7_ = entitas_entity_AddExpires (_tmp6_, 0.2f);
	_tmp8_ = entitas_entity_AddTween (_tmp7_, 0.001f, 0.1f, -3.f, FALSE, TRUE);
	_tmp9_ = _tmp8_;
	_sdx_audio_sound_release0 (_tmp4_);
	_sdx_files_file_handle_release0 (_tmp2_);
	result = _tmp9_;
	return result;
}


EntitasEntity* factory_CreateParticle (Factory* self) {
	EntitasEntity* result = NULL;
	EntitasEntity* _tmp0_;
	EntitasEntity* _tmp1_;
	EntitasEntity* _tmp2_;
	EntitasEntity* _tmp3_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = factory_CreateBase (self, "star", (gint) POOL_PARTICLE, (gfloat) SDX_pixelFactor, FALSE, TRUE);
	_tmp1_ = entitas_entity_AddTint (_tmp0_, 0xd2, 0xfa, 0xd2, 0xfa);
	_tmp2_ = entitas_entity_AddExpires (_tmp1_, 0.75f);
	_tmp3_ = entitas_entity_AddVelocity (_tmp2_, (gfloat) 0, (gfloat) 0);
	result = _tmp3_;
	return result;
}


/**
 * Get entity from the pool and
 * put it on the screen at (x,y)
 */
static gboolean g_ptr_array_IsEmpty (GPtrArray* self) {
	gboolean result = FALSE;
	guint _tmp0_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = self->len;
	result = _tmp0_ == ((guint) 0);
	return result;
}


static gpointer g_ptr_array_Pop (GPtrArray* self) {
	gpointer result = NULL;
	gpointer item = NULL;
	guint _tmp0_;
	gconstpointer _tmp1_;
	guint _tmp2_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->len;
	_tmp1_ = g_ptr_array_index (self, _tmp0_ - 1);
	item = _tmp1_;
	_tmp2_ = self->len;
	g_ptr_array_remove_index (self, _tmp2_ - 1);
	result = item;
	return result;
}


void factory_AddBackground (Factory* self, gint x, gint y) {
	GPtrArray** _tmp0_;
	gint _tmp0__length1;
	GPtrArray* _tmp1_;
	gboolean _tmp2_;
	EntitasEntity* entity = NULL;
	GPtrArray** _tmp6_;
	gint _tmp6__length1;
	GPtrArray* _tmp7_;
	gpointer _tmp8_;
	g_return_if_fail (self != NULL);
	_tmp0_ = ((EntitasWorld*) self)->cache;
	_tmp0__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp1_ = _tmp0_[POOL_BACKGROUND];
	_tmp2_ = g_ptr_array_IsEmpty (_tmp1_);
	if (_tmp2_) {
		GPtrArray** _tmp3_;
		gint _tmp3__length1;
		GPtrArray* _tmp4_;
		EntitasEntity* _tmp5_;
		_tmp3_ = ((EntitasWorld*) self)->cache;
		_tmp3__length1 = ((EntitasWorld*) self)->cache_length1;
		_tmp4_ = _tmp3_[POOL_BACKGROUND];
		_tmp5_ = factory_CreateBackground (self);
		g_ptr_array_add (_tmp4_, _tmp5_);
	}
	_tmp6_ = ((EntitasWorld*) self)->cache;
	_tmp6__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp7_ = _tmp6_[POOL_BACKGROUND];
	_tmp8_ = g_ptr_array_Pop (_tmp7_);
	entity = _tmp8_;
	entitas_entity_SetShow (entity, TRUE);
}


void factory_AddPlayer (Factory* self, gint x, gint y) {
	GPtrArray** _tmp0_;
	gint _tmp0__length1;
	GPtrArray* _tmp1_;
	gboolean _tmp2_;
	EntitasEntity* entity = NULL;
	GPtrArray** _tmp6_;
	gint _tmp6__length1;
	GPtrArray* _tmp7_;
	gpointer _tmp8_;
	g_return_if_fail (self != NULL);
	_tmp0_ = ((EntitasWorld*) self)->cache;
	_tmp0__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp1_ = _tmp0_[POOL_PLAYER];
	_tmp2_ = g_ptr_array_IsEmpty (_tmp1_);
	if (_tmp2_) {
		GPtrArray** _tmp3_;
		gint _tmp3__length1;
		GPtrArray* _tmp4_;
		EntitasEntity* _tmp5_;
		_tmp3_ = ((EntitasWorld*) self)->cache;
		_tmp3__length1 = ((EntitasWorld*) self)->cache_length1;
		_tmp4_ = _tmp3_[POOL_PLAYER];
		_tmp5_ = factory_CreatePlayer (self);
		g_ptr_array_add (_tmp4_, _tmp5_);
	}
	_tmp6_ = ((EntitasWorld*) self)->cache;
	_tmp6__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp7_ = _tmp6_[POOL_PLAYER];
	_tmp8_ = g_ptr_array_Pop (_tmp7_);
	entity = _tmp8_;
	entitas_entity_SetShow (entity, TRUE);
}


void factory_AddBullet (Factory* self, gint x, gint y) {
	GPtrArray** _tmp0_;
	gint _tmp0__length1;
	GPtrArray* _tmp1_;
	gboolean _tmp2_;
	EntitasEntity* entity = NULL;
	GPtrArray** _tmp6_;
	gint _tmp6__length1;
	GPtrArray* _tmp7_;
	gpointer _tmp8_;
	EntitasEntity* _tmp9_;
	gint _tmp10_;
	gint _tmp11_;
	EntitasEntity* _tmp12_;
	g_return_if_fail (self != NULL);
	_tmp0_ = ((EntitasWorld*) self)->cache;
	_tmp0__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp1_ = _tmp0_[POOL_BULLET];
	_tmp2_ = g_ptr_array_IsEmpty (_tmp1_);
	if (_tmp2_) {
		GPtrArray** _tmp3_;
		gint _tmp3__length1;
		GPtrArray* _tmp4_;
		EntitasEntity* _tmp5_;
		_tmp3_ = ((EntitasWorld*) self)->cache;
		_tmp3__length1 = ((EntitasWorld*) self)->cache_length1;
		_tmp4_ = _tmp3_[POOL_BULLET];
		_tmp5_ = factory_CreateBullet (self);
		g_ptr_array_add (_tmp4_, _tmp5_);
	}
	_tmp6_ = ((EntitasWorld*) self)->cache;
	_tmp6__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp7_ = _tmp6_[POOL_BULLET];
	_tmp8_ = g_ptr_array_Pop (_tmp7_);
	entity = _tmp8_;
	_tmp9_ = entitas_entity_SetShow (entity, TRUE);
	_tmp10_ = x;
	_tmp11_ = y;
	_tmp12_ = entitas_entity_SetPosition (_tmp9_, (gfloat) _tmp10_, (gfloat) _tmp11_);
	entitas_entity_SetActive (_tmp12_, TRUE);
}


void factory_AddEnemy1 (Factory* self, gint x, gint y) {
	GPtrArray** _tmp0_;
	gint _tmp0__length1;
	GPtrArray* _tmp1_;
	gboolean _tmp2_;
	EntitasEntity* entity = NULL;
	GPtrArray** _tmp6_;
	gint _tmp6__length1;
	GPtrArray* _tmp7_;
	gpointer _tmp8_;
	EntitasEntity* _tmp9_;
	gint _tmp10_;
	gint _tmp11_;
	EntitasEntity* _tmp12_;
	EntitasEntity* _tmp13_;
	g_return_if_fail (self != NULL);
	_tmp0_ = ((EntitasWorld*) self)->cache;
	_tmp0__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp1_ = _tmp0_[POOL_ENEMY1];
	_tmp2_ = g_ptr_array_IsEmpty (_tmp1_);
	if (_tmp2_) {
		GPtrArray** _tmp3_;
		gint _tmp3__length1;
		GPtrArray* _tmp4_;
		EntitasEntity* _tmp5_;
		_tmp3_ = ((EntitasWorld*) self)->cache;
		_tmp3__length1 = ((EntitasWorld*) self)->cache_length1;
		_tmp4_ = _tmp3_[POOL_ENEMY1];
		_tmp5_ = factory_CreateEnemy1 (self);
		g_ptr_array_add (_tmp4_, _tmp5_);
	}
	_tmp6_ = ((EntitasWorld*) self)->cache;
	_tmp6__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp7_ = _tmp6_[POOL_ENEMY1];
	_tmp8_ = g_ptr_array_Pop (_tmp7_);
	entity = _tmp8_;
	_tmp9_ = entitas_entity_SetShow (entity, TRUE);
	_tmp10_ = x;
	_tmp11_ = y;
	_tmp12_ = entitas_entity_SetPosition (_tmp9_, (gfloat) _tmp10_, (gfloat) _tmp11_);
	_tmp13_ = entitas_entity_SetHealth (_tmp12_, (gfloat) 10, (gfloat) 10);
	entitas_entity_SetActive (_tmp13_, TRUE);
}


void factory_AddEnemy2 (Factory* self, gint x, gint y) {
	GPtrArray** _tmp0_;
	gint _tmp0__length1;
	GPtrArray* _tmp1_;
	gboolean _tmp2_;
	EntitasEntity* entity = NULL;
	GPtrArray** _tmp6_;
	gint _tmp6__length1;
	GPtrArray* _tmp7_;
	gpointer _tmp8_;
	EntitasEntity* _tmp9_;
	gint _tmp10_;
	gint _tmp11_;
	EntitasEntity* _tmp12_;
	EntitasEntity* _tmp13_;
	g_return_if_fail (self != NULL);
	_tmp0_ = ((EntitasWorld*) self)->cache;
	_tmp0__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp1_ = _tmp0_[POOL_ENEMY2];
	_tmp2_ = g_ptr_array_IsEmpty (_tmp1_);
	if (_tmp2_) {
		GPtrArray** _tmp3_;
		gint _tmp3__length1;
		GPtrArray* _tmp4_;
		EntitasEntity* _tmp5_;
		_tmp3_ = ((EntitasWorld*) self)->cache;
		_tmp3__length1 = ((EntitasWorld*) self)->cache_length1;
		_tmp4_ = _tmp3_[POOL_ENEMY2];
		_tmp5_ = factory_CreateEnemy2 (self);
		g_ptr_array_add (_tmp4_, _tmp5_);
	}
	_tmp6_ = ((EntitasWorld*) self)->cache;
	_tmp6__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp7_ = _tmp6_[POOL_ENEMY2];
	_tmp8_ = g_ptr_array_Pop (_tmp7_);
	entity = _tmp8_;
	_tmp9_ = entitas_entity_SetShow (entity, TRUE);
	_tmp10_ = x;
	_tmp11_ = y;
	_tmp12_ = entitas_entity_SetPosition (_tmp9_, (gfloat) _tmp10_, (gfloat) _tmp11_);
	_tmp13_ = entitas_entity_SetHealth (_tmp12_, (gfloat) 20, (gfloat) 20);
	entitas_entity_SetActive (_tmp13_, TRUE);
}


void factory_AddEnemy3 (Factory* self, gint x, gint y) {
	GPtrArray** _tmp0_;
	gint _tmp0__length1;
	GPtrArray* _tmp1_;
	gboolean _tmp2_;
	EntitasEntity* entity = NULL;
	GPtrArray** _tmp6_;
	gint _tmp6__length1;
	GPtrArray* _tmp7_;
	gpointer _tmp8_;
	EntitasEntity* _tmp9_;
	gint _tmp10_;
	gint _tmp11_;
	EntitasEntity* _tmp12_;
	EntitasEntity* _tmp13_;
	g_return_if_fail (self != NULL);
	_tmp0_ = ((EntitasWorld*) self)->cache;
	_tmp0__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp1_ = _tmp0_[POOL_ENEMY3];
	_tmp2_ = g_ptr_array_IsEmpty (_tmp1_);
	if (_tmp2_) {
		GPtrArray** _tmp3_;
		gint _tmp3__length1;
		GPtrArray* _tmp4_;
		EntitasEntity* _tmp5_;
		_tmp3_ = ((EntitasWorld*) self)->cache;
		_tmp3__length1 = ((EntitasWorld*) self)->cache_length1;
		_tmp4_ = _tmp3_[POOL_ENEMY3];
		_tmp5_ = factory_CreateEnemy3 (self);
		g_ptr_array_add (_tmp4_, _tmp5_);
	}
	_tmp6_ = ((EntitasWorld*) self)->cache;
	_tmp6__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp7_ = _tmp6_[POOL_ENEMY3];
	_tmp8_ = g_ptr_array_Pop (_tmp7_);
	entity = _tmp8_;
	_tmp9_ = entitas_entity_SetShow (entity, TRUE);
	_tmp10_ = x;
	_tmp11_ = y;
	_tmp12_ = entitas_entity_SetPosition (_tmp9_, (gfloat) _tmp10_, (gfloat) _tmp11_);
	_tmp13_ = entitas_entity_SetHealth (_tmp12_, (gfloat) 60, (gfloat) 60);
	entitas_entity_SetActive (_tmp13_, TRUE);
}


void factory_AddExplosion (Factory* self, gint x, gint y) {
	GPtrArray** _tmp0_;
	gint _tmp0__length1;
	GPtrArray* _tmp1_;
	gboolean _tmp2_;
	EntitasEntity* entity = NULL;
	GPtrArray** _tmp6_;
	gint _tmp6__length1;
	GPtrArray* _tmp7_;
	gpointer _tmp8_;
	EntitasEntity* _tmp9_;
	gint _tmp10_;
	gint _tmp11_;
	EntitasTransform _tmp12_;
	SDL_Rect* _tmp13_;
	guint _tmp14_;
	EntitasTransform _tmp15_;
	SDL_Rect* _tmp16_;
	guint _tmp17_;
	EntitasEntity* _tmp18_;
	EntitasEntity* _tmp19_;
	gint _tmp20_;
	gint _tmp21_;
	EntitasEntity* _tmp22_;
	EntitasEntity* _tmp23_;
	EntitasEntity* _tmp24_;
	g_return_if_fail (self != NULL);
	_tmp0_ = ((EntitasWorld*) self)->cache;
	_tmp0__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp1_ = _tmp0_[POOL_EXPLOSION];
	_tmp2_ = g_ptr_array_IsEmpty (_tmp1_);
	if (_tmp2_) {
		GPtrArray** _tmp3_;
		gint _tmp3__length1;
		GPtrArray* _tmp4_;
		EntitasEntity* _tmp5_;
		_tmp3_ = ((EntitasWorld*) self)->cache;
		_tmp3__length1 = ((EntitasWorld*) self)->cache_length1;
		_tmp4_ = _tmp3_[POOL_EXPLOSION];
		_tmp5_ = factory_CreateExplosion (self);
		g_ptr_array_add (_tmp4_, _tmp5_);
	}
	_tmp6_ = ((EntitasWorld*) self)->cache;
	_tmp6__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp7_ = _tmp6_[POOL_EXPLOSION];
	_tmp8_ = g_ptr_array_Pop (_tmp7_);
	entity = _tmp8_;
	_tmp9_ = entitas_entity_SetShow (entity, TRUE);
	_tmp10_ = x;
	_tmp11_ = y;
	_tmp12_ = (*entity).transform;
	_tmp13_ = _tmp12_.aabb;
	_tmp14_ = (*_tmp13_).w;
	_tmp15_ = (*entity).transform;
	_tmp16_ = _tmp15_.aabb;
	_tmp17_ = (*_tmp16_).h;
	_tmp18_ = entitas_entity_SetBounds (_tmp9_, _tmp10_, _tmp11_, (gint) _tmp14_, (gint) _tmp17_);
	_tmp19_ = entitas_entity_SetTween (_tmp18_, 0.006f, 0.6f, -3.f, FALSE, TRUE);
	_tmp20_ = x;
	_tmp21_ = y;
	_tmp22_ = entitas_entity_SetPosition (_tmp19_, (gfloat) _tmp20_, (gfloat) _tmp21_);
	_tmp23_ = entitas_entity_SetScale (_tmp22_, 0.6f * SDX_pixelFactor, 0.6f * SDX_pixelFactor);
	_tmp24_ = entitas_entity_SetExpires (_tmp23_, 0.2f);
	entitas_entity_SetActive (_tmp24_, TRUE);
}


void factory_AddBang (Factory* self, gint x, gint y) {
	GPtrArray** _tmp0_;
	gint _tmp0__length1;
	GPtrArray* _tmp1_;
	gboolean _tmp2_;
	EntitasEntity* entity = NULL;
	GPtrArray** _tmp6_;
	gint _tmp6__length1;
	GPtrArray* _tmp7_;
	gpointer _tmp8_;
	EntitasEntity* _tmp9_;
	gint _tmp10_;
	gint _tmp11_;
	EntitasTransform _tmp12_;
	SDL_Rect* _tmp13_;
	guint _tmp14_;
	EntitasTransform _tmp15_;
	SDL_Rect* _tmp16_;
	guint _tmp17_;
	EntitasEntity* _tmp18_;
	EntitasEntity* _tmp19_;
	gint _tmp20_;
	gint _tmp21_;
	EntitasEntity* _tmp22_;
	EntitasEntity* _tmp23_;
	EntitasEntity* _tmp24_;
	g_return_if_fail (self != NULL);
	_tmp0_ = ((EntitasWorld*) self)->cache;
	_tmp0__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp1_ = _tmp0_[POOL_BANG];
	_tmp2_ = g_ptr_array_IsEmpty (_tmp1_);
	if (_tmp2_) {
		GPtrArray** _tmp3_;
		gint _tmp3__length1;
		GPtrArray* _tmp4_;
		EntitasEntity* _tmp5_;
		_tmp3_ = ((EntitasWorld*) self)->cache;
		_tmp3__length1 = ((EntitasWorld*) self)->cache_length1;
		_tmp4_ = _tmp3_[POOL_BANG];
		_tmp5_ = factory_CreateBang (self);
		g_ptr_array_add (_tmp4_, _tmp5_);
	}
	_tmp6_ = ((EntitasWorld*) self)->cache;
	_tmp6__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp7_ = _tmp6_[POOL_BANG];
	_tmp8_ = g_ptr_array_Pop (_tmp7_);
	entity = _tmp8_;
	_tmp9_ = entitas_entity_SetShow (entity, TRUE);
	_tmp10_ = x;
	_tmp11_ = y;
	_tmp12_ = (*entity).transform;
	_tmp13_ = _tmp12_.aabb;
	_tmp14_ = (*_tmp13_).w;
	_tmp15_ = (*entity).transform;
	_tmp16_ = _tmp15_.aabb;
	_tmp17_ = (*_tmp16_).h;
	_tmp18_ = entitas_entity_SetBounds (_tmp9_, _tmp10_, _tmp11_, (gint) _tmp14_, (gint) _tmp17_);
	_tmp19_ = entitas_entity_SetTween (_tmp18_, 0.003f, 0.3f, -3.f, FALSE, TRUE);
	_tmp20_ = x;
	_tmp21_ = y;
	_tmp22_ = entitas_entity_SetPosition (_tmp19_, (gfloat) _tmp20_, (gfloat) _tmp21_);
	_tmp23_ = entitas_entity_SetScale (_tmp22_, 0.3f * SDX_pixelFactor, 0.3f * SDX_pixelFactor);
	_tmp24_ = entitas_entity_SetExpires (_tmp23_, 0.2f);
	entitas_entity_SetActive (_tmp24_, TRUE);
}


void factory_AddParticle (Factory* self, gint x, gint y) {
	GPtrArray** _tmp0_;
	gint _tmp0__length1;
	GPtrArray* _tmp1_;
	gboolean _tmp2_;
	gdouble radians = 0.0;
	gdouble _tmp6_;
	gdouble magnitude = 0.0;
	gdouble _tmp7_;
	gdouble velocityX = 0.0;
	gdouble _tmp8_;
	gdouble velocityY = 0.0;
	gdouble _tmp9_;
	gfloat scale = 0.0F;
	gdouble _tmp10_;
	EntitasEntity* entity = NULL;
	GPtrArray** _tmp11_;
	gint _tmp11__length1;
	GPtrArray* _tmp12_;
	gpointer _tmp13_;
	EntitasEntity* _tmp14_;
	gint _tmp15_;
	gint _tmp16_;
	EntitasTransform _tmp17_;
	SDL_Rect* _tmp18_;
	guint _tmp19_;
	EntitasTransform _tmp20_;
	SDL_Rect* _tmp21_;
	guint _tmp22_;
	EntitasEntity* _tmp23_;
	gint _tmp24_;
	gint _tmp25_;
	EntitasEntity* _tmp26_;
	EntitasEntity* _tmp27_;
	EntitasEntity* _tmp28_;
	EntitasEntity* _tmp29_;
	g_return_if_fail (self != NULL);
	_tmp0_ = ((EntitasWorld*) self)->cache;
	_tmp0__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp1_ = _tmp0_[POOL_PARTICLE];
	_tmp2_ = g_ptr_array_IsEmpty (_tmp1_);
	if (_tmp2_) {
		GPtrArray** _tmp3_;
		gint _tmp3__length1;
		GPtrArray* _tmp4_;
		EntitasEntity* _tmp5_;
		_tmp3_ = ((EntitasWorld*) self)->cache;
		_tmp3__length1 = ((EntitasWorld*) self)->cache_length1;
		_tmp4_ = _tmp3_[POOL_PARTICLE];
		_tmp5_ = factory_CreateParticle (self);
		g_ptr_array_add (_tmp4_, _tmp5_);
	}
	_tmp6_ = sdx_GetRandom ();
	radians = _tmp6_ * TAU;
	_tmp7_ = sdx_GetRandom ();
	magnitude = _tmp7_ * 200;
	_tmp8_ = cos (radians);
	velocityX = magnitude * _tmp8_;
	_tmp9_ = sin (radians);
	velocityY = magnitude * _tmp9_;
	_tmp10_ = sdx_GetRandom ();
	scale = (gfloat) _tmp10_;
	_tmp11_ = ((EntitasWorld*) self)->cache;
	_tmp11__length1 = ((EntitasWorld*) self)->cache_length1;
	_tmp12_ = _tmp11_[POOL_PARTICLE];
	_tmp13_ = g_ptr_array_Pop (_tmp12_);
	entity = _tmp13_;
	_tmp14_ = entitas_entity_SetShow (entity, TRUE);
	_tmp15_ = x;
	_tmp16_ = y;
	_tmp17_ = (*entity).transform;
	_tmp18_ = _tmp17_.aabb;
	_tmp19_ = (*_tmp18_).w;
	_tmp20_ = (*entity).transform;
	_tmp21_ = _tmp20_.aabb;
	_tmp22_ = (*_tmp21_).h;
	_tmp23_ = entitas_entity_SetBounds (_tmp14_, _tmp15_, _tmp16_, (gint) _tmp19_, (gint) _tmp22_);
	_tmp24_ = x;
	_tmp25_ = y;
	_tmp26_ = entitas_entity_SetPosition (_tmp23_, (gfloat) _tmp24_, (gfloat) _tmp25_);
	_tmp27_ = entitas_entity_SetScale (_tmp26_, scale * SDX_pixelFactor, scale * SDX_pixelFactor);
	_tmp28_ = entitas_entity_SetVelocity (_tmp27_, (gfloat) velocityX, (gfloat) velocityY);
	_tmp29_ = entitas_entity_SetExpires (_tmp28_, 0.75f);
	entitas_entity_SetActive (_tmp29_, TRUE);
}




